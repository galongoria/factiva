function getRef(n,t){return t=t?t.navigator?t.document:t:document,isIE?t.all[n]:isDOM?(t.getElementById?t:t.ownerDocument).getElementById(n):isNS4?t.layers[n]:null}function getSty(n,t){var i=getRef(n,t);return i?isNS4?i:i.style:null}function getLyr(n,t){return new LayerObj(n,t)}function LyrFn(n,t){LayerObj.prototype[n]=new Function('var a=arguments,p=a[0],px=isNS4||isOp?0:"px"; with (this) { '+t+" }")}function FSMenu(n,t,i,r,u){this.myName=n;this.nested=t;this.cssProp=i;this.cssVis=r;this.cssHid=u;this.cssLitClass="";this.menus={root:new FSMenuNode("root",!0,this)};this.menuToShow=[];this.mtsTimer=null;this.showDelay=0;this.switchDelay=125;this.hideDelay=500;this.showOnClick=1;this.hideOnClick=!1;this.animInSpeed=.2;this.animOutSpeed=.2;this.animations=[];this.fnHideCallBack=null}function changeON(n){var t;(t=document.getElementById(n))&&(t.src=t.src.replace("_OFF","_ON"),t.src=t.src.replace("_off","_on"))}function changeOFF(n){var t;(t=document.getElementById(n))&&(t.src=t.src.replace("_ON","_OFF"),t.src=t.src.replace("_on","_off"))}function highlightNode(){var i=document.getElementById("nlding"),r=document.getElementById("ding"),n,t;ppsnewsletter=document.getElementById("ppsnewsletter");ppsbriefcase=document.getElementById("ppsbriefcase");n=document.getElementById("ppspodcast");t=document.getElementById("podcast_anchordiv");i&&ppsnewsletter&&(i.innerHTML?t&&t.innerHTML?(highlightPodcast(n),xFirstChild(xParent(ppsnewsletter),"A").style.background="",xFirstChild(xParent(ppsnewsletter),"A").blur()):(unHighlightPodcast(n),xFirstChild(xParent(ppsnewsletter),"A").style.background="#BBDD55"):(xFirstChild(xParent(ppsnewsletter),"A").style.background="",xFirstChild(xParent(ppsnewsletter),"A").blur()));r&&ppsbriefcase&&(r.innerHTML?xFirstChild(xParent(ppsbriefcase),"A").style.background="#BBDD55":(xFirstChild(xParent(ppsbriefcase),"A").style.background="",xFirstChild(xParent(ppsbriefcase),"A").blur()))}function highlightPodcast(n){xFirstChild(xParent(n),"A").style.background="#BBDD55"}function unHighlightPodcast(n){xFirstChild(xParent(n),"A").style.background="";xFirstChild(xParent(n),"A").blur()}function FSMenuNode(n,t,i){this.id=n;this.isRoot=t;this.obj=i;this.lyr=this.child=this.par=this.timer=this.visible=null;this.args=[];var r=this;this.fnHideCallBack=null;this.over=function(n){var f,u,t,e,o;if(isNS4&&n&&r.lyr.ref&&r.lyr.ref.routeEvent(n),clearTimeout(r.timer),clearTimeout(r.obj.mtsTimer),r.isRoot||r.visible||r.show(),r.obj.menuToShow.length){if(f=r.obj.menuToShow,u=f[0],r.obj.menus[u]&&r.obj.menus[u].lyr.ref||(r.obj.menus[u]=new FSMenuNode(u,!1,i)),t=r.obj.menus[u],t==r){r.obj.menuToShow.length=0;return}if(clearTimeout(t.timer),t!=r.child&&t.lyr.ref){for(t.args.length=f.length,e=0;e<f.length;e++)t.args[e]=f[e];o=r.child?r.obj.switchDelay:r.obj.showDelay;t.timer=setTimeout("with("+r.obj.myName+') { menus["'+t.id+'"].par = menus["'+r.id+'"]; menus["'+t.id+'"].show() }',o?o:1)}r.obj.menuToShow.length=0}!r.obj.nested&&r.par&&r.par.over()};this.out=function(n){isNS4&&n&&r.lyr&&r.lyr.ref&&r.lyr.ref.routeEvent(n);clearTimeout(r.timer);r.isRoot||(r.timer=setTimeout(r.obj.myName+'.menus["'+r.id+'"].hide();if(oBD.ns){showDP();}if(oBD.ie6){hideSortBy(false);}',r.obj.hideDelay),!r.obj.nested&&r.par&&r.par.out())};this.id!="root"&&(this.lyr=getLyr(this.id),this.lyr.ref&&(isNS4&&this.lyr.ref.captureEvents(Event.MOUSEOVER|Event.MOUSEOUT),addEvent(this.lyr.ref,"click",this.over),addEvent(this.lyr.ref,"mouseover",this.over),addEvent(this.lyr.ref,"mouseout",this.out),this.obj.nested&&(addEvent(this.lyr.ref,"focus",this.over),addEvent(this.lyr.ref,"mouseover",this.over),addEvent(this.lyr.ref,"blur",this.out))))}function flipImage(n,t){var i=xGetElementById(n);i&&t!=""&&(i.src=t)}function hideSortBy(n){var t=xGetElementById("tso");t&&(n?xHide(t):xShow(t))}function WSRequestContextPopup(n,t,i,r,u,f,e,o,s){this.action=n;this.id=t;this.name=i;this.sortBy=r;this.sortOrder=u;this.feedsFlag=f;this.nlic=o;this.source=e;this.isPP=s}function DoWorkspacePopupSubmit(n){var t,i;return window.event?t=n.keyCode:n.which&&(t=n.which),t==13?(i=document.getElementById("saveNewWorkspace"),i&&i.click(),!1):void 0}function saveCreateNewBC(n,t){var i=window.integratedSearchBuilder?$("#createworkspaceoverlay,#cloneworkspaceoverlay").find("#ipin").val():$("#ipin").val(),r;return trim(i||"").length==0?(alert(n),!1):hasIllegalChar(i)?(alert(t),!1):(r="Save",ModifyWorkspacePopup(null,null,r,null,null,null),!1)}function showRename(){xDisplay(xGetElementById("renameWS"),"block");xGetElementById("ipin_rename").focus()}function hideRename(){xDisplay(xGetElementById("renameWS"),"none")}function saveClone(n,t,i,r){if(val=xGetElementById("ipin_rename").value,val.length==0)return alert(i),!1;if(hasIllegalChar(val))return alert(r),!1;return ModifyWorkspaceEditPage(n,t,"Rename",null,null,null),!1}function ChangeSort(n,t,i){if($("input[name='hdl']").length==0)return!1;var r=t.selectedIndex;currSortOrder=t.options[r].value;ModifyWorkspaceEditPage(n,t,i,currSortBy,currSortOrder)}function changeFeedStatusEdit(n,t,i,r){feedsFlagEdit=r;ModifyWorkspaceEditPage(n,t,i,null,null)}function ModifyWorkspaceEditPage(n,t,i){var u="Edit",f,r,e;itemId=xGetElementById("ipid").value;switch(i){case"ChangeFeeds":currAction=i;showLoadingPopup(n);f=null;r=null;e=new WSRequestContextPopup(i,itemId,f,currSortBy,currSortOrder,feedsFlagEdit,u,r,null);ModifyWorkspaceServiceCallPopup(n,e,u);break;case"Publish":GetBForm().ipid.value=itemId;doLinkSubmit("publishws.aspx");break;case"Rename":showLoadingPopup(n);f=xGetElementById("ipin_rename").value;r=null;e=new WSRequestContextPopup(i,itemId,f,currSortBy,currSortOrder,feedsFlagEdit,u,r,null);ModifyWorkspaceServiceCallPopup(n,e,u);break;case"Get":showLoadingPopup(n);f=null;if(r=getNLIC(!0,!1,!0),r=="false")return hideLoadingPopup(),!1;r!=""&&(r="<nlic>"+r+"<\/nlic>",e=new WSRequestContextPopup(i,itemId,f,currSortBy,currSortOrder,feedsFlagEdit,u,r,null),ModifyWorkspaceServiceCallPopup(n,e,u))}}function WSCallBackEdit(n){var t=n.ClientContext,i;switch(t.action){case"ChangeFeeds":hideLoadingPopup();xGetElementById("feeds").innerHTML=n.Text;break;case"Rename":hideRename();hideLoadingPopup();xGetElementById("wsName").innerHTML=t.name;xGetElementById("ipin_rename").value=t.name;break;case"Get":hideLoadingPopup();xGetElementById("headlines").innerHTML=n.Text;ApplyStyles()}EnablePPSOptions();i=$("input[name='hdl']");$(i).click(function(){EnablePPSOptions()})}function WSerrCallBackEdit(n){LoadingErrorCallback(n);EnablePPSOptions()}function showInlineCreateFeedError(n){$("#batchDLoverlay .batchDLError")[0].innerHTML=n;$("#batchDLoverlay .batchDLError").show()}function BatchDownloadPopupAction(n,t,i){var h,r,f,a,e,u,o,c,l,p;if(!$(t).hasClass("disabled")){a="Popup";e={};switch(i){case"Get":currAction=i;e={action:i,dlName:"",dlDesc:"",dlFileName:"",isSelArt:"",maxArtToDl:"",nlic:"",freeTextSrch:"",hlDrns:""};h=new BDRequestContextPopup(e);DJMetrics.captureMetrics("create_json_export_overlay_view",!0);BatchDownloadServiceCall(n,h,a);break;case"Create":if(currAction=i,u=$("#batchDLName").val(),o=$("#batchDLDescr").val(),!u){showInlineCreateFeedError(translate("noBatchFileNameMsg"));return}if(u.length<5){showInlineCreateFeedError(translate("min5CharForNameMsg"));return}if(o.length!=0&&o.length<5){showInlineCreateFeedError(translate("min5CharForDescMsg"));return}var d=u.replace(/\s+/g,"").trim(),v=parseInt($("#btachDLMaxArtCount").attr("max")),g=parseInt($("#btachDLMaxArtCount").val()),y=$("#batchDLAmount").is(":checked"),w=$("#batchDLAllArt").is(":checked"),s=w?v:y?g:countCheckedHeadlines();if(y&&(s<1||s>v)){showInlineCreateFeedError(translate("selectFromOneto")+" "+v);return}var b=$("#batchDLSelArt").is(":checked"),k=$("#searchBuilderContainer").before($("#searchBuilderBoxWrap")).find("#ftx").val(),nt=$("#fg_pcs_req").val();if(isArticlesSelected()&&b)if($("input[name=ws_drns]").length>0){if(c=getUniqueDrns("ws_drns"),c.length>0&&(s=c.length,f=c.join(",")),!f){alert("Error processing selected articles!");return}}else{if(r=getNLIC(!1,!1,!0),r=="false"){alert("Error processing selected articles!");return}r!=""&&(r="<nlic>"+r+"<\/nlic>",k="")}e={action:i,dlName:u,dlDesc:o,dlFileName:d,isSelArt:b,maxArtToDl:s.toString(),nlic:r,freeTextSrch:k,structSrch:nt,hlDrns:f};h=new BDRequestContextPopup(e);l="selected";y?l="amount":w&&(l="all");p={article_count:s,format_type:l,name:u,description:o};f&&f.length>0&&(p.workspace_count=$("input[name=ws_drns]:checked").length);DJMetrics.captureCreateJSONExport(p);BatchDownloadServiceCall(n,h,a)}}}function countCheckedHeadlines(){for(var t=0,i=document.getElementsByName("hdl"),n=0;n<i.length;n++)i[n].checked&&t++;return t}function getUniqueDrns(n){var i=$("input[name="+n+"]:checked"),r=[],t;return i&&i.length>0&&(t="",i.each(function(){$(this).val().length>0&&(t+=t.length>0?",".concat($(this).val()):$(this).val())}),r=t.length>0?Array.from(new Set(t.split(","))):[]),r}function BDRequestContextPopup(n){this.action=n.action;this.dlName=n.dlName;this.dlDesc=n.dlDesc;this.dlFileName=n.dlFileName;this.isSelArt=n.isSelArt;this.maxArtToDl=n.maxArtToDl;this.nlic=n.nlic;this.freeTextSrch=n.freeTextSrch;this.structSrch=n.structSrch;this.hlDrns=n.hlDrns}function BatchDownloadServiceCall(n,t,i){var u,f,r;i=="Popup"?(progressIndicator.display(translate("loading")+"..."),u=BatchDownloadCallBackPopup,f=BDerrCallBackPopup):i=="Edit"&&(u=BatchDownloadCallBackPopup,f=WSerrCallBackEdit);r=new RequestContext("factiva.com.ui.batchdl.services.BatchDownloadService",t,null,u,f);r.Add("action",t.action);t.dlName&&r.Add("dlName",trim(t.dlName));t.dlDesc&&r.Add("dlDesc",trim(t.dlDesc));t.dlFileName&&r.Add("dlFileName",trim(t.dlFileName));t.isSelArt&&r.Add("isSelArt",t.isSelArt);t.maxArtToDl&&r.Add("maxArtToDl",trim(t.maxArtToDl));t.nlic&&t.nlic!=""&&r.Add("nlic",trim(t.nlic));t.freeTextSrch&&r.Add("freeTextSrch",trim(t.freeTextSrch));t.structSrch&&r.Add("structSrch",trim(t.structSrch));t.hlDrns&&r.Add("hlDrns",trim(t.hlDrns));r.Send()}function BDerrCallBackPopup(n){var r=document.getElementById(gloPopup3),i;r.className="";progressIndicator.hide();var f=n.ClientContext,u=n.Error.Description,t=n.Error&&n.Error.Number?n.Error.Number:"";t=="210330"?setTimeout(function(){showInlineCreateFeedError(translate("noSupportForOtherCategory"))},0):(t=t!=""&&t!=null?t=" ("+t+")":"",setTimeout(function(){showInlineCreateFeedError(u+t)},0));i=n.ClientContext;switch(i.action){case"AddItem":case"Create":case"Clone":(i.name="")?bProcessingRequest=!1:$("#ipin").focus()}}function BatchDownloadCallBackPopup(n){var o=n.ClientContext,s=document.body.className=="WorkSpace",u,r,f,e,t,i;switch(o.action){case"Get":t=[];t[t.length]='<div id="batchDLoverlay" class="overlaycontainer">';t[t.length]='    <div class="overlayclose" onclick="$().overlay.hide(\'#'+popupMainId+"');\"><\/div>";t[t.length]='    <div class="overlayheader">'+translate("jsonExportPPS")+"<\/div>";t[t.length]='    <div class="batchDLError"><\/div>';t[t.length]='    <div class="overlaybody"><\/div>';t[t.length]='    <div class="overlayfooter">';t[t.length]="        <UL class=buttons>";t[t.length]='             <LI class=btn><DIV class="prettyBtn primaryBtn" onclick="BatchDownloadPopupAction(event, this, \'Create\')"><SPAN>'+translate("generateExport")+"<\/SPAN><\/DIV><\/LI>";t[t.length]='             <LI class=btn><DIV class="prettyBtn secondaryBtn" onclick="$().overlay.hide(\'#'+popupMainId+"');\"><SPAN>"+translate("cancel")+"<\/SPAN><\/DIV><\/LI>";t[t.length]="        <\/UL > ";t[t.length]="    <\/div>";t[t.length]="<\/div>";$("#"+popupMainId).html(t.join(""));$("#"+popupMainId).css({width:550,height:250});$("#batchDLoverlay").attr("style","width:570px;min-height:290px");$("#batchDLoverlay .overlaybody").html(n.Text);$("#batchDLoverlay").draggable({handle:".overlayheader"});$("#batchDLoverlay .popupHdrNewNL").css({display:"none"});$("#"+popupMainId).overlay({closeOnEsc:!0,background:!0});u=$("#batchDLSelArt");r=$("#batchDLAllArt");isArticlesSelected()||(u.attr("disabled",!0).attr("checked",!1),r.attr("checked",!0),$(".batchDLMaxArtCountSel").show());f=trim($("#searchBuilderContainer").before($("#searchBuilderBoxWrap")).find("#ftx").val());e=trim($("#ftxCont #ftx").val());isNullOrEmpty(f)&&isNullOrEmpty(e)&&r.attr("disabled",!0);s&&($("#batchDLAmount").attr("disabled",!0),$("#btachDLMaxArtCount").attr("disabled",!0));r.is(":disabled")&&u.is(":disabled")?($("#batchDLoverlay .primaryBtn").addClass("hidden"),typeof DisableBatchDL=="function"&&DisableBatchDL()):($("#batchDLoverlay .primaryBtn").removeClass("hidden"),typeof EnableBatchDL=="function"&&EnableBatchDL());progressIndicator.hide();break;case"Create":progressIndicator.hide();t=[];t[t.length]='<div id="batchDLoverlaySuccess" class="overlaycontainer">';t[t.length]='    <div class="overlaybody"><\/div>';t[t.length]='    <div class="overlayfooter">';t[t.length]="        <ul class=buttons>";t[t.length]='             <li class=btn><div class="prettyBtn primaryBtn"><a href="javascript: void(0)" onclick="return BatchStatusDownload();"><span>'+translate("view")+"<\/span><\/a><\/div><\/li>";t[t.length]='             <li class=btn><div class="prettyBtn secondaryBtn" onclick="$().overlay.hide(\'#'+popupMainId+"');\"><span>"+translate("close")+"<\/span><\/div><\/li>";t[t.length]="        <\/ul > ";t[t.length]="    <\/div>";t[t.length]="<\/div>";i=[];i[i.length]="<div>"+translate("exportSuccessfullyCreated")+"<\/div>";i[i.length]="<div>"+translate("goTo")+" "+translate("settingsLC")+" > "+translate("jsonExportManager")+" "+translate("jsonExportInstruction")+"<\/div>";$("#"+popupMainId).html(t.join(""));$("#"+popupMainId).css({width:550,height:123});$("#batchDLoverlaySuccess").css({width:570,height:133});$("#batchDLoverlaySuccess .overlaybody").html(i.join(""));$("#batchDLoverlaySuccess").draggable({handle:".overlayheader"});$("#batchDLoverlaySuccess .popupHdrNewNL").css({display:"none"});$("#"+popupMainId).overlay({closeOnEsc:!0,background:!0})}}function BatchStatusDownload(){var n="../batchdl/BatchStatusDownload.aspx?sa_from="+gSaFromPrefix+"&mod=CreateJSONExport",t={nvp:[{key:"doneURL",val:gCurrentPageUrl}]};return ExDoLinkPost(n,null,t)}function ModifyWorkspacePopup(n,t,i,r,u,f,e){var s,o,h,l,a,v,c="Popup",y;switch(i){case"Get":currAction=i;currItemId=f;s=null;o=null;h=new WSRequestContextPopup(i,f,s,currSortBy,currSortOrder,feedsFlagEdit,c,o,e);ModifyWorkspaceServiceCallPopup(n,h,c);t&&t.classList.contains("ppsBtn")&&(y=grabAccNo("true"),DJMetrics.captureSearchResultToolbarAction("add_selected_articles_to_workspace",y.length));break;case"Create":bProcessingRequest||(currAction=i,currItemId=f,s=null,o=null,h=new WSRequestContextPopup(i,f,s,currSortBy,currSortOrder,feedsFlagEdit,c,o,null),ModifyWorkspaceServiceCallPopup(n,h,c));break;case"Clone":bProcessingRequest||(currAction=i,currItemId=f,s=null,o=null,h=new WSRequestContextPopup(i,f,s,currSortBy,currSortOrder,feedsFlagEdit,c,o),ModifyWorkspaceServiceCallPopup(n,h,c));break;case"Save":if(i=currAction,f=currItemId,s=window.integratedSearchBuilder?$("#createworkspaceoverlay,#cloneworkspaceoverlay").find("#ipin").val():$("#ipin").val(),o=null,currAction=="Create"){if(l=!1,a=!1,v=!1,o=getNLIC(l,a,v),o=="false")return!1;o!=""&&(o="<nlic>"+o+"<\/nlic>")}h=new WSRequestContextPopup(i,f,s,currSortBy,currSortOrder,feedsFlagEdit,c,o,null);ModifyWorkspaceServiceCallPopup(n,h,c);break;case"AddItem":if(acc=null,currAction=i,currItemId=f,s=null,l=!1,a=!1,v=!0,o=getNLIC(l,a,v),o=="false")return!1;o!=""&&(o="<nlic>"+o+"<\/nlic>",document.getElementById("Fader_"+f).innerHTML="<div id='waiting'><img src='../img/fce-ajax-loading.gif'><\/div>",h=new WSRequestContextPopup(i,f,s,currSortBy,currSortOrder,feedsFlagEdit,c,o,null),ModifyWorkspaceServiceCallPopup(n,h,c))}}function ModifyWorkspaceServiceCallPopup(n,t,i){var u,f,r;i=="Popup"?(progressIndicator.display(translate("loading")+"..."),u=WSCallBackPopup,f=WSerrCallBackPopup):i=="Edit"&&(u=WSCallBackEdit,f=WSerrCallBackEdit);r=new RequestContext("factiva.com.ui.workspace.WorkspaceManageService",t,null,u,f);r.Add("action",t.action);r.Add("workspaceCollectionType","Workspace");t.id&&r.Add("id",t.id);t.name&&r.Add("name",trim(t.name));t.sortBy&&r.Add("sortBy",t.sortBy);t.sortOrder&&r.Add("sortOrder",t.sortOrder);t.feedsFlag&&r.Add("feedsFlag",t.feedsFlag);t.source&&r.Add("source",t.source);t.nlic&&r.Add("mic",t.nlic);t.isPP&&r.Add("isPP",t.isPP);r.Send()}function WSCallBackPopup(n){var i=n.ClientContext,t,r;switch(i.action){case"Get":t=[];t[t.length]='<div id="workspaceoverlay" class="overlaycontainer">';t[t.length]='    <div class="overlayclose" onclick="$().overlay.hide(\'#'+popupMainId+"');\"><\/div>";t[t.length]='    <div class="overlayheader">'+translate("workspace")+"<\/div>";t[t.length]='    <div class="overlaybody"><\/div>';t[t.length]='    <div class="overlayfooter">';t[t.length]='        <UL class=buttons><LI class=btn><DIV class="prettyBtn secondaryBtn" onclick="$().overlay.hide(\'#'+popupMainId+"');\"><SPAN>"+translate("cancel")+"<\/SPAN><\/DIV><\/LI><\/UL>";t[t.length]="    <\/div>";t[t.length]="<\/div>";$("#"+popupMainId).html(t.join(""));$("#"+popupMainId).css({width:550,height:350});$("#workspaceoverlay").css({width:570,height:370});$("#workspaceoverlay .overlaybody").html(n.Text);$("#workspaceoverlay").draggable({handle:".overlayheader"});$("#workspaceoverlay .popupHdrNewNL").css({display:"none"});RegisterWSTableForSorting("wsTable");$("#"+popupMainId).overlay({closeOnEsc:!0,background:!0});progressIndicator.hide();break;case"AddItem":bProcessingRequest=!1;trim(n.Text)==""||n.Text==null?(faderid=n.ClientContext.id,ModifyWorkspacePopup(null,null,"Get","","",""),progressIndicator.hide(),progressIndicator.display(translate("articlesHasBeenAdded")+"...")):(faderid=n.ClientContext.id,progressIndicator.hide(),setTimeout(function(){$().messageDialog(n.Text)},10));break;case"Create":i.name==null?(t=[],t[t.length]='<div id="createworkspaceoverlay" class="overlaycontainer">',t[t.length]='    <div class="overlayclose" onclick="$().overlay.hide(\'#'+gloPopup2+"');\"><\/div>",t[t.length]='    <div class="overlayheader">'+translate("createNew")+"<\/div>",t[t.length]='    <div class="overlaybody"><\/div>',t[t.length]='    <div class="overlayfooter">',t[t.length]='        <UL class=buttons><LI class=btn><DIV class="prettyBtn secondaryBtn" onclick="$().overlay.hide(\'#'+gloPopup2+"');\"><SPAN>"+translate("cancel")+"<\/SPAN><\/DIV><\/LI><\/UL>",t[t.length]="    <\/div>",t[t.length]="<\/div>",$("#"+gloPopup2).html(t.join("")),$("#"+gloPopup2).css({width:350,height:180}),$("#createworkspaceoverlay").css({width:370,height:200}),$("#createworkspaceoverlay .overlaybody").html(n.Text),$("#createworkspaceoverlay").draggable({handle:".overlayheader"}),$("#createworkspaceoverlay .popupHdrNewNL").css({display:"none"}),$("#"+gloPopup2).overlay({closeOnEsc:!0,background:!0}),setTimeout(function(){$("#ipin").focus()},1e3),$("#createworkspaceoverlay").find("#ipin").focus(),progressIndicator.hide()):($("#workspaceoverlay .overlaybody").html(n.Text),$("#workspaceoverlay .popupHdrNewNL").css({display:"none"}),RegisterWSTableForSorting("wsTable"),$().overlay.hide("#"+gloPopup2),progressIndicator.hide());break;case"Clone":i.name==null?(t=[],t[t.length]='<div id="cloneworkspaceoverlay" class="overlaycontainer">',t[t.length]='    <div class="overlayclose" onclick="$().overlay.hide(\'#'+gloPopup2+"');\"><\/div>",t[t.length]='    <div class="overlayheader">'+translate("clone")+"<\/div>",t[t.length]='    <div class="overlaybody"><\/div>',t[t.length]='    <div class="overlayfooter">',t[t.length]='        <UL class=buttons><LI class=btn><DIV class="prettyBtn secondaryBtn" onclick="$().overlay.hide(\'#'+gloPopup2+"');\"><SPAN>"+translate("cancel")+"<\/SPAN><\/DIV><\/LI><\/UL>",t[t.length]="    <\/div>",t[t.length]="<\/div>",$("#"+gloPopup2).html(t.join("")),$("#"+gloPopup2).css({width:350,height:180}),$("#cloneworkspaceoverlay").css({width:370,height:200}),$("#cloneworkspaceoverlay .overlaybody").html(n.Text),$("#cloneworkspaceoverlay").draggable({handle:".overlayheader"}),$("#cloneworkspaceoverlay .popupHdrNewNL").css({display:"none"}),$("#"+gloPopup2).overlay({closeOnEsc:!0,background:!0}),r=$("#briefcase_"+i.id+" span").html(),$("#ipin").val(r),setTimeout(function(){$("#ipin").focus()},1e3),progressIndicator.hide()):($("#workspaceoverlay .overlaybody").html(n.Text),$("#workspaceoverlay .popupHdrNewNL").css({display:"none"}),RegisterWSTableForSorting("wsTable"),$().overlay.hide("#"+gloPopup2),progressIndicator.hide())}}function WSerrCallBackPopup(n){var r=document.getElementById(gloPopup3),i;r.className="";progressIndicator.hide();var f=n.ClientContext,u=n.Error.Description,t=n.Error&&n.Error.Number?n.Error.Number:"";t=="210729"?setTimeout(function(){$().messageDialog(translate("selectMoreThanAllowed"))},0):(t=t!=""&&t!=null?t=" ("+t+")":"",setTimeout(function(){$().messageDialog(u+t)},0));i=n.ClientContext;switch(i.action){case"AddItem":case"Create":case"Clone":(i.name="")?bProcessingRequest=!1:$("#ipin").focus()}}function SetInputFocusInWorkspacePopup(){(inputBox=xGetElementById("ipin"))&&inputBox.focus()}function loadingTopPopBriefcase(){var n=new String;n=n!=null&&n.length>0?n:translate("workspace");CreateTopLoadingDiv(n);PositionTopPopup("ppsbriefcase");ShimPageTop()}function dispalyFader(){try{xGetElementById("Fader_"+faderid).innerHTML=translate("articlesHasBeenAdded");xGetElementById("Fader_"+faderid).className="inlineAddMsg"}catch(n){}xAddEventListener("scrollableNewNL","mousemove",WaitOnFaderMessage,!0);ClearPopup2()}function WaitOnFaderMessage(){setTimeout("HideFaderMessage()",5e3)}function HideFaderMessage(){faderid!=0&&(xGetElementById("Fader_"+faderid)&&(xGetElementById("Fader_"+faderid).style.display="none"),faderid=0,xRemoveEventListener("scrollableNewNL","mousemove",HideFaderMessage,!1))}function editBriefcase(n,t,i){sendStateWS("../workspace/editws.aspx",n,t,i,!0)}function manageBriefcase(n,t,i){sendStateWS("../workspace/managews.aspx",null,t,i,!0)}function deleteHeadline(n,t,i,r){var u=GetLForm(),f=document.getElementById("LinkFormExElem"),o,e,s,h;if(doneURL=xGetElementById("doneURL")?xGetElementById("doneURL").value:gCurrentPageUrl,CreateHiddenField(f,"doneURL",doneURL),CreateHiddenField(f,"sa_from",i),CreateHiddenField(f,"napc",r),o=GetBForm(),null!=o&&(e=o.ibso,null!=e&&(s=e.selectedIndex,h=e.options[s].value,CreateHiddenField(f,"ibso",h))),isPostProcessing)return!1;u.action=n;try{t&&(typeof t=="string"&&(u._XFORMSTATE.value=t),typeof t=="object"&&(u._XFORMSTATE.value=t._XFORMSTATE.value))}catch(c){}return u.submit(),!1}function sendStateWS(n,t,i,r){var f=GetLForm(),u=document.getElementById("LinkFormExElem");return t!=null&&CreateHiddenField(u,"ipid",t),f.action=n,doneURL=xGetElementById("doneURL")?xGetElementById("doneURL").value:gCurrentPageUrl,CreateHiddenField(u,"doneURL",doneURL),CreateHiddenField(u,"sa_from",i),CreateHiddenField(u,"napc",r),f.target="_self",f.submit(),!1}function RegisterWSTableForSorting(){$("table[id='wsTable']").tablesorter({cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortList:[[1,1]],headers:{2:{sorter:!1}},widgets:["zebra"],dateFormat:"d,MM,yy"})}function ShowHint(n,t){var i=xGetElementById("feedRadioOn");i&&i!="undefined"?i.checked?hdShowHoverHints(n,t,"feedOnHH","feedOnHiddenHH"):hdShowHoverHints(n,t,"feedOffHH","feedOffHiddenHH"):hdShowHoverHints(n,t,"feedNoneHH","feedNoneHiddenHH")}function HideHint(){var n=xGetElementById("feedRadioOn");n&&n!="undefined"?n.checked?hdHideHoverHints("feedOnHH"):hdHideHoverHints("feedOffHH"):hdHideHoverHints("feedNoneHH")}function hdShowHoverHints(n,t,i,r){var u=xGetElementById(i),f=xGetElementById(r),e;u||(e=document.createElement("div"),e.id=i,xAppendChild(xGetElementById("contentWrapper"),e),u=xGetElementById(i),u.innerHTML=f.innerHTML,u.onmouseout=f.onmouseout,u.onmouseover=f.onmouseover,u.className="hoverHint");window.event&&(n=window.event);RepositionPopup(u,n.clientX,n.clientY);xShow(u)}function hdHideHoverHints(n){var t=xGetElementById(n);xHide(t)}function articleWS_click(n,t,i){showViewDropDown(n);article_click(n,t,i)}function showViewDropDown(n){var t=n.getAttribute("cat");xDisplay(xGetElementById("sortOrderLabelId"),"none");xDisplay(xGetElementById("ibso"),"none");xGetElementById("hc").value=MapCategoryToChannel(t);t&&(t=="Publications"?(xDisplay(xGetElementById("viewAsLabelId"),""),xDisplay(xGetElementById("dfdCtrl"),"")):t=="Pictures"&&(xDisplay(xGetElementById("viewAsLabelId"),"none"),xDisplay(xGetElementById("ipfCtrl"),"")))}function MapCategoryToChannel(n){switch(n){case"Publications":return"Publication";case"Pictures":return"Picture";case"WebSites":return"Website";default:return n}}function returnToHlWS(){hideViewDropDown();xGetElementById("hc").value="_Undefined";returnToHl()}function hideViewDropDown(){xDisplay(xGetElementById("sortOrderLabelId"),"");xDisplay(xGetElementById("ibso"),"");xDisplay(xGetElementById("viewAsLabelId"),"none");xDisplay(xGetElementById("dfdCtrl"))==""?xDisplay(xGetElementById("dfdCtrl"),"none"):xDisplay(xGetElementById("ipfCtrl"))==""&&xDisplay(xGetElementById("ipfCtrl"),"none")}function CBRequestContextPopup(n,t,i,r,u,f,e,o){this.action=n;this.id=t;this.name=i;this.sortBy=r;this.sortOrder=u;this.feedsFlag=f;this.nlic=o;this.source=e}function DoCompliancePopupSubmit(n){var t;return window.event?t=n.keyCode:n.which&&(t=n.which),t==13?((saveButton=document.getElementById("saveNewCompliance"))&&saveButton.click(),!1):void 0}function saveCreateNewCB(n,t){if(val=document.getElementById("ipin").value,trim(val).length==0)return alert(n),!1;if(hasIllegalChar(val))return alert(t),!1;return ModifyCompliancePopup(null,null,"Save",null,null,null),!1}function showRenameCB(){xDisplay(xGetElementById("renameWS"),"block");xGetElementById("ipin_rename").focus()}function hideRenameCB(){xDisplay(xGetElementById("renameWS"),"none")}function saveCloneCB(n,t,i,r){if(val=xGetElementById("ipin_rename").value,val.length==0)return alert(i),!1;if(hasIllegalChar(val))return alert(r),!1;return ModifyComplianceEditPage(n,t,"Rename",null,null,null),!1}function ChangeSortCB(n,t,i){var r=t.selectedIndex;currSortOrder=t.options[r].value;ModifyComplianceEditPage(n,t,i,currSortBy,currSortOrder)}function changeFeedStatusEditCB(n,t,i,r){feedsFlagEdit=r;ModifyComplianceEditPage(n,t,i,null,null)}function ModifyComplianceEditPage(n,t,i){var u="Edit",f,r,e;itemId=xGetElementById("ipid").value;switch(i){case"ChangeFeeds":currAction=i;showLoadingPopup(n);f=null;r=null;e=new CBRequestContextPopup(i,itemId,f,currSortBy,currSortOrder,feedsFlagEdit,u,r);ModifyComplianceServiceCallPopup(n,e,u);break;case"Publish":GetBForm().ipid.value=itemId;doLinkSubmit("publishcb.aspx");break;case"Rename":showLoadingPopup(n);f=xGetElementById("ipin_rename").value;r=null;e=new CBRequestContextPopup(i,itemId,f,currSortBy,currSortOrder,feedsFlagEdit,u,r);ModifyComplianceServiceCallPopup(n,e,u);break;case"Get":showLoadingPopup(n);f=null;if(r=getNLIC(!0,!1,!0),r=="false")return hideLoadingPopup(),!1;r!=""&&(r="<nlic>"+r+"<\/nlic>",e=new CBRequestContextPopup(i,itemId,f,currSortBy,currSortOrder,feedsFlagEdit,u,r),ModifyComplianceServiceCallPopup(n,e,u))}}function CBCallBackEdit(n){var t=n.ClientContext;switch(t.action){case"ChangeFeeds":hideLoadingPopup();xGetElementById("feeds").innerHTML=n.Text;break;case"Rename":hideRename();hideLoadingPopup();xGetElementById("wsName").innerHTML=t.name;xGetElementById("ipin_rename").value=t.name;break;case"Get":hideLoadingPopup();xGetElementById("headlines").innerHTML=n.Text}}function CBerrCallBackEdit(n){LoadingErrorCallback(n)}function ModifyCompliancePopup(n,t,i,r,u,f){hideDP();var o="Popup",s,e,h,c,l,a;switch(i){case"Get":xGetElementById(popupMainId).style.display="block";xGetElementById(popupMainId).style.zIndex="999";loadingBackWindow(translate("complianceBin"));RepositionElementAtElement(popupLoadId,targetControlIdBriefcase,0,0);currAction=i;currItemId=f;s=null;e=null;h=new CBRequestContextPopup(i,f,s,currSortBy,currSortOrder,feedsFlagEdit,o,e);ModifyComplianceServiceCallPopup(n,h,o);break;case"Create":bProcessingRequest||(loadingTopPopCompliance("createNew"),currAction=i,currItemId=f,s=null,e=null,h=new CBRequestContextPopup(i,f,s,currSortBy,currSortOrder,feedsFlagEdit,o,e),ModifyComplianceServiceCallPopup(n,h,o));break;case"Clone":bProcessingRequest||(loadingTopPopCompliance("clone"),currAction=i,currItemId=f,s=null,e=null,h=new CBRequestContextPopup(i,f,s,currSortBy,currSortOrder,feedsFlagEdit,o,e),ModifyComplianceServiceCallPopup(n,h,o));break;case"Save":if(i=currAction,f=currItemId,s=xGetElementById("ipin").value,e=null,currAction=="Create"){if(c=!1,l=!1,a=!1,e=getNLIC(c,l,a),e=="false")return!1;e!=""&&(e="<nlic>"+e+"<\/nlic>")}h=new CBRequestContextPopup(i,f,s,currSortBy,currSortOrder,feedsFlagEdit,o,e);ModifyComplianceServiceCallPopup(n,h,o);break;case"AddItem":if(acc=null,currAction=i,currItemId=f,s=null,c=!1,l=!1,a=!0,e=getNLIC(c,l,a),e=="false")return!1;e!=""&&(e="<nlic>"+e+"<\/nlic>",document.getElementById("Fader_"+f).innerHTML="<div id='waiting'><img src='../img/fce-ajax-loading.gif'><\/div>",h=new CBRequestContextPopup(i,f,s,currSortBy,currSortOrder,feedsFlagEdit,o,e),ModifyComplianceServiceCallPopup(n,h,o))}}function ModifyComplianceServiceCallPopup(n,t,i){var u,f,r;i=="Popup"?(u=CBCallBackPopup,f=CBerrCallBackPopup):i=="Edit"&&(u=CBCallBackEdit,f=CBerrCallBackEdit);r=new RequestContext("factiva.com.ui.workspace.WorkspaceManageService",t,null,u,f);r.Add("action",t.action);r.Add("workspaceCollectionType","ComplianceBin");t.id&&r.Add("id",t.id);t.name&&r.Add("name",trim(t.name));t.sortBy&&r.Add("sortBy",t.sortBy);t.sortOrder&&r.Add("sortOrder",t.sortOrder);t.feedsFlag&&r.Add("feedsFlag",t.feedsFlag);t.source&&r.Add("source",t.source);t.nlic&&r.Add("mic",t.nlic);r.Send()}function CBCallBackPopup(n){var i=n.ClientContext,t,r;switch(i.action){case"Get":r=xGetElementById(popupMainId);r.style.display="block";r.innerHTML=n.Text;dispalyFaderCB();RegisterCBTableForSorting("cbTable");break;case"AddItem":bProcessingRequest=!1;trim(n.Text)==""||n.Text==null?(faderid=n.ClientContext.id,alert(translate("articlesHasBeenAdded")),ModifyCompliancePopup(null,null,"Get","","","")):(faderid=n.ClientContext.id,alert(n.Text),HideFaderMessageCB(),ClearPopup2());break;case"Create":i.name==null?(t=xGetElementById(gloPopup2),t.innerHTML=n.Text,SetInputFocusInCompliancePopup()):(UnshimPage(),t=xGetElementById(popupMainId),t.style.display="block",t.innerHTML=n.Text,dispalyFaderCB(),RegisterCBTableForSorting("cbTable"));break;case"Clone":if(i.name==null){t=xGetElementById(gloPopup2);t.innerHTML=n.Text;var u=xGetElementById("briefcase_"+i.id),f=xFirstChild(u,"TD"),e=xFirstChild(f,"DIV"),o=xFirstChild(e,"SPAN");xGetElementById("ipin").value=o.innerHTML;SetInputFocusInCompliancePopup()}else UnshimPage(),t=xGetElementById(popupMainId),t.style.display="block",t.innerHTML=n.Text,dispalyFaderCB(),RegisterCBTableForSorting("cbTable")}}function CBerrCallBackPopup(n){var r=document.getElementById(gloPopup3),i;r.className="";var f=n.ClientContext,u=n.Error.Description,t=n.Error&&n.Error.Number?n.Error.Number:"";t=="210729"?alert(translate("selectMoreThanAllowed")):(t=t!=""&&t!=null?t=" ("+t+")":"",alert(u+t));ClearPopup2();i=n.ClientContext;switch(i.action){case"Get":xGetElementById(popupMainId)&&(xGetElementById(popupMainId).style.display="none");TemplateModalDialogBack(!0);break;case"AddItem":case"Create":case"Clone":(i.name="")?(UnshimPage(),bProcessingRequest=!1):(ClearPopup2(),UnshimPage())}}function SetInputFocusInCompliancePopup(){(inputBox=xGetElementById("ipin"))&&inputBox.focus()}function loadingTopPopCompliance(){var n=new String;n=n!=null&&n.length>0?n:translate("complianceBin");CreateTopLoadingDiv(n);PositionTopPopup("ppsbriefcase");ShimPageTop()}function dispalyFaderCB(){try{xGetElementById("Fader_"+faderid).innerHTML=translate("articlesHasBeenAdded");xGetElementById("Fader_"+faderid).className="inlineAddMsg"}catch(n){}xAddEventListener("scrollableNewNL","mousemove",WaitOnFaderMessage,!0);ClearPopup2()}function WaitOnFaderMessageCB(){setTimeout("HideFaderMessage()",5e3)}function HideFaderMessageCB(){faderid!=0&&(xGetElementById("Fader_"+faderid)&&(xGetElementById("Fader_"+faderid).style.display="none"),faderid=0,xRemoveEventListener("scrollableNewNL","mousemove",HideFaderMessage,!1))}function editCompliance(n,t,i){sendStateCB("../Compliance/editcb.aspx",n,t,i,!0)}function manageCompliance(n,t,i){sendStateCB("../Compliance/managecb.aspx",null,t,i,!0)}function deleteHeadlineCB(n,t,i,r){var u=GetLForm(),f=document.getElementById("LinkFormExElem");if(doneURL=xGetElementById("doneURL")?xGetElementById("doneURL").value:gCurrentPageUrl,CreateHiddenField(f,"doneURL",doneURL),CreateHiddenField(f,"sa_from",i),CreateHiddenField(f,"napc",r),isPostProcessing)return!1;u.action=n;try{t&&(typeof t=="string"&&(u._XFORMSTATE.value=t),typeof t=="object"&&(u._XFORMSTATE.value=t._XFORMSTATE.value))}catch(e){}return u.submit(),!1}function sendStateCB(n,t,i,r){var f=GetLForm(),u=document.getElementById("LinkFormExElem");return t!=null&&CreateHiddenField(u,"ipid",t),f.action=n,doneURL=xGetElementById("doneURL")?xGetElementById("doneURL").value:gCurrentPageUrl,CreateHiddenField(u,"doneURL",doneURL),CreateHiddenField(u,"sa_from",i),CreateHiddenField(u,"napc",r),f.submit(),!1}function RegisterCBTableForSorting(){$("table[id='cbTable']").tablesorter({cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortList:[[1,1]],headers:{2:{sorter:!1}},widgets:["zebra"],dateFormat:"d,MM,yy"})}function ShowHintCB(n,t){var i=xGetElementById("feedRadioOn");i&&i!="undefined"?i.checked?hdShowHoverHintsCB(n,t,"feedOnHH","feedOnHiddenHH"):hdShowHoverHintsCB(n,t,"feedOffHH","feedOffHiddenHH"):hdShowHoverHintsCB(n,t,"feedNoneHH","feedNoneHiddenHH")}function HideHintCB(){var n=xGetElementById("feedRadioOn");n&&n!="undefined"?n.checked?hdHideHoverHintsCB("feedOnHH"):hdHideHoverHintsCB("feedOffHH"):hdHideHoverHintsCB("feedNoneHH")}function hdShowHoverHintsCB(n,t,i,r){var u=xGetElementById(i),f=xGetElementById(r),e;u||(e=document.createElement("div"),e.id=i,xAppendChild(xGetElementById("contentWrapper"),e),u=xGetElementById(i),u.innerHTML=f.innerHTML,u.onmouseout=f.onmouseout,u.onmouseover=f.onmouseover,u.className="hoverHint");window.event&&(n=window.event);RepositionPopup(u,n.clientX,n.clientY);xShow(u)}function hdHideHoverHintsCB(n){var t=xGetElementById(n);xHide(t)}function articleCB_click(n,t,i){showViewDropDown(n);article_click(n,t,i)}function showViewDropDownCB(n){var t=n.getAttribute("cat");xDisplay(xGetElementById("sortOrderLabelId"),"none");xDisplay(xGetElementById("ibso"),"none");xGetElementById("hc").value=MapCategoryToChannel(t);t&&(t=="Publications"?(xDisplay(xGetElementById("viewAsLabelId"),""),xDisplay(xGetElementById("dfd"),"")):t=="Pictures"&&(xDisplay(xGetElementById("viewAsLabelId"),"none"),xDisplay(xGetElementById("ipf"),"")))}function returnToHlCB(){hideViewDropDown();xGetElementById("hc").value="_Undefined";returnToHl()}function hideViewDropDownCB(){xDisplay(xGetElementById("sortOrderLabelId"),"");xDisplay(xGetElementById("ibso"),"");xDisplay(xGetElementById("viewAsLabelId"),"none");xDisplay(xGetElementById("dfd"))==""?xDisplay(xGetElementById("dfd"),"none"):xDisplay(xGetElementById("ipf"))==""&&xDisplay(xGetElementById("ipf"),"none")}function wPositionAtClick(n,t,i,r,u){var c=xHeight(xGetElementById("gl-navContainer")),f=t-10,e=n-10,s=f+xHeight(i),h=xScrollTop(null,!0)+xClientHeight(document.body),o;s>h&&(f-=s-h,f=f-u);xTop(i,f-c);o=xWidth(i)+e-xClientWidth(document.body);o>0&&(e-=o);xLeft(i,e)}function IsOpen(n){return n!=null&&n.style!=null&&n.style.display=="none"?!1:!0}function ShowSimplePopup(n,t,i){var r=xGetElementById(t),u,f;return r!=null&&i!=null&&(xDisplay(r,"block"),u=xPageX(i)+xWidth(i)+10,f=xPageY(i)+70,wPositionAtClick(u,f,r,0,0)),!1}function HideSimplePopup(n,t){var i=xGetElementById(t);return i!=null&&xDisplay(i,"none"),!1}function isNullOrEmpty(n){return n==undefined||n==null||n==""||n.length==0}var isDOM=document.getElementById?1:0,isIE=document.all?1:0,isNS4=navigator.appName=="Netscape"&&!isDOM?1:0,isOp=self.opera?1:0,isDyn=isDOM||isIE||isNS4,LayerObj,addEvent,removeEvent,page,feedsFlagEdit;if(self.LayerObj||(LayerObj=new Function("i","p","this.ref=getRef(i, p); this.sty=getSty(i, p); return this")),LyrFn("x","if (!isNaN(p)) sty.left=p+px; else return parseInt(sty.left)"),LyrFn("y","if (!isNaN(p)) sty.top=p+px; else return parseInt(sty.top)"),typeof addEvent!="function"&&(addEvent=function(n,t,i,r){var f="addEventListener",u="on"+t,e=n,o=t,s=i,h=r;if(n[f]&&!r)return n[f](t,i,!1);n._evts||(n._evts={});n._evts[t]||(n._evts[t]=n[u]?{b:n[u]}:{},n[u]=new Function("e",'var r = true, o = this, a = o._evts["'+t+'"], i; for (i in a) {o._f = a[i]; r = o._f(e||window.event) != false && r; o._f = null;} return r'),t!="unload"&&addEvent(window,"unload",function(){removeEvent(e,o,s,h)}));i._i||(i._i=addEvent._i++);n._evts[t][i._i]=i},addEvent._i=1,removeEvent=function(n,t,i,r){var u="removeEventListener";if(n[u]&&!r)return n[u](t,i,!1);n._evts&&n._evts[t]&&i._i&&delete n._evts[t][i._i]}),FSMenu.prototype.show=function(n){this.menuToShow.length=arguments.length;for(var t=0;t<arguments.length;t++)this.menuToShow[t]=arguments[t];clearTimeout(this.mtsTimer);this.nested||(this.mtsTimer=setTimeout(this.myName+".menus.root.over()",10));activePPSMenuId=n},FSMenu.prototype.hide=function(n){clearTimeout(this.mtsTimer);this.menus[n]&&this.menus[n].out();activePPSMenuId=null},FSMenu.prototype.hideAll=function(){for(var n in this.menus)this.menus[n].visible&&!this.menus[n].isRoot&&this.menus[n].hide(!0)},FSMenu.prototype.setHideCallBack=function(n,t){this.fnHideCallBack=t;this.menus[n]&&this.menus[n].setHideCallBack(t)},FSMenuNode.prototype.show=function(n){var i;if(this.lyr&&this.lyr.ref){this.par&&(this.par.child&&this.par.child!=this&&this.par.child.hide(),this.par.child=this);var t=this.args[1],r=this.args[2],u=this.args[3],f=0,e=0,o=""+r!="undefined",s=""+u!="undefined";if(self.page&&t&&(o||s)&&(i=page.elmPos(t,this.par.lyr?this.par.lyr.ref:0),f=i.x,e=i.y,o&&this.lyr.x(f+eval(r)),s&&this.lyr.y(e+eval(u))),t&&this.lightParent(t,1),this.visible=1,this.obj.onshow)this.obj.onshow(id);this.lyr&&this.lyr.ref&&this.lyr.ref.parentNode&&this.lyr.ref.parentNode.style&&(this.lyr.ref.parentNode.style.zIndex="760");this.setVis(1,n)}},FSMenuNode.prototype.hide=function(n){if(this.fnHideCallBack!=null&&setTimeout(this.fnHideCallBack,0),this.lyr&&this.lyr.ref&&this.visible){if(isNS4&&self.isMouseIn&&isMouseIn(this.lyr.ref))return this.show();if(this.args[1]&&this.lightParent(this.args[1],0),this.child&&this.child.hide(),this.par&&this.par.child==this&&(this.par.child=null),this.lyr){if(this.visible=0,this.obj.onhide)this.obj.onhide(this.id);this.lyr&&this.lyr.ref&&this.lyr.ref.parentNode&&this.lyr.ref.parentNode.style&&(this.lyr.ref.parentNode.style.zIndex="3");this.setVis(0,n)}}},FSMenuNode.prototype.lightParent=function(n,t){this.obj.cssLitClass&&!isNS4&&(t?n.className+=(n.className?" ":"")+this.obj.cssLitClass:n.className=n.className.replace(new RegExp("(\\s*"+this.obj.cssLitClass+")+$"),""))},FSMenuNode.prototype.setVis=function(n,t){var r,i;if(!this.lyr.forced||t){if(this.lyr.forced=t,this.lyr.timer=this.lyr.timer||0,this.lyr.counter=this.lyr.counter||0,clearTimeout(this.lyr.timer),n&&!this.lyr.counter&&this.lyr.sty!=null&&(this.lyr.sty[this.obj.cssProp]=this.obj.cssVis),r=n?this.obj.animInSpeed:this.obj.animOutSpeed,isDOM&&r<1)for(i=0;i<this.obj.animations.length;i++)this.obj.animations[i](this.lyr.ref,this.lyr.counter,n);this.lyr.counter+=r*(n?1:-1);this.lyr.counter>1?(this.lyr.counter=1,this.lyr.forced=!1):this.lyr.counter<0?(this.lyr.counter=0,this.lyr.sty&&(this.lyr.sty[this.obj.cssProp]=this.obj.cssHid),this.lyr.forced=!1):isDOM&&(this.lyr.timer=setTimeout(this.obj.myName+'.menus["'+this.id+'"].setVis('+n+","+t+")",50))}},FSMenuNode.prototype.setHideCallBack=function(n){this.fnHideCallBack=n},FSMenu.animSwipeDown=function(n,t,i){i&&t==0&&(n.style&&(n._fsm_styMT=n.style.marginTop),n._fsm_curMT=parseInt(n.currentStyle?n.currentStyle.marginTop:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(n,null).getPropertyValue("marginTop"):0));var u=Math.pow(Math.sin(Math.PI*t/2),.75),r=n.offsetHeight*(1-u);n.style&&(n.style.clip=t==1?window.opera||navigator.userAgent.indexOf("KHTML")>-1?"":"rect(auto, auto, auto, auto)":"rect("+r+"px, "+n.offsetWidth+"px, "+n.offsetHeight+"px, 0)");t==1||t<.01&&!i?n._fsm_styMT&&n.style?n.style.marginTop=n._fsm_styMT:n.style&&n.style.removeProperty?n.style.removeProperty("margin-top",!0):n.style&&n.style.cssText&&(n.style.cssText=n.style.cssText.replace(/MARGIN-TOP:[^;]*;\s*/i,"")):n.style&&(n.style.marginTop=0-r+(n._fsm_curMT||0)+"px")},FSMenu.animFade=function(n,t){var r=t==1,i;n.filters?(i=r?"":" alpha(opacity="+parseInt(t*100)+")",n.style.filter.indexOf("alpha")==-1?n.style.filter+=i:n.style.filter=n.style.filter.replace(/\s*alpha\([^\)]*\)/i,i)):n.style&&(n.style.opacity=n.style.MozOpacity=t/1.001)},FSMenu.animClipDown=function(n,t){var i=Math.pow(Math.sin(Math.PI*t/2),.75);n.style.clip=t==1?window.opera||navigator.userAgent.indexOf("KHTML")>-1?"":"rect(auto, auto, auto, auto)":"rect(0, "+n.offsetWidth+"px, "+n.offsetHeight*i+"px, 0)"},FSMenu.prototype.activateMenu=function(n,t){var s,o,f,c;if(isDOM&&document.documentElement){s=getRef("fsmenu-fallback");s&&(s.rel="alternate stylesheet",s.disabled=!0);for(var r,h,i,e,l=getRef(n),b=1,a=l.getElementsByTagName("ul"),u=0;u<a.length;u++){for(i=h=a[u];i;){if(i.nodeName.toLowerCase()=="li")break;i=i.parentNode}if(i){for(e=i;e;){if(e.nodeName.toLowerCase()=="ul")break;e=e.parentNode}for(r=null,o=0;o<i.childNodes.length;o++)i.childNodes[o].nodeName.toLowerCase()=="a"&&(r=i.childNodes[o]);if(r){f=this.myName+"-id-"+b++;h.id?f=h.id:h.setAttribute("id",f);var v=this.showOnClick==1&&i.parentNode==l||this.showOnClick==2,y=navigator.userAgent.indexOf("Safari")>-1||isOp?"safRtnVal":"returnValue",p=new Function("with ("+this.myName+') { var m = menus["'+f+'"], pM = menus["'+e.id+'"];'+(v?"if ((pM && pM.child) || (m && m.visible))":"")+' show("'+f+'", this) }'),w=new Function("e","if (e."+y+" != false) "+this.myName+'.hide("'+f+'")');addEvent(r,"click",p);addEvent(r,"focus",p);addEvent(r,"mouseout",w);addEvent(r,"blur",w);v&&addEvent(r,"click",new Function("e",this.myName+'.show("'+f+'", this); if (e.cancelable && e.preventDefault) e.preventDefault(); e.'+y+" = false; return false"));t&&r.insertBefore(t.cloneNode(!0),r.firstChild)}}}if(isIE&&!isOp)for(c=l.getElementsByTagName("a"),u=0;u<c.length;u++)addEvent(c[u],"focus",new Function("e","var node = this.parentNode; while(node) { if (node.onfocus) node.onfocus(e); node = node.parentNode }")),addEvent(c[u],"blur",new Function("e","var node = this.parentNode; while(node) { if (node.onblur) node.onblur(e); node = node.parentNode }"));this.menus[n]=new FSMenuNode(n,!0,this)}},page={win:self,minW:0,minH:0,MS:isIE&&!isOp,db:document.compatMode&&document.compatMode.indexOf("CSS")>-1?"documentElement":"body"},page.elmPos=function(n,t){var i=0,r=0,u=t?t:this.win;if(n=n?n.substr?isNS4?u.document.anchors[n]:getRef(n,u):n:t,isNS4&&(n&&n!=t&&(i=n.x,r=n.y),t&&(i+=t.pageX,r+=t.pageY)),n&&this.MS&&navigator.platform.indexOf("Mac")>-1&&n.tagName=="A")n.onfocus=new Function("with(event){self.tmpX=clientX-offsetX;self.tmpY=clientY-offsetY}"),n.focus(),i=tmpX,r=tmpY,n.blur();else while(n)i+=n.offsetLeft,r+=n.offsetTop,n=n.offsetParent;return{x:i,y:r}},isNS4){var fsmMouseX,fsmMouseY,fsmOR=self.onresize,nsWinW=innerWidth,nsWinH=innerHeight;document.fsmMM=document.onmousemove;self.onresize=function(){fsmOR&&fsmOR();(nsWinW!=innerWidth||nsWinH!=innerHeight)&&location.reload()};document.captureEvents(Event.MOUSEMOVE);document.onmousemove=function(n){return fsmMouseX=n.pageX,fsmMouseY=n.pageY,document.fsmMM?document.fsmMM(n):document.routeEvent(n)};function isMouseIn(n){return fsmMouseX>n.left&&fsmMouseX<n.left+n.clip.width&&fsmMouseY>n.top&&fsmMouseY<n.top+n.clip.height}}var faderid=0,currSortBy=null,currSortOrder=null,currAction=null,currItemId=null;feedsFlagEdit=null;
