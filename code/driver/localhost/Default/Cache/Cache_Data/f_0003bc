function IsAllSourceType(n){return"P|W|I|M|B|O|T|".indexOf(n.toUpperCase())>-1?!1:!0}function selun(n){var r=$(n).closest("div"),t=$(r).attr("id"),i=jQuery.grep(CompanyListManager.selectedItems,function(n){return n.id.toLowerCase()==t.toLowerCase()});i.length>0?($(n).removeClass("mnuItmInc"),$(n).addClass("lf"),CompanyListManager.selectedItems=jQuery.grep(CompanyListManager.selectedItems,function(n){return n.id.toLowerCase()!=t.toLowerCase()})):($(n).addClass("mnuItmInc"),$(n).removeClass("lf"),i={id:t,name:$(n).text()},CompanyListManager.selectedItems.push(i));CompanyListManager.renderPills()}function source_autosuggestItm_click(n){var t=getJSONObject(n),i=GetSourceTypeX(n.type);mnuItemClickedEdit(n.code,n.formalName,t,i)}function mnuItm_clickEdit(n,t){var i;if(t=="sc_A|")return!1;i=$(n).attr("code");code=i.split("_")[2];var r=i.split("_")[1],u=$(n).contents().filter(function(){return this.nodeType==3}).text();timeout=window.setTimeout(function(){mnuItemClickedEdit(code,u,t,r)},200);dClick=0}function mnuItemClickedEdit(n,t,i,r){MLManager.isSelectedSourceItem(n)?MLManager.removeSourceItem(n):(objItem=new MLManager.sourceItem,objItem.id=n,dClick==1?(dClick=0,objItem.bool="not"):objItem.bool="or",objItem.value=i,objItem.desc=t,objItem.state="new",objItem.type=r,MLManager.addSourceItem(objItem));MLManager.renderSourcePills()}function mnuItm_excludeItemEdit(n,t,i){var u=t.split("_")[2],f=t.split("_")[1],e=u.toLowerCase(),r;if(MLManager.isSelectedSourceItem(u))for(r=0,r=0;r<MLManager.selectedSources.length;r++)e.indexOf(MLManager.selectedSources[r].id.toLowerCase())>=0&&(MLManager.selectedSources[r].bool="not");else objItem=new MLManager.sourceItem,objItem.id=u,objItem.bool="not",objItem.value=n,objItem.desc=unescape(i),objItem.state="new",objItem.type=f,MLManager.addSourceItem(objItem);MLManager.renderSourcePills()}function excludeItemEdit(n,t){var u=$($(n.parentNode).find("a")[0]).attr("code"),r=u.split("_")[2],e=u.split("_")[1],o=r.toLowerCase(),i,f;if(MLManager.isSelectedSourceItem(r))for(i=0,i=0;i<MLManager.selectedSources.length;i++)o.indexOf(MLManager.selectedSources[i].id.toLowerCase())>=0&&(MLManager.selectedSources[i].bool="not");else f=document.all?$(n.parentNode).find("a")[0].innerText:$(n.parentNode).find("a")[0].textContent,objItem=new MLManager.sourceItem,objItem.id=r,objItem.bool="not",objItem.value=t,objItem.desc=f,objItem.state="new",objItem.type=e,MLManager.addSourceItem(objItem);MLManager.renderSourcePills()}function mnuItm_dblClickEdit(){dClick=1;xUA.indexOf("msie")==-1&&clearTimeout(timeout);return}function GetTranslateSourceType(n){var t="";switch(n){case"p":t="<span class='source-type publications'>"+translate("publication")+"<\/span>";break;case"w":t="<span class='source-type websites'>"+translate("webSite")+"<\/span>";break;case"i":t="<span class='source-type pictures'>"+translate("picture")+"<\/span>";break;case"m":t="<span class='source-type multimedia'>"+translate("multimedia")+"<\/span>";break;case"b":t="<span class='source-type blogs'>"+translate("Blogs")+"<\/span>";break;case"o":t="<span class='source-type blogs'>"+translate("boards")+"<\/span>";break;case"t":t="<span class='source-type internal'>"+translate("internal")+"<\/span>"}return t}function GetTranslateSourceValueType(n){var t="";switch(n){case"p":t=translate("allPublications");break;case"w":t=translate("allWebSites");break;case"i":t=translate("allPictures");break;case"m":t=translate("allMultimedia");break;case"b":t=translate("allBlogs");break;case"o":t=translate("allBoards");break;case"t":t=translate("allCustDocs");break;case"u":t=translate("allSources")}return t}function GetSourceStr(n){var t;switch(n){case"p":t=translate("publication")+": "+translate("allPublications");break;case"w":t=translate("webSite")+": "+translate("allWebSites");break;case"i":t=translate("picture")+": "+translate("allPictures");break;case"m":t=translate("multimedia")+": "+translate("allMultimedia");break;case"b":t=translate("Blogs")+": "+translate("allBlogs");break;case"o":t=translate("boards")+": "+translate("allBoards");break;case"t":t=translate("internal")+": "+translate("allCustDocs")}return t}function IsSourceVariables(n){switch(n){case translate("publication")+": "+translate("allPublications"):return!0;case translate("webSite")+": "+translate("allWebSites"):return!0;case translate("picture")+": "+translate("allPictures"):return!0;case translate("multimedia")+": "+translate("allMultimedia"):return!0;case translate("Blogs")+": "+translate("allBlogs"):return!0;case translate("boards")+": "+translate("allBoards"):return!0;case translate("internal")+": "+translate("allCustDocs"):return!0}return!1}function GetTranslateSourceText(n){var t;switch(n){case"p":t="Publication";break;case"w":t="WebSite";break;case"i":t="Picture";break;case"m":t="Multimedia";break;case"b":t="Blog";break;case"o":t="Board";break;case"t":t="CustDoc"}return t}function GetSourceTypeLST(n){var t;switch(n){case 1:t="p";break;case 3:t="w";break;case 2:t="i";break;case 5:t="m";break;case 6:t="b";break;case 7:t="o";break;case 8:t="t";break;case 0:t="u"}return t}function GetSourceTypeX(n){var t;switch(n){case"publication":t="p";break;case"website":t="w";break;case"multimedia":t="m";break;case"picture":t="i";break;case"Unknown":t="u";break;default:t="p"}return t}function GetSourceDesc(n){if(n!=null)switch(n.toUpperCase()){case"P|":return translate("allPublications");case"W|":return translate("allWebSites");case"I|":return translate("allPictures");case"M|":return translate("allMultimedia")}return null}function srcCat_onchangeOverlay(n){var t=document.getElementById("ml_sc_list");if(n.options[n.selectedIndex].value=="1")return!1;t.innerHTML='<div class="mnuMsg">'+translate("loading")+"...<\/div>";doXmlHttpOverLay(n.options[n.selectedIndex].value,t)}function IsExcludeSourcesCheckboxSelected(){var n=!0;return $("#ml_sc_editoverlay").length?n=$("#ml_sc_editoverlay #ml_sc_excDiscSrcs").is(":checked"):$("#ml_sc_createoverlay").length?n=$("#ml_sc_createoverlay #ml_sc_excDiscSrcs").is(":checked"):$("#ml_sc_overlay").length&&(n=$("#ml_sc_overlay #ml_sc_excDiscSrcs").is(":checked")),n?"1":"0"}function doXmlHttpOverLay(n,t){var u=GetBForm(),r="_XFORMSESSSTATE="+u.elements._XFORMSESSSTATE.value.replace(/\+/g,"%2b").replace(/\=/g,"%3d"),i;$("[name=xsrftoken]",u).length>0&&(r+="&xsrftoken="+$("[name=xsrftoken]",u).val().replace(/\+/g,"%2b").replace(/\=/g,"%3d"));r+="&hideInfo="+bHideInfo;r+="&grpOnly="+bGroupOnly;r+="&excDiscSrcs="+IsExcludeSourcesCheckboxSelected();r+="&showFii="+bShowFii+"&"+n+"&";r+="&requestFrom=ml";i=getXmlHttp();i.open("POST","../sb/sbservice.aspx",!0);i.setRequestHeader("Content-Type","application/x-www-form-urlencoded;");i.onreadystatechange=function(){if(i.readyState==4&&i.responseText)if(i.responseText.charAt(0)!="<")eval(i.responseText);else{t.id=="scMnu"&&xUA.indexOf("msie")!=-1&&setTimeout("ForceToRerenderOverLay('"+t.id+"');",200);var n=i.responseText,r=n.replace(/mnuItm_click/g,"mnuItm_clickEdit"),u=r.replace(/mnuItm_dblClick/g,"mnuItm_dblClickEdit"),f=u.replace(/mnuBtn_click/g,"mnuBtn_clickEdit"),e=f.replace(/alpha_click/g,"alpha_clickEdit"),o=e.replace(/excludeItem/g,"mnuItm_excludeItemEdit");t.innerHTML=o;setMnuItmDsply(t);MLManager.setMnuItemDsplyML("#ml_sc_list")}};i.send(r)}function ForceToRerenderOverLay(n){var t=document.getElementById(n),i=document.createElement("DIV");return t&&t.appendChild(i),!1}function mnuBtn_clickEdit(n,t){var r=$(n),i=r.siblings("div"),u=r.find("span");n.className=="mnuBtn"?(u.html("-"),n.className="mnuBtnOpen",i.show(),i.find("ul").length===0&&(i.html('<div class="mnuMsg">'+translate("loading")+"...<\/div>"),doXmlHttpOverLay(t,i[0]))):(u.html("+"),n.className="mnuBtn",i.hide())}function alpha_clickEdit(n,t){var u,r,i,f;if(n.className!="alphaItmOn"){for(u=xParent(n,!0),r=xGetElementsByTagName("A",u),i=0;i<r.length;i++)r[i].className=r[i]==n?"alphaItmOn":"";f=xNextSib(u,"DIV");f.innerHTML='<div class="mnuMsg">'+translate("loading")+"...<\/div>";doXmlHttpOverLay(t,f)}}function ajxlookupLs(){var t,r,n;if(validateLookupLs(xGetElementById("ml_co_searchlist"))){var u=xGetElementById("ml_co_searchlist").value,f="",i="",i=xGetElementById("ml_co_searchnameonly"),f=i.options[i.selectedIndex].value;LOADING_HTML='<div class="mnuMsg">'+translate("runningQueryPhrase")+"...<\/div>";t="";t="factiva.com.ui.cl.Services.CompanyListLookupService";r=null;n=new RequestContext(t,null,r,CallBackFunctionLs,MLManager.handleError);n.Add("query",u);n.Add("scheme",f);n.Add("iit","");$("#ml_co_overlay #ml_co_list").html(LOADING_HTML);n.Send()}return!1}function CallBackFunctionLs(n){if(isEmptyRespTextLs(n)||n.Text.indexOf("callback131014")!=-1)return MLManager.handleError(n),!1;var t=n.Text;return $("#ml_co_overlay #ml_co_list").html(t),MLManager.setMnuItemDsplyMLCo("#ml_co_list","T"),!1}function isEmptyRespTextLs(n){var t=n;switch(t){case null:case"":case"undefined":return!0;default:if(isemptyLs(n.Text))return!0}return!1}function validateLookupLs(n){if(n==null||n=="undefined")return!1;var t=n.value;return isemptyLs(t)?(alert(translate("noSearchStrMsg")),n.focus(),!1):!0}function isemptyLs(n){switch(n){case null:case"":case"":case"undefined":return!0;default:return!1}}function parseJSON(n){var t;try{t=$.parseJSON(n)}catch(i){alert(n);t=null}return t}var DJFLjsLibrary={},g_dj_fl_jsLib_1_0_pillsManager,_MslService,_ClService,MLManager,timeout,dClick;DJFLjsLibrary.Framework={};DJFLjsLibrary.Framework.pillsManager=function(){this.version="1.0";this.type="pillsManager";this.AT_SIGN="@";this.DJ_DOMAIN="dowjones.com";this.AT_DJ_DOT_COM="ATDJDOTCOM";this.AT_SIGN+this.DJ_DOMAIN;this.PageKey_SmokeTest="SmokeTest";this.FetchingCompanies="fetchingCompanies";this.RenamingList="renamingList";this.FetchingSources="fetchingSources";this.FetchingIndustries="fetchingIndustries";this.FetchingSubjects="fetchingSubjects";this.FetchingRegions="fetchingRegions";this.FetchingAuthors="fetchingAuthors";this.FetchingExecutives="fetchingExecutives";this.PlsSelectList="plsSelectList";this.DeletingList="deletingList";this.LstDeletedSuccess="lstDeletedSuccess";this.CreatingList="creatingList";this.LstCreatedSuccess="lstCreatedSuccess";this.PlsTryAgLater="plsTryAgLater";this.LstRenameSuccess="lstRenamedSuccess";this.AddToList="addToList";this.AddToListSuccess="addToListSuccess";this.ConfirmDeleteItem="confirmDeleteItem";this.MaxNumReached="errorForUser131063";this.SvstrListTitle=""};DJFLjsLibrary.Framework.pillsManager.prototype={listItemDTO:null,listViewDTO:null,contextMnuSelected:!1,deleteList:!1,displayMain:function(n){g_dj_fl_jsLib_1_0_pillsManager.initHtmlMain(n);$("#"+n+"overlay").overlay({background:!0,closeOnEsc:!0});g_dj_fl_jsLib_1_0_pillsManager.fetchListService(n)},initHtmlMain:function(n){switch(n){case"co":DJOmniture.logCompanyList();break;case"sc":DJOmniture.logSourceList();break;case"au":DJOmniture.logAuthorList("SB_SaveList_Author","Fact_RT_List_CreateEditauthorlist")}if($("#"+n+"overlay").length==0){var t=[];t[t.length]='<div id="'+n+'overlay" class="overlaycontainer">';t[t.length]='    <div class="overlayclose" onclick="$().overlay.hide(\'#'+n+"overlay');\"><\/div>";switch(n){case"co":t[t.length]='    <div class="overlayheader">'+translate("companyListEditor")+"<\/div>";break;case"sc":t[t.length]='    <div class="overlayheader">'+translate("srcListEditor")+"<\/div>";break;case"au":t[t.length]='    <div class="overlayheader">'+translate("authorListEditor")+"<\/div>";break;case"in":t[t.length]='    <div class="overlayheader">'+translate("industryListEditor")+"<\/div>";break;case"pe":t[t.length]='    <div class="overlayheader">'+translate("executiveListEditor")+"<\/div>";break;case"ns":t[t.length]='    <div class="overlayheader">'+translate("subjectListEditor")+"<\/div>";break;case"re":t[t.length]='    <div class="overlayheader">'+translate("regionListEditor")+"<\/div>"}t[t.length]='    <div class="overlaybody">';t[t.length]="        <div>";t[t.length]='            <table border="0" class="overlaytable">';t[t.length]="                <tr>";t[t.length]='                    <td><input type="radio" name="'+n+'radiolist" id="'+n+'radioaddtolist" checked="checked"/><\/td>';t[t.length]='                    <td class="overlaytitle">'+translate("addToList")+"<\/td>";t[t.length]='                    <td><select class="overlayselect overlay-author-list" id="'+n+'select"><\/select><\/td>';t[t.length]='                    <td><div class="overlaylink overlaylinkdisable" id="'+n+'renamelist">'+translate("rename")+"<\/div><\/td>";t[t.length]='                    <td align="center">|<\/td>';t[t.length]='                    <td><div class="overlaylink overlaylinkdisable" id="'+n+'deletelist">'+translate("delete")+"<\/div><\/td>";t[t.length]="                <\/tr>";t[t.length]="                <tr>";t[t.length]='                    <td><input type="radio" name="'+n+'radiolist" id="'+n+'radiocreatelist" /><\/td>';t[t.length]='                    <td class="overlaytitle">'+translate("createNewList")+"<\/td>";t[t.length]='                    <td colspan="4"><input type="text" maxlength = "25" class="overlaycreatelist" id="'+n+'createlist" /><\/td>';t[t.length]="                <\/tr>";t[t.length]="                <tr>";t[t.length]='                    <td colspan="2"><\/td>';t[t.length]='                    <td colspan="4" style="display:'+(n!="au"&&FactivaGlobal.isAdmin?"block":"none")+';"><input type="checkbox" disabled="disabled" class="overlaycreatelistgroup" id="'+n+'createlistgroup" />'+translate("groupItem")+"<\/td>";t[t.length]="                <\/tr>";t[t.length]="            <\/table>";t[t.length]="        <\/div>";t[t.length]='        <div><div class="overlayline"><\/div><\/div>';switch(n){case"co":t[t.length]='        <div style="padding-bottom:5px;">'+translate("addSelectedCompanies")+"<\/div>";break;case"sc":t[t.length]='        <div style="padding-bottom:5px;">'+translate("addSelectedSources")+"<\/div>";break;case"au":t[t.length]='        <div style="padding-bottom:5px;">'+translate("addSelectedAuthors")+"<\/div>";break;case"in":t[t.length]='        <div style="padding-bottom:5px;"> * '+translate("addSelectedIndustries")+"<\/div>";break;case"ns":t[t.length]='        <div style="padding-bottom:5px;"> * '+translate("addSelectedSubjects")+"<\/div>";break;case"re":t[t.length]='        <div style="padding-bottom:5px;"> * '+translate("addSelectedRegions")+"<\/div>"}t[t.length]='        <div class="overlaylist" id="'+n+(n=="au"?"author":"company")+'list"><\/div>';t[t.length]="    <\/div>";switch(n){case"in":t[t.length]='<div class="overlayBoolMessage"> * '+translate("industryBoolMessage")+"<\/div>";break;case"ns":t[t.length]='<div class="overlayBoolMessage"> * '+translate("subjectBoolMessage")+"<\/div>";break;case"re":t[t.length]='<div class="overlayBoolMessage"> * '+translate("regionBoolMessage")+"<\/div>"}t[t.length]='    <div class="overlayfooter">';t[t.length]='        <UL class=buttons><LI class=btn><DIV class="prettyBtn primaryBtn" id="'+n+'savelist"><SPAN>'+translate("save")+"<\/SPAN><\/DIV><\/LI>";t[t.length]='        <LI class=btn><DIV class="prettyBtn secondaryBtn" onclick="$().overlay.hide(\'#'+n+"overlay');\"><SPAN>"+translate("cancel")+"<\/SPAN><\/DIV><\/LI><\/UL>";t[t.length]="    <\/div>";t[t.length]="<\/div>";$(document.body).append(t.join(""));navigator.userAgent.toLowerCase().indexOf("msie")>-1||($("#"+n+"overlay").parent().css("width","auto"),$("#"+n+"overlay").css("width","auto"),$("#"+n+"overlay").find(".overlaylist").css("width","600px"));$("#"+n+"overlay").draggable({handle:".overlayheader"});($.browser.msie7||$.browser.msie8||$.browser.msie9)&&$("#"+n+"overlay").css({width:"675px"});$("#"+n+"renamelist").click(function(){$("#"+n+"renamelist").hasClass("overlaylinkdisable")||g_dj_fl_jsLib_1_0_pillsManager.renameList(n)});$("#"+n+"deletelist").click(function(){$("#"+n+"renamelist").hasClass("overlaylinkdisable")||g_dj_fl_jsLib_1_0_pillsManager.removeList(n)});$("#"+n+"savelist").click(function(){if($('input[name="'+n+'radiolist"]:checked').attr("id")==n+"radiocreatelist")if($("#"+n+"createlist").val().length>0){if(hasIllegalChar2($("#"+n+"createlist").val()))return alert(translate("illegalChar-1")+" (<, >, &, #, \\, %, +, |, ~) "+translate("illegalChar-2")),!1;g_dj_fl_jsLib_1_0_pillsManager.createList(n)}else alert(translate("enterNewName")),$("#"+n+"createlist").focus();else if(itmMngr[n].itmArr.length>0)g_dj_fl_jsLib_1_0_pillsManager.addToList(n);else switch(n){case"sc":alert(translate("mustSelectSourceItems"));break;case"au":alert(translate("mustSelectAuthorItems"));break;case"in":alert(translate("mustSelectIndustryItems"));break;case"re":alert(translate("mustSelectRegionItems"));break;case"ns":alert(translate("mustSelectSubjectItems"));break;default:alert(translate("mustSelectCompanyItems"))}});$("#"+n+"select").change(function(){$("#"+n+"select option:selected").val()=="0"?$("#"+n+"renamelist").hasClass("overlaylinkdisable")||($("#"+n+"renamelist").toggleClass("overlaylinkdisable"),$("#"+n+"deletelist").toggleClass("overlaylinkdisable")):$("#"+n+"renamelist").hasClass("overlaylinkdisable")&&($("#"+n+"renamelist").toggleClass("overlaylinkdisable"),$("#"+n+"deletelist").toggleClass("overlaylinkdisable"),$("#"+n+"radioaddtolist").attr("checked",!0))});$("#"+n+"createlist").keyup(function(){$("#"+n+"createlist").val().trim().length==0?($("#"+n+"createlistgroup").attr("disabled",!0),$("#"+n+"createlistgroup").attr("checked",!1)):$("#"+n+"createlistgroup").removeAttr("disabled")});$("#"+n+"createlist").focus(function(){$("#"+n+"radiocreatelist").attr("checked",!0);$("#"+n+"createlist").trigger("keyup")});$("#"+n+"radioaddtolist").click(function(){$("#"+n+"createlistgroup").attr("disabled",!0)});$("#"+n+"radiocreatelist").click(function(){$("#"+n+"createlistgroup").removeAttr("disabled");$("#"+n+"createlist").trigger("keyup")});$("#"+n+"overlay .btn").hover(function(){$(this).toggleClass("over")})}else $("#"+n+"renamelist").hasClass("overlaylinkdisable")||$("#"+n+"renamelist").toggleClass("overlaylinkdisable"),$("#"+n+"deletelist").hasClass("overlaylinkdisable")||$("#"+n+"deletelist").toggleClass("overlaylinkdisable");g_dj_fl_jsLib_1_0_pillsManager.renderItems("#"+n+(n=="au"?"author":"company")+"list",!0)},renderItemsIntoNewPanel:function(n,t){g_dj_fl_jsLib_1_0_pillsManager.renderItems(t);t=="co"?bCoLists&&itmMngr.co.itmArr.length>0&&itmMngr.cl.itmArr.length==0&&n==""&&$("#coLst ul").append('<li><a href="javascript:void(0)" onclick="saveList_click(\'co\');return false" class="saveLnk">'+translate("createNewCompanyList")+"<\/a><li>"):t=="sc"?bSrcLists&&itmMngr.sc.itmArr.length>0&&itmMngr.sl.itmArr.length==0&&$("#scLst ul").append('<li><a href="javascript:void(0)" onclick="saveList_click(\'sc\');return false" class="saveLnk">'+translate("createNewSourceList")+"<\/a><li>"):t=="au"?bAuHasListsUserAccess&&itmMngr.au.itmArr.length>0&&itmMngr.al.itmArr.length==0&&n==""&&$("#auLst ul").append('<li><a href="javascript:void(0)" onclick="saveList_click(\'au\');return false" class="saveLnk">'+translate("createNewAuthorList")+"<\/a><li>"):t=="in"?bInList&&itmMngr[t].itmArr.length>0&&itmMngr.il.itmArr.length==0&&$("#inLst ul").append('<li><a href="javascript:void(0)" onclick="saveList_click(\'in\');return false" class="saveLnk">'+translate("createNewIndustryList")+"<\/a><li>"):t=="ns"?bNSList&&itmMngr.ns.itmArr.length>0&&itmMngr.nl.itmArr.length==0&&$("#nsLst ul").append('<li><a href="javascript:void(0)" onclick="saveList_click(\'ns\');return false" class="saveLnk">'+translate("createNewSubjectList")+"<\/a><li>"):t=="re"?bReList&&itmMngr.re.itmArr.length>0&&itmMngr.rl.itmArr.length==0&&$("#reLst ul").append('<li><a href="javascript:void(0)" onclick="saveList_click(\'re\');return false" class="saveLnk">'+translate("createNewRegionList")+"<\/a><li>"):t=="pe"&&bPeList&&itmMngr.pe.itmArr.length>0&&itmMngr.pl.itmArr.length==0&&$("#peLst ul").append('<li><a href="javascript:void(0)" onclick="saveList_click(\'pe\');return false" class="saveLnk">'+translate("createNewExecutiveList")+"<\/a><li>");g_dj_fl_jsLib_1_0_pillsManager.renderContextMenu("#"+t+"Lst")},renderItems:function(n,t){function it(t){switch(n){case"co":i[i.length]='            <div class="filterPillWrap" sequence="'+f+'" mode="or" id="'+t.id+"\"  onclick=\"lstItm_click('co', '"+t.id+"');g_dj_fl_jsLib_1_0_pillsManager.renderItems('#cocompanylist',true);\" >";i[i.length]='                <div class="pillNoMenu" style="cursor: pointer">';i[i.length]='                    <span companyid="'+t.id+'" class="filterText">'+t.desc+"<\/span>";i[i.length]="                <\/div>";i[i.length]="            <\/div>";break;case"au":i[i.length]='            <div class="filterPillWrap" sequence="'+f+'" mode="or" id="'+t.id+"\"  onclick=\"lstItm_click('au', '"+t.id+"');g_dj_fl_jsLib_1_0_pillsManager.renderItems('#auauthorlist',true);\" >";i[i.length]='                <div class="pillNoMenu" style="cursor: pointer">';i[i.length]='                    <span authorid="'+t.id+'" class="filterText">'+r.desc+"<\/span>";i[i.length]="                <\/div>";i[i.length]="            <\/div>";break;case"in":i[i.length]='            <div class="filterPillWrap" sequence="'+f+'" mode="or" id="'+r.id+"\"  onclick=\"lstItm_click('in', '"+t.id+"');g_dj_fl_jsLib_1_0_pillsManager.renderItems('#incompanylist',true);\" >";i[i.length]='                <div class="pillNoMenu" style="cursor: pointer">';i[i.length]='                    <span industryid="'+r.id+'" class="filterText">'+r.desc+"<\/span>";i[i.length]="                <\/div>";i[i.length]="            <\/div>";break;case"ns":i[i.length]='            <div class="filterPillWrap" sequence="'+f+'" mode="or" id="'+t.id+"\"  onclick=\"lstItm_click('ns', '"+t.id+"');g_dj_fl_jsLib_1_0_pillsManager.renderItems('#nscompanylist',true);\" >";i[i.length]='                <div class="pillNoMenu" style="cursor: pointer">';i[i.length]='                    <span subjectid="'+t.id+'" class="filterText">'+t.desc+"<\/span>";i[i.length]="                <\/div>";i[i.length]="            <\/div>";break;case"re":i[i.length]='            <div class="filterPillWrap" sequence="'+f+'" mode="or" id="'+t.id+"\"  onclick=\"lstItm_click('re', '"+t.id+"');g_dj_fl_jsLib_1_0_pillsManager.renderItems('#recompanylist',true);\" >";i[i.length]='                <div class="pillNoMenu" style="cursor: pointer">';i[i.length]='                    <span regionid="'+t.id+'" class="filterText">'+t.desc+"<\/span>";i[i.length]="                <\/div>";i[i.length]="            <\/div>";break;case"pe":i[i.length]='            <div class="filterPillWrap" sequence="'+f+'" mode="or" id="'+t.id+"\"  onclick=\"lstItm_click('re', '"+t.id+"');g_dj_fl_jsLib_1_0_pillsManager.renderItems('#pecompanylist',true);\" >";i[i.length]='                <div class="pillNoMenu" style="cursor: pointer">';i[i.length]='                    <span executiveid="'+t.id+'" class="filterText">'+t.desc+"<\/span>";i[i.length]="                <\/div>";i[i.length]="            <\/div>"}}var i=[],h=!1,f=0,c,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,a,v,y,p,w,b,pt,wt,bt,kt,dt,gt,k,d,oi,si,hi,ci,li,ai,nt,g,l,u,r,tt;n.indexOf("#")!=-1&&(c=n,n=c.substring(1,3));var s=null,e=null,o=null;switch(n){case"fes":s=jQuery.grep(itmMngr[n].itmArr,function(n){return n.bool.toLowerCase()=="and"});break;case"in":rt=jQuery.grep(itmMngr["in"].itmArr,function(n){return n.bool.toLowerCase()=="or"});ut=jQuery.grep(itmMngr.il.itmArr,function(n){return n.bool.toLowerCase()=="or"});e=jQuery.merge(rt,ut);ft=jQuery.grep(itmMngr["in"].itmArr,function(n){return n.bool.toLowerCase()=="and"});et=jQuery.grep(itmMngr.il.itmArr,function(n){return n.bool.toLowerCase()=="and"});s=jQuery.merge(ft,et);ot=jQuery.grep(itmMngr["in"].itmArr,function(n){return n.bool.toLowerCase()=="not"});st=jQuery.grep(itmMngr.il.itmArr,function(n){return n.bool.toLowerCase()=="not"});o=jQuery.merge(ot,st);break;case"ns":ht=jQuery.grep(itmMngr.ns.itmArr,function(n){return n.bool.toLowerCase()=="or"});ct=jQuery.grep(itmMngr.nl.itmArr,function(n){return n.bool.toLowerCase()=="or"});e=jQuery.merge(ht,ct);lt=jQuery.grep(itmMngr.ns.itmArr,function(n){return n.bool.toLowerCase()=="and"});at=jQuery.grep(itmMngr.nl.itmArr,function(n){return n.bool.toLowerCase()=="and"});s=jQuery.merge(lt,at);vt=jQuery.grep(itmMngr.ns.itmArr,function(n){return n.bool.toLowerCase()=="not"});yt=jQuery.grep(itmMngr.nl.itmArr,function(n){return n.bool.toLowerCase()=="not"});o=jQuery.merge(vt,yt);break;case"re":a=jQuery.grep(itmMngr.re.itmArr,function(n){return n.bool.toLowerCase()=="or"});v=jQuery.grep(itmMngr.rl.itmArr,function(n){return n.bool.toLowerCase()=="or"});e=jQuery.merge(a,v);y=jQuery.grep(itmMngr.re.itmArr,function(n){return n.bool.toLowerCase()=="and"});p=jQuery.grep(itmMngr.rl.itmArr,function(n){return n.bool.toLowerCase()=="and"});s=jQuery.merge(y,p);w=jQuery.grep(itmMngr.re.itmArr,function(n){return n.bool.toLowerCase()=="not"});b=jQuery.grep(itmMngr.rl.itmArr,function(n){return n.bool.toLowerCase()=="not"});o=jQuery.merge(w,b);break;case"pe":a=jQuery.grep(itmMngr.pe.itmArr,function(n){return n.bool.toLowerCase()=="or"});v=jQuery.grep(itmMngr.pl.itmArr,function(n){return n.bool.toLowerCase()=="or"});e=jQuery.merge(a,v);y=jQuery.grep(itmMngr.pe.itmArr,function(n){return n.bool.toLowerCase()=="and"});p=jQuery.grep(itmMngr.pl.itmArr,function(n){return n.bool.toLowerCase()=="and"});s=jQuery.merge(y,p);w=jQuery.grep(itmMngr.pe.itmArr,function(n){return n.bool.toLowerCase()=="not"});b=jQuery.grep(itmMngr.pl.itmArr,function(n){return n.bool.toLowerCase()=="not"});o=jQuery.merge(w,b);break;case"co":pt=jQuery.grep(itmMngr.co.itmArr,function(n){return n.bool.toLowerCase()=="or"});wt=jQuery.grep(itmMngr.cl.itmArr,function(n){return n.bool.toLowerCase()=="or"});e=jQuery.merge(pt,wt);bt=jQuery.grep(itmMngr.co.itmArr,function(n){return n.bool.toLowerCase()=="and"});kt=jQuery.grep(itmMngr.cl.itmArr,function(n){return n.bool.toLowerCase()=="and"});s=jQuery.merge(bt,kt);dt=jQuery.grep(itmMngr.co.itmArr,function(n){return n.bool.toLowerCase()=="not"});gt=jQuery.grep(itmMngr.cl.itmArr,function(n){return n.bool.toLowerCase()=="not"});o=jQuery.merge(dt,gt);break;case"sc":k=jQuery.grep(itmMngr.sc.itmArr,function(n){return n.bool.toLowerCase()=="or"});d=jQuery.grep(itmMngr.sl.itmArr,function(n){return n.bool.toLowerCase()=="or"});e=jQuery.merge(k,d);k=jQuery.grep(itmMngr[n].itmArr,function(n){return n.bool.toLowerCase()=="not"});d=jQuery.grep(itmMngr.sl.itmArr,function(n){return n.bool.toLowerCase()=="not"});o=jQuery.merge(k,d);var ni=jQuery.grep(itmMngr[n].itmArr,function(n){return n.bool.toLowerCase()=="not"&&n.id.split("_")[1]=="p"}),ti=jQuery.grep(itmMngr[n].itmArr,function(n){return n.bool.toLowerCase()=="not"&&n.id.split("_")[1]=="w"}),ii=jQuery.grep(itmMngr[n].itmArr,function(n){return n.bool.toLowerCase()=="not"&&n.id.split("_")[1]=="m"}),ri=jQuery.grep(itmMngr[n].itmArr,function(n){return n.bool.toLowerCase()=="not"&&n.id.split("_")[1]=="i"}),ui=jQuery.grep(itmMngr[n].itmArr,function(n){return n.bool.toLowerCase()=="not"&&n.id.split("_")[1]=="b"}),fi=jQuery.grep(itmMngr[n].itmArr,function(n){return n.bool.toLowerCase()=="not"&&n.id.split("_")[1]=="o"}),ei=jQuery.grep(itmMngr[n].itmArr,function(n){return n.bool.toLowerCase()=="not"&&n.id.split("_")[1]=="t"});break;case"au":oi=jQuery.grep(itmMngr.au.itmArr,function(n){return n.bool.toLowerCase()=="or"});si=jQuery.grep(itmMngr.al.itmArr,function(n){return n.bool.toLowerCase()=="or"});e=jQuery.merge(oi,si);hi=jQuery.grep(itmMngr.au.itmArr,function(n){return n.bool.toLowerCase()=="and"});ci=jQuery.grep(itmMngr.al.itmArr,function(n){return n.bool.toLowerCase()=="and"});s=jQuery.merge(hi,ci);li=jQuery.grep(itmMngr.au.itmArr,function(n){return n.bool.toLowerCase()=="not"});ai=jQuery.grep(itmMngr.al.itmArr,function(n){return n.bool.toLowerCase()=="not"});o=jQuery.merge(li,ai);break;case"la":e=jQuery.grep(itmMngr[n].itmArr,function(n){return n.bool.toLowerCase()=="or"});o=jQuery.grep(itmMngr[n].itmArr,function(n){return n.bool.toLowerCase()=="not"})}if(i[i.length]='<div class="searchBuilderFilters">',nt="",$.browser.msie&&$.browser.version=="7.0"&&(nt="DJIIFilterListie7"),i[i.length]='    <ul class="DJIIFilterList '+nt+'">',g=t&&(n=="co"||n=="in"||n=="re"||n=="ns"||n=="au"||n=="pe"),e!=null&&e.length>0)for(u=0;u<e.length;u++)r=e[u],n=="la"?(i[i.length]='        <li class="connectionAndPillWrap">',i[i.length]='            <div class="filterPillWrap" sequence="'+f+'" mode="or" onclick="lstItm_click(\'la\', \''+r.id+'\')" companyid="'+r.id+'">',i[i.length]='                <div class="pillNoMenu" style="cursor: pointer">',i[i.length]='                    <span companyid="'+r.id+'" class="filterText">'+r.desc+"<\/span>",i[i.length]="                <\/div>",i[i.length]="            <\/div>",i[i.length]="        <\/li>"):r.id.split("_")[0]=="sl"?(i[i.length]='        <li class="connectionAndPillWrap">',(u>0||h)&&(i[i.length]='            <span class="filterConnection">',i[i.length]='                <span class="connectionText connectionTextOr">'+translate("orLabel")+"<\/span>",i[i.length]="            <\/span>"),i[i.length]='            <div class="filterPillWrap" sequence="'+f+'" mode="or" onclick_X="lstItm_click(\'sl\', \''+r.id+'\')" companyid="'+r.id+'">',i[i.length]='                <div class="pill" style="cursor: pointer">',i[i.length]='                    <span companyid="'+r.id+'" class="filterText">'+r.desc+"<\/span>",i[i.length]="                <\/div>",i[i.length]="            <\/div>",i[i.length]="        <\/li>"):(i[i.length]='        <li class="connectionAndPillWrap">',g?it(r):((u>0||h)&&(i[i.length]='            <span class="filterConnection">',i[i.length]='                <span class="connectionText connectionTextOr">'+translate("orLabel")+"<\/span>",i[i.length]="            <\/span>"),l=r.desc,n=="sc"&&(l=t?GetDesc(n,r.id,l):GetTranslateSourceType(r.id.substring(3,4))+l),i[i.length]='            <div class="filterPillWrap" sequence="'+f+'" mode="or" companyid="'+r.id+'">',i[i.length]='                <div class="pill" style="cursor: pointer">',i[i.length]='                    <span companyid="'+r.id+'" class="filterText">'+l+"<\/span>",i[i.length]="                <\/div>",i[i.length]="            <\/div>"),i[i.length]="        <\/li>"),h=!0,f++;else if(s!=null&&s.length>0)for(u=0;u<s.length;u++)r=s[u],i[i.length]='        <li class="connectionAndPillWrap">',g?it(r):((u>0||h)&&(i[i.length]='            <span class="filterConnection">',i[i.length]='                <span class="connectionText connectionTextAnd">'+translate("andLabel")+"<\/span>",i[i.length]="            <\/span>"),n=="fes"?(i[i.length]='            <div class="filterPillWrap" sequence="'+f+'" mode="and" onclick="lstItm_click(\'fes\', \''+r.id+'\')"  companyid="'+r.id+'">',i[i.length]='                <div class="pillNoMenu" style="cursor: pointer">',i[i.length]='                    <span companyid="'+r.id+'" class="filterText">'+r.desc+"<\/span>",i[i.length]="                <\/div>",i[i.length]="            <\/div>"):(i[i.length]='            <div class="filterPillWrap" sequence="'+f+'" mode="and" companyid="'+r.id+'">',i[i.length]='                <div class="pill" style="cursor: pointer">',i[i.length]='                    <span companyid="'+r.id+'" class="filterText">'+r.desc+"<\/span>",i[i.length]="                <\/div>",i[i.length]="            <\/div>")),i[i.length]="        <\/li>",h=!0,f++;if(o!=null&&o.length>0)for(u=0;u<o.length;u++)r=o[u],i[i.length]='        <li class="connectionAndPillWrap">',g?it(r):((u>-1||h)&&(i[i.length]='            <span class="filterConnection">',i[i.length]='                <span class="connectionText connectionTextNot">'+translate("notLabel")+"<\/span>",i[i.length]="            <\/span>"),tt=r.desc,n=="sc"&&(l=GetDesc(n,r.id,tt)),r.id.split("_")[0]=="sl"&&r.metadata&&r.metadata.exc&&(i[i.length]='        <span class="fi-two fi_warning-sm"><\/span>'),i[i.length]='            <div class="filterPillWrap" sequence="'+f+'" mode="not" companyid="'+r.id+'">',i[i.length]='                <div class="pill" style="cursor: pointer">',i[i.length]='                    <span companyid="'+r.id+'" class="filterText">'+tt+"<\/span>",i[i.length]="                <\/div>",i[i.length]="            <\/div>"),i[i.length]="        <\/li>",h=!0,f++;i[i.length]="    <\/ul>";i[i.length]="<\/div>";h?c!=null?$(c).html(i.join("")):$("#"+n+"Lst").html(i.join("")):c!=null?$(c).html(""):($("#sccompanylist").length>0&&$("#sccompanylist").html(""),$("#cocompanylist").length>0&&$("#cocompanylist").html(""),$("#recompanylist").length>0&&$("#recompanylist").html(""),$("#incompanylist").length>0&&$("#incompanylist").html(""),$("#nscompanylist").length>0&&$("#nscompanylist").html(""),$("#pecompanylist").length>0&&$("#pecompanylist").html(""),$("#auauthorlist").length>0&&$("#auauthorlist").html(""));c!=null?g_dj_fl_jsLib_1_0_pillsManager.renderContextMenu(c,ni,ti,ii,ri,ui,fi,ei):g_dj_fl_jsLib_1_0_pillsManager.renderContextMenu(n,ni,ti,ii,ri,ui,fi,ei);$("#coLst .connectionTextOr").click(function(){$("#coAnd").trigger("click");$("#coAnd").trigger("click")});$("#coLst .connectionTextAnd").click(function(){$("#coOr").trigger("click");$("#coOr").trigger("click")});$("#nsLst .connectionTextOr").click(function(){$("#nsAnd").trigger("click");$("#nsAnd").trigger("click")});$("#nsLst .connectionTextAnd").click(function(){$("#nsOr").trigger("click");$("#nsOr").trigger("click")});$("#inLst .connectionTextOr").click(function(){$("#inAnd").trigger("click");$("#inAnd").trigger("click")});$("#inLst .connectionTextAnd").click(function(){$("#inOr").trigger("click");$("#inOr").trigger("click")});$("#reLst .connectionTextOr").click(function(){$("#reAnd").trigger("click");$("#reAnd").trigger("click")});$("#reLst .connectionTextAnd").click(function(){$("#reOr").trigger("click");$("#reOr").trigger("click")});$("#peLst .connectionTextOr").click(function(){$("#peAnd").trigger("click");$("#peAnd").trigger("click")});$("#peLst .connectionTextAnd").click(function(){$("#peOr").trigger("click");$("#peOr").trigger("click")});$("#scLst .fi-two.fi_warning-sm").click(function(){openBalloonPopup(this,translate("warningMsgForExcSrcList"),{arrow:"up"})})},GetStatusOfSourceType:function(n){var t=!1;switch(n){case translate("allPublications"):t=g_dj_fl_jsLib_1_0_pillsManager.checkSourceItemsByType("p");break;case translate("allWebSites"):t=g_dj_fl_jsLib_1_0_pillsManager.checkSourceItemsByType("w");break;case translate("allPictures"):t=g_dj_fl_jsLib_1_0_pillsManager.checkSourceItemsByType("i");break;case translate("allMultimedia"):t=g_dj_fl_jsLib_1_0_pillsManager.checkSourceItemsByType("m");break;case translate("allBlogs"):t=g_dj_fl_jsLib_1_0_pillsManager.checkSourceItemsByType("b");break;case translate("allBoards"):t=g_dj_fl_jsLib_1_0_pillsManager.checkSourceItemsByType("o");break;case translate("allCustDocs"):t=g_dj_fl_jsLib_1_0_pillsManager.checkSourceItemsByType("t")}return t},checkSourceItemsByType:function(n){var i=jQuery.grep(itmMngr.sc.itmArr,function(t){return t.bool.toLowerCase()=="or"&&t.id.split("_")[1]==n}),t=jQuery.grep(itmMngr.sc.itmArr,function(t){return t.bool.toLowerCase()=="not"&&t.id.split("_")[1]==n});return t==0?!0:!1},hideContextMnu:function(n){g_dj_fl_jsLib_1_0_pillsManager.contextMnuSelected||$("#"+n+"pillscontextmenu").length>0&&setTimeout(function(){$("#"+n+"pillscontextmenu").css("display","none")},800)},renderContextMenu:function(n,t,i,r,u,f,e,o){var s,h="#"+n+"Lst",c,l;(n.indexOf("#")!=-1?(s=n,n=s.substring(1,3),h="#"+n+"companylist"):h="#"+n+"Lst",n!="la")&&(c="",$.browser.msie&&$.browser.version=="7.0"&&(c="pillscontextmenuie7"),$("#"+n+"pillscontextmenu").length==0&&$(document.body).append('<div id="'+n+'pillscontextmenu" class="overlaypillscontextmenu '+c+'"><\/div>'),l=g_dj_fl_jsLib_1_0_pillsManager.getMaxZIndex(),$("#"+n+"pillscontextmenu").css("z-index",l+10),$(h+" .filterPillWrap").mouseout(function(){setTimeout(function(){g_dj_fl_jsLib_1_0_pillsManager.hideContextMnu(n)},800);g_dj_fl_jsLib_1_0_pillsManager.contextMnuSelected=!1}),$(h+" .filterPillWrap").mouseover(function(){g_dj_fl_jsLib_1_0_pillsManager.contextMnuSelected=!0}),n!="sc"||t!=null&&t.length>0&&i!=null&&i.length>0&&r!=null&&r.length>0&&u!=null&&u.length>0&&f!=null&&f.length>0&&e!=null&&e.length>0&&o!=null&&o.length>0?$(h+" .filterPillWrap").click(function(){var u=g_dj_fl_jsLib_1_0_pillsManager.getMaxZIndex(),t;if($("#"+n+"pillscontextmenu").css("z-index",u+10),t=[],t[t.length]='<div class="pillOptionsList">',s==null||n=="sc")switch($(this).attr("mode")){case"not":t[t.length]=$(this).attr("sequence")!=="0"?n=="au"||n=="sc"?'     <div pilloption="Or" class="pillOption or" companyid="'+$(this).attr("companyid")+'"><span>'+translate("orLabel")+"<\/span><\/div>":$("#"+n+"And").is(":checked")?'     <div pilloption="And" class="pillOption and" companyid="'+$(this).attr("companyid")+'"><span>'+translate("andLabel")+"<\/span><\/div>":'     <div pilloption="Or" class="pillOption or" companyid="'+$(this).attr("companyid")+'"><span>'+translate("orLabel")+"<\/span><\/div>":'     <div pilloption="Or" class="pillOption or" companyid="'+$(this).attr("companyid")+'"><span>'+translate("orLabel")+"<\/span><\/div>";break;case"and":t[t.length]='     <div pilloption="Not" class="pillOption not" companyid="'+$(this).attr("companyid")+'"><span>'+translate("notLabel")+"<\/span><\/div>";break;case"or":n!="la"&&(t[t.length]='     <div pilloption="Not" class="pillOption not" companyid="'+$(this).attr("companyid")+'"><span>'+translate("notLabel")+"<\/span><\/div>")}g_dj_fl_jsLib_1_0_pillsManager.getSourceTextType($(this).text())||(typeof listType!="undefined"&&listType!=null?list(listType.split("_")[0]!="sl")||(t[t.length]='     <div pilloption="Remove" class="pillOption remove" companyid="'+$(this).attr("companyid")+'"><span>'+translate("removeLabel")+"<\/span><\/div>"):t[t.length]='     <div pilloption="Remove" class="pillOption remove" companyid="'+$(this).attr("companyid")+'"><span>'+translate("removeLabel")+"<\/span><\/div>");t[t.length]="<\/div>";$("#"+n+"pillscontextmenu").html(t.join(""));$("#"+n+"pillscontextmenu .pillOption").hover(function(){$(this).toggleClass("pillOptionOver")},function(){$(this).toggleClass("pillOptionOver")});$("#"+n+"pillscontextmenu .pillOption").each(function(){$(this).click(function(){var i=$(this).attr("companyid"),t=i.split("_")[0],r=itmMngr[t],u=r.pnlId;$("#"+n+"pillscontextmenu").css("display","none");switch($(this).attr("pilloption")){case"Remove":lstItm_click(t,$(this).attr("companyid"));break;case"Or":g_dj_fl_jsLib_1_0_pillsManager.UpdateOperatorOnExistingItem(t,i,"or");n=="au"||n=="sc"?(updtLstItms(n,"Or"),setLstDsply(n)):$("#"+n+"Or").trigger("click");break;case"And":g_dj_fl_jsLib_1_0_pillsManager.UpdateOperatorOnExistingItem(t,i,"and");$("#"+n+"And").trigger("click");break;case"Not":g_dj_fl_jsLib_1_0_pillsManager.UpdateOperatorOnExistingItem(t,i,"not");setLstDsply(u)}setLstDsply("lk");g_dj_fl_jsLib_1_0_pillsManager.renderItems("#"+n+"pillscontextmenu",!0);s!=null&&g_dj_fl_jsLib_1_0_pillsManager.renderItems("#"+n+"companylist",!0)})});var i=$("#"+n+"pillscontextmenu"),r=$(this).offset();i.css({top:r.top+20,left:r.left+$(this).width()-$(i).width(),display:"block"});i.mouseover(function(){g_dj_fl_jsLib_1_0_pillsManager.contextMnuSelected=!0});i.mouseout(function(){setTimeout(function(){g_dj_fl_jsLib_1_0_pillsManager.hideContextMnu(n)},800);g_dj_fl_jsLib_1_0_pillsManager.contextMnuSelected=!1})}):$(h+" .filterPillWrap").click(function(){var e=$(this).attr("companyid"),u=g_dj_fl_jsLib_1_0_pillsManager.getMaxZIndex(),t,i,f,r;if($("#"+n+"pillscontextmenu").css("z-index",u+10),t=[],t[t.length]='<div class="pillOptionsList">',s==null||n=="sc")switch($(this).attr("mode")){case"not":t[t.length]=$(this).attr("sequence")!=="0"?n=="au"||n=="sc"?'     <div pilloption="Or" class="pillOption or" companyid="'+$(this).attr("companyid")+'"><span>'+translate("orLabel")+"<\/span><\/div>":$("#"+n+"And").is(":checked")?'     <div pilloption="And" class="pillOption and" companyid="'+$(this).attr("companyid")+'"><span>'+translate("andLabel")+"<\/span><\/div>":'     <div pilloption="Or" class="pillOption or" companyid="'+$(this).attr("companyid")+'"><span>'+translate("orLabel")+"<\/span><\/div>":'     <div pilloption="Or" class="pillOption or" companyid="'+$(this).attr("companyid")+'"><span>'+translate("orLabel")+"<\/span><\/div>";break;case"and":t[t.length]='     <div pilloption="Not" class="pillOption not" companyid="'+$(this).attr("companyid")+'"><span>'+translate("notLabel")+"<\/span><\/div>";break;case"or":n=="la"||g_dj_fl_jsLib_1_0_pillsManager.getSourceTextType($(this).text())||(t[t.length]='     <div pilloption="Not" class="pillOption not" companyid="'+$(this).attr("companyid")+'"><span>'+translate("notLabel")+"<\/span><\/div>")}g_dj_fl_jsLib_1_0_pillsManager.getSourceTextType($(this).text())||(t[t.length]='     <div pilloption="Remove" class="pillOption remove" companyid="'+$(this).attr("companyid")+'"><span>'+translate("removeLabel")+"<\/span><\/div>");t[t.length]="<\/div>";$("#"+n+"pillscontextmenu").html(t.join(""));$("#"+n+"pillscontextmenu .pillOption").hover(function(){$(this).toggleClass("pillOptionOver")},function(){$(this).toggleClass("pillOptionOver")});$("#"+n+"pillscontextmenu .pillOption").each(function(){$(this).click(function(){var t=$(this).attr("companyid"),i=t.split("_")[0],r=itmMngr[i],u=r.pnlId;$("#"+n+"pillscontextmenu").css("display","none");switch($(this).attr("pilloption")){case"Remove":lstItm_click(i,t);break;case"Or":g_dj_fl_jsLib_1_0_pillsManager.UpdateOperatorOnExistingItem(i,t,"or");n=="au"||n=="sc"?(updtLstItms(n,"Or"),setLstDsply(n)):$("#"+n+"Or").trigger("click");break;case"And":g_dj_fl_jsLib_1_0_pillsManager.UpdateOperatorOnExistingItem(i,t,"and");$("#"+n+"And").trigger("click");break;case"Not":g_dj_fl_jsLib_1_0_pillsManager.UpdateOperatorOnExistingItem(i,t,"not");setLstDsply(u)}setLstDsply("lk");g_dj_fl_jsLib_1_0_pillsManager.renderItems("#"+n+"pillscontextmenu",!0);s!=null&&g_dj_fl_jsLib_1_0_pillsManager.renderItems("#"+n+"companylist",!0)})});i=$("#"+n+"pillscontextmenu");f=500;$(this).offset()&&(r=$(this).offset(),i.css({top:r.top+20,left:r.left+$(this).width()-$(i).width(),display:"block"}),i.mouseover(function(){g_dj_fl_jsLib_1_0_pillsManager.contextMnuSelected=!0}),i.mouseout(function(){setTimeout(function(){g_dj_fl_jsLib_1_0_pillsManager.hideContextMnu(n)},800);g_dj_fl_jsLib_1_0_pillsManager.contextMnuSelected=!1}))}))},getSourceTextType:function(n){switch(n.trim()){case translate("allPublications"):return!0;case translate("allWebSites"):return!0;case translate("allPictures"):return!0;case translate("allMultimedia"):return!0;case translate("allBlogs"):return!0;case translate("allBoards"):return!0;case translate("allCustDocs"):return!0;case translate("allSources"):return!0}return!1},UpdateOperatorOnExistingItem:function(n,t,i){for(var r,s,u,h,c,l=itmMngr[n],e=l.itmArr,o=!1,f=0;f<e.length;f++)r=e[f],r.id==t&&(s=r.id,u=r.value,u=u.replace(/\&quot;/g,'\\"'),h=r.desc,c=r.metadata,rmvLstItm(n,t),addLstItm(n,s,h,u,i,c),o=!0);return o},fetchListService:function(n){$("#"+n+"select").html("<option>"+translate("plsWait")+"<\/option>");var t;switch(n){case"co":progressIndicator.display(translate(g_dj_fl_jsLib_1_0_pillsManager.FetchingCompanies));t=new RequestContext("factiva.com.ui.services.CompaniesService",null,null,g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccess,g_dj_fl_jsLib_1_0_pillsManager.fetchListError);break;case"sc":progressIndicator.display(translate(g_dj_fl_jsLib_1_0_pillsManager.FetchingSources));t=new RequestContext("factiva.com.ui.services.SourcesService",null,null,g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessSC,g_dj_fl_jsLib_1_0_pillsManager.fetchListError);break;case"au":progressIndicator.display(translate(g_dj_fl_jsLib_1_0_pillsManager.FetchingAuthors));t=new RequestContext("factiva.com.ui.services.AuthorsService",null,null,g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessAU,g_dj_fl_jsLib_1_0_pillsManager.fetchListError);break;case"in":progressIndicator.display(translate(g_dj_fl_jsLib_1_0_pillsManager.FetchingIndustry));t=new RequestContext("factiva.com.ui.services.ListService",n,null,g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessGL,g_dj_fl_jsLib_1_0_pillsManager.fetchListError);t.Add("lType",n);break;case"ns":progressIndicator.display(translate(g_dj_fl_jsLib_1_0_pillsManager.FetchingSubjects));t=new RequestContext("factiva.com.ui.services.ListService",n,null,g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessGL,g_dj_fl_jsLib_1_0_pillsManager.fetchListError);t.Add("lType",n);break;case"re":progressIndicator.display(translate(g_dj_fl_jsLib_1_0_pillsManager.FetchingRegions));t=new RequestContext("factiva.com.ui.services.ListService",n,null,g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessGL,g_dj_fl_jsLib_1_0_pillsManager.fetchListError);t.Add("lType",n);break;case"pe":progressIndicator.display(translate(g_dj_fl_jsLib_1_0_pillsManager.FetchingExecutives));t=new RequestContext("factiva.com.ui.services.ListService",n,null,g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessGL,g_dj_fl_jsLib_1_0_pillsManager.fetchListError);t.Add("lType",n)}t&&t.Send()},fetchListSuccessSC:function(n){var f=parseJSON(n.Text),i,r,u,t;if(f==null)return!1;if(g_dj_fl_jsLib_1_0_pillsManager.listItemDTO=f.listItemDTO,g_dj_fl_jsLib_1_0_pillsManager.listViewDTO=f.listViewDTO,i=[],r=g_dj_fl_jsLib_1_0_pillsManager.listViewDTO.personal,r)for(i[i.length]='<option value="0" title="'+translate("chooseList")+'">'+translate("chooseList")+"<\/option>",t=0;t<r.item.length;t++)i[i.length]='<option value="'+r.item[t].id+'" title="'+r.item[t].name+'">'+r.item[t].name+"<\/option>";if(u=g_dj_fl_jsLib_1_0_pillsManager.listViewDTO.group,u)for(t=0;t<u.item.length;t++)i[i.length]='<option value="'+u.item[t].id+'" title="'+u.item[t].name+'">'+translate("prefixForGroupItem")+" "+u.item[t].name+"<\/option>";r||u?$("#scradioaddtolist").attr("disabled",!1):($("#scradiocreatelist").attr("checked",!0),$("#sccreatelist").trigger("keyup"),$("#scradioaddtolist").attr("disabled",!0));$("#scselect").html(i.join(""));progressIndicator.hide()},fetchListSuccessAU:function(n){var f=parseJSON(n.Text),i,r,u,t;if(f==null)return!1;if(g_dj_fl_jsLib_1_0_pillsManager.listItemDTO=f.savedAuthorListItemDTO,g_dj_fl_jsLib_1_0_pillsManager.listViewDTO=f.savedAuthorListViewDTO,i=[],r=g_dj_fl_jsLib_1_0_pillsManager.listViewDTO.personal,r)for(i[i.length]='<option value="0" title="'+translate("chooseList")+'">'+translate("chooseList")+"<\/option>",t=0;t<r.item.length;t++)i[i.length]='<option value="'+r.item[t].id+'" title="'+r.item[t].name+'">'+r.item[t].name+"<\/option>";if(u=g_dj_fl_jsLib_1_0_pillsManager.listViewDTO.group,u)for(t=0;t<u.item.length;t++)i[i.length]='<option value="'+u.item[t].id+'" title="'+u.item[t].name+'">'+translate("prefixForGroupItem")+" "+u.item[t].name+"<\/option>";r||u?$("#auradioaddtolist").attr("disabled",!1):($("#auradiocreatelist").attr("checked",!0),$("#aucreatelist").trigger("keyup"),$("#auradioaddtolist").attr("disabled",!0));$("#auselect").html(i.join(""));progressIndicator.hide()},fetchListSuccess:function(n){var f=parseJSON(n.Text),i,r,u,t;if(f==null)return!1;if(g_dj_fl_jsLib_1_0_pillsManager.listItemDTO=f.savedCompanyListItemDTO,g_dj_fl_jsLib_1_0_pillsManager.listViewDTO=f.savedCompanyListViewDTO,i=[],r=g_dj_fl_jsLib_1_0_pillsManager.listViewDTO.personal,r)for(i[i.length]='<option value="0" title="'+translate("chooseList")+'">'+translate("chooseList")+"<\/option>",t=0;t<r.item.length;t++)i[i.length]='<option value="'+r.item[t].id+'" title="'+r.item[t].name+'">'+r.item[t].name+"<\/option>";if(u=g_dj_fl_jsLib_1_0_pillsManager.listViewDTO.group,u)for(t=0;t<u.item.length;t++)i[i.length]='<option value="'+u.item[t].id+'" title="'+u.item[t].name+'">'+translate("prefixForGroupItem")+" "+u.item[t].name+"<\/option>";r||u?$("#coradioaddtolist").attr("disabled",!1):($("#coradiocreatelist").attr("checked",!0),$("#cocreatelist").trigger("keyup"),$("#coradioaddtolist").attr("disabled",!0));$("#coselect").html(i.join(""));progressIndicator.hide()},fetchListSuccessGL:function(n){var f=n.ClientContext,e=n.Text?parseJSON(n.Text):null,u,i,r,t;if(g_dj_fl_jsLib_1_0_pillsManager.listViewDTO=e?e.listViewDTO:{},u=[],i=g_dj_fl_jsLib_1_0_pillsManager.listViewDTO.personal,i&&i.item)for(u[u.length]='<option value="0" title="'+translate("chooseList")+'">'+translate("chooseList")+"<\/option>",t=0;t<i.item.length;t++)u[u.length]='<option value="'+i.item[t].id+'" title="'+i.item[t].name+'">'+i.item[t].name+"<\/option>";if(r=g_dj_fl_jsLib_1_0_pillsManager.listViewDTO.group,r&&r.item)for(t=0;t<r.item.length;t++)u[u.length]='<option value="'+r.item[t].id+'" title="'+r.item[t].name+'">'+translate("prefixForGroupItem")+" "+r.item[t].name+"<\/option>";i&&i.item||r&&r.item?$("#"+f+"radioaddtolist").attr("disabled",!1):($("#"+f+"radiocreatelist").attr("checked",!0),$("#"+f+"createlist").trigger("keyup"),$("#"+f+"radioaddtolist").attr("disabled",!0));$("#"+f+"select").html(u.join(""));progressIndicator.hide()},fetchListError:function(n){var t=n.Error.Description;progressIndicator.hide();alert(t);$().overlay.hide()},renameList:function(n){var t=$("#"+n+"select option:selected").attr("title");g_dj_fl_jsLib_1_0_pillsManager.displayRenameList(n);$("#"+n+"renamelisttitle").val(t)},displayRenameList:function(n){if($("#"+n+"renamecontainer").length==0){var t=[];t[t.length]='<div class="overlayrenamecontainer" id="'+n+'renamecontainer">';t[t.length]='    <div class="overlayclose" onclick="$().overlay.hide(\'#'+n+"renamecontainer');\"><\/div>";t[t.length]='    <div class="overlayheader">'+translate("renameList")+"<\/div>";t[t.length]='    <div class="overlaybody">';t[t.length]="        <div>";t[t.length]='            <table border="0" class="overlaytable">';t[t.length]="                <tr>";t[t.length]='                    <td><input type="text" id="'+n+'renamelisttitle" class="overlaytext" /><\/td>';t[t.length]="                <\/tr>";t[t.length]="            <\/table>";t[t.length]="        <\/div>";t[t.length]="    <\/div>";t[t.length]='    <div class="overlayfooter">';t[t.length]='        <UL class=buttons><LI class=btn><DIV class="prettyBtn primaryBtn" id="'+n+'renamesubmit"><SPAN>'+translate("submit")+"<\/SPAN><\/DIV><\/LI>";t[t.length]='        <LI class=btn><DIV class="prettyBtn secondaryBtn" onclick="$().overlay.hide(\'#'+n+"renamecontainer');\"><SPAN>"+translate("cancel")+"<\/SPAN><\/DIV><\/LI><\/UL>";t[t.length]="    <\/div>";t[t.length]="<\/div>";$(document.body).append(t.join(""));$("#"+n+"renamesubmit").click(function(){var t=$("#"+n+"renamelisttitle").val();if(hasIllegalChar2(t))return alert(translate("illegalChar-1")+" (<, >, &, #, \\, %, +, |, ~) "+translate("illegalChar-2")),!1;if(t==="")return alert(translate("enterListName")),!1;$().overlay.hide("#"+n+"renamecontainer");g_dj_fl_jsLib_1_0_pillsManager.renameListService(n)})}$("#"+n+"renamecontainer .btn").hover(function(){$(this).toggleClass("over")});$("#"+n+"renamecontainer").draggable({handle:".overlayheader"});$("#"+n+"renamecontainer").overlay({background:!0,closeOnEsc:!0})},displayDeleteList:function(n){if($("#"+n+"deletecontainer").length==0){var t=[];t[t.length]='<div class="overlayrenamecontainer" id="'+n+'deletecontainer">';t[t.length]='    <div class="overlayclose" onclick="$().overlay.hide(\'#'+n+"renamecontainer');\"><\/div>";t[t.length]='    <div class="overlayheader">Rename List<\/div>';t[t.length]='    <div class="overlaybody">';t[t.length]="        <div>";t[t.length]='            <table border="0" class="overlaytable">';t[t.length]="                <tr>";t[t.length]='                    <td><input type="text" id="'+n+'renamelisttitle" class="overlaytext" /><\/td>';t[t.length]="                <\/tr>";t[t.length]="            <\/table>";t[t.length]="        <\/div>";t[t.length]="    <\/div>";t[t.length]='    <div class="overlayfooter">';t[t.length]='        <UL class=buttons><LI class=btn><DIV class="prettyBtn primaryBtn" id="'+n+'renamesubmit"><SPAN>'+translate("submit")+"<\/SPAN><\/DIV><\/LI>";t[t.length]='        <LI class=btn><DIV class="prettyBtn secondaryBtn" onclick="$().overlay.hide(\'#'+n+"renamecontainer');\"><SPAN>"+translate("cancel")+"<\/SPAN><\/DIV><\/LI><\/UL>";t[t.length]="    <\/div>";t[t.length]="<\/div>";$(document.body).append(t.join(""));$("#"+n+"renamesubmit").click(function(){$().overlay.hide("#"+n+"renamecontainer");g_dj_fl_jsLib_1_0_pillsManager.renameListService(n)})}$("#"+n+"renamecontainer .btn").hover(function(){$(this).toggleClass("over")});$("#"+n+"renamecontainer").draggable({handle:".overlayheader"});$("#"+n+"renamecontainer").overlay({background:!0,closeOnEsc:!0})},renameListService:function(n){var r,i,t;if(progressIndicator.display(translate(g_dj_fl_jsLib_1_0_pillsManager.RenamingList)),r=$("#"+n+"select option:selected").val(),i=$("#"+n+"renamelisttitle").val(),hasIllegalChar2(i))return progressIndicator.hide(500),alert(translate("illegalChar-1")+" (<, >, &, #, \\, %, +, |, ~) "+translate("illegalChar-2")),!1;switch(n){case"co":t=new RequestContext("factiva.com.ui.services.CompaniesService",null,null,g_dj_fl_jsLib_1_0_pillsManager.renameListSuccessCO,g_dj_fl_jsLib_1_0_pillsManager.renameListError);break;case"sc":t=new RequestContext("factiva.com.ui.services.SourcesService",null,null,g_dj_fl_jsLib_1_0_pillsManager.renameListSuccess,g_dj_fl_jsLib_1_0_pillsManager.renameListError);break;case"au":t=new RequestContext("factiva.com.ui.services.AuthorsService",null,null,g_dj_fl_jsLib_1_0_pillsManager.renameListSuccessAU,g_dj_fl_jsLib_1_0_pillsManager.renameListError);break;case"pe":case"in":case"ns":case"re":t=new RequestContext("factiva.com.ui.services.ListService",n,null,g_dj_fl_jsLib_1_0_pillsManager.renameListSuccessGL,g_dj_fl_jsLib_1_0_pillsManager.renameListError);t.Add("lType",n);t.Add("returnLists",!0)}return t&&(t.Add("rType","RenameList"),t.Add("listid",r),t.Add("listName",i),t.Send()),!1},renameListSuccess:function(n){var t=$("#scoverlay .overlayselect option:selected").val();return g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessSC(n),$("#scoverlay .overlayselect").val(t),tabs[0].className="pnlTabOpen",setPnlDsply(tabs[0].pnl,!1),progressIndicator.hide(500),!1},renameListSuccessCO:function(n){var i=$("#cooverlay .overlayselect option:selected").val(),r,t;for(g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccess(n),r=GetOperator("cop"),t=0;t<tabs.length;t++)$(tabs[t]).text().trim()==translate("companyLabel")&&(tabs[t].className="pnlTabOpen",setPnlDsply(tabs[t].pnl,!1));return $("#cooverlay .overlayselect").val(i),progressIndicator.hide(500),!1},renameListSuccessAU:function(n){var i=$("#auoverlay .overlayselect option:selected").val(),r,t;for(g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessAU(n),r=GetOperator("aup"),t=0;t<tabs.length;t++)$(tabs[t]).text().trim()==translate("authorLabel")&&(tabs[t].className="pnlTabOpen",setPnlDsply(tabs[t].pnl,!1));return $("#auoverlay .overlayselect").val(i),progressIndicator.hide(500),!1},renameListSuccessGL:function(n){var i=n.ClientContext,r=$("#"+i+"overlay .overlayselect option:selected").val(),t;return g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessGL(n),t=$("#"+i+"Tab"),t.length>0&&(t[0].className="pnlTabOpen",setPnlDsply(t[0].pnl,!1)),$("#"+i+"overlay .overlayselect").val(r),progressIndicator.hide(500),!1},renameListError:function(n){var t=n.Error.Description;progressIndicator.hide();alert(t)},removeList:function(){return $().confirmDialog({msg:translate(g_dj_fl_jsLib_1_0_pillsManager.ConfirmDeleteItem),yesClickHandler:g_dj_fl_jsLib_1_0_pillsManager.removeListConfirmed,yesClickParams:arguments}),!1},removeListConfirmed:function(n){g_dj_fl_jsLib_1_0_pillsManager.removeListService(n)},removeListService:function(n){var i=$("#"+n+"select option:selected").val(),t;if(i=="0")return alert(translate(g_dj_fl_jsLib_1_0_pillsManager.PlsSelectList)),!1;progressIndicator.display(translate(g_dj_fl_jsLib_1_0_pillsManager.DeletingList));switch(n){case"co":t=new RequestContext("factiva.com.ui.services.CompaniesService",null,null,g_dj_fl_jsLib_1_0_pillsManager.removeListSuccess,g_dj_fl_jsLib_1_0_pillsManager.removeListError);break;case"sc":t=new RequestContext("factiva.com.ui.services.SourcesService",null,null,g_dj_fl_jsLib_1_0_pillsManager.removeListSuccessSC,g_dj_fl_jsLib_1_0_pillsManager.removeListError);break;case"au":t=new RequestContext("factiva.com.ui.services.AuthorsService",null,null,g_dj_fl_jsLib_1_0_pillsManager.removeListSuccessAU,g_dj_fl_jsLib_1_0_pillsManager.removeListError);break;case"pe":case"in":case"ns":case"re":t=new RequestContext("factiva.com.ui.services.ListService",n,null,g_dj_fl_jsLib_1_0_pillsManager.removeListSuccessGL,g_dj_fl_jsLib_1_0_pillsManager.removeListError);t.Add("lType",n);t.Add("returnLists",!0)}return t&&(t.Add("rType","DeleteList"),t.Add("listid",i),t.Send()),!1},removeListSuccessSC:function(n){var t,i;return(g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessSC(n),t=parseJSON(n.Text),t==null||t=="")?(i="",progressIndicator.hide(),i=translate("errorForUserMinus1"),alert(i),!1):($("#scselect").val(t.newItemId),$("#screnamelist").hasClass("overlaylinkdisable")||($("#screnamelist").toggleClass("overlaylinkdisable"),$("#scdeletelist").toggleClass("overlaylinkdisable")),tabs[0].className="pnlTabOpen",setPnlDsply(tabs[0].pnl,!1),progressIndicator.hide(500),!1)},removeListSuccessAU:function(n){var i,r,t;if(g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessAU(n),i=parseJSON(n.Text),i==null||i=="")return r="",progressIndicator.hide(),r=translate("errorForUserMinus1"),alert(r),!1;for($("#auselect").val(i.newItemId),$("#aurenamelist").hasClass("overlaylinkdisable")||($("#aurenamelist").toggleClass("overlaylinkdisable"),$("#audeletelist").toggleClass("overlaylinkdisable")),t=0;t<tabs.length;t++)$(tabs[t]).text().trim()==translate("authorLabel")&&(tabs[t].className="pnlTabOpen",setPnlDsply(tabs[t].pnl,!1));return progressIndicator.hide(500),!1},removeListSuccess:function(n){var i,r,u,t;if(g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccess(n),i=parseJSON(n.Text),i==null||i=="")return r="",progressIndicator.hide(),r=translate("errorForUserMinus1"),alert(r),!1;for($("#coselect").val(i.newItemId),$("#corenamelist").hasClass("overlaylinkdisable")||($("#corenamelist").toggleClass("overlaylinkdisable"),$("#codeletelist").toggleClass("overlaylinkdisable")),u=GetOperator("cop"),t=0;t<tabs.length;t++)$(tabs[t]).text().trim()==translate("companyLabel")&&(tabs[t].className="pnlTabOpen",setPnlDsply(tabs[t].pnl,!1));return progressIndicator.hide(500),!1},removeListSuccessGL:function(n){var i,u,t,r;return(g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessGL(n),i=parseJSON(n.Text),i==null||i=="")?(u="",progressIndicator.hide(),u=translate("errorForUserMinus1"),alert(u),!1):(t=n.ClientContext,$("#"+t+"select").val(i.newItemId),$("#"+t+"renamelist").hasClass("overlaylinkdisable")||($("#"+t+"renamelist").toggleClass("overlaylinkdisable"),$("#"+t+"deletelist").toggleClass("overlaylinkdisable")),r=$("#"+t+"Tab"),r.length>0&&(r[0].className="pnlTabOpen",setPnlDsply(r[0].pnl,!1)),progressIndicator.hide(500),!1)},removeListError:function(n){var t=n.Error.Description;progressIndicator.hide();alert(t)},createList:function(n){return g_dj_fl_jsLib_1_0_pillsManager.createListService(n),!1},createListService:function(n){var u=$("#"+n+"createlist").val(),e=$("#"+n+"createlistgroup").is(":checked"),t,i,f,r;if(progressIndicator.display(translate(g_dj_fl_jsLib_1_0_pillsManager.CreatingList)),hasIllegalChar2(u))return progressIndicator.hide(500),alert(translate("illegalChar-1")+" (<, >, &, #, \\, %, +, |, ~) "+translate("illegalChar-2")),!1;switch(n){case"co":t=new RequestContext("factiva.com.ui.services.CompaniesService",null,null,g_dj_fl_jsLib_1_0_pillsManager.createListSuccess,g_dj_fl_jsLib_1_0_pillsManager.createListError);break;case"sc":t=new RequestContext("factiva.com.ui.services.SourcesService",null,null,g_dj_fl_jsLib_1_0_pillsManager.createListSuccessSC,g_dj_fl_jsLib_1_0_pillsManager.createListError);break;case"au":t=new RequestContext("factiva.com.ui.services.AuthorsService",null,null,g_dj_fl_jsLib_1_0_pillsManager.createListSuccessAU,g_dj_fl_jsLib_1_0_pillsManager.createListError);break;case"pe":case"in":case"ns":case"re":for(i=[],f=itmMngr[n].itmArr,r=0;r<f.length;r++)i.push(f[r].id.substring(3));t=new RequestContext("factiva.com.ui.services.ListService",n,null,g_dj_fl_jsLib_1_0_pillsManager.createListSuccessGL,g_dj_fl_jsLib_1_0_pillsManager.createListError);t.Add("lType",n);t.Add("returnLists",!0);i.length>0&&t.Add("arraycodes",i.join("_"))}return g_dj_fl_jsLib_1_0_pillsManager.SvstrListTitle=u,t&&(t.Add("rType","AddNewList"),t.Add("listName",u),t.Add("accountItem",e),t.Send()),!1},createListSuccessSC:function(n){var t=parseJSON(n.Text);return g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessSC(n),$("#scselect").val(t.newItemId),$("#sccreatelist").val(""),$("#sccreatelistgroup").attr("checked",!1),$("#scradioaddtolist").attr("checked",!0),$("#scselect").trigger("change"),progressIndicator.hide(500),g_dj_fl_jsLib_1_0_pillsManager.addToList("sc"),!1},createListSuccessAU:function(n){var t=parseJSON(n.Text);return g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessAU(n),$("#auselect").val(t.newItemId),$("#aucreatelist").val(""),$("#aucreatelistgroup").attr("checked",!1),$("#auradioaddtolist").attr("checked",!0),$("#auselect").trigger("change"),progressIndicator.hide(500),g_dj_fl_jsLib_1_0_pillsManager.addToList("au"),!1},createListSuccess:function(n){var t=parseJSON(n.Text);g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccess(n);$("#coselect").val(t.newItemId);$("#cocreatelist").val("");$("#cocreatelistgroup").attr("checked",!1);$("#coradioaddtolist").attr("checked",!0);$("#coselect").trigger("change");progressIndicator.hide(500);g_dj_fl_jsLib_1_0_pillsManager.addToList("co")},createListSuccessGL:function(n){var i=n.Text?parseJSON(n.Text):{},t=n.ClientContext;return g_dj_fl_jsLib_1_0_pillsManager.fetchListSuccessGL(n),$("#"+t+"select").val(i.newItemId),$("#"+t+"createlist").val(""),$("#"+t+"createlistgroup").attr("checked",!1),$("#"+t+"radioaddtolist").attr("checked",!0),$("#"+t+"select").trigger("change"),progressIndicator.hide(500),g_dj_fl_jsLib_1_0_pillsManager.addToListSuccessGL(n),!1},createListError:function(n){var t=n.Error.Description;progressIndicator.hide();alert(t)},addToList:function(n){switch(n){case"sc":g_dj_fl_jsLib_1_0_pillsManager.addToListServiceSC(n);break;default:g_dj_fl_jsLib_1_0_pillsManager.addToListService(n)}return!1},addToListServiceSC:function(n){var s=$("#"+n+"select option:selected").val(),i,f,r,o,t,e,u;if(s=="0")return alert(translate("plsSelectList")),!1;for(i="",f=jQuery.grep(itmMngr.sc.itmArr,function(n){return n.bool.toLowerCase()=="or"}),t=0;t<f.length;t++)e=f[t],i+=e.value,i+=t<f.length-1?",":"";for(i="["+i+"]",r="",o=jQuery.grep(itmMngr.sc.itmArr,function(n){return n.bool.toLowerCase()=="not"}),t=0;t<o.length;t++)e=o[t],r+=e.value,r+=t<o.length-1?",":"";return r="["+r+"]",progressIndicator.display(translate(g_dj_fl_jsLib_1_0_pillsManager.AddToList)),u=new RequestContext("factiva.com.ui.services.SourcesService",null,null,g_dj_fl_jsLib_1_0_pillsManager.addToListSuccessSC,g_dj_fl_jsLib_1_0_pillsManager.addToListError),u.Add("rType","AddToList"),u.Add("listid",s),u.Add("scs",i),u.Add("xsc",r),u.Send(),!1},addToListService:function(n){var f=$("#"+n+"select option:selected").val(),i,u,r,e,t;if(f=="0")return alert(translate("plsSelectList")),!1;for(i="",u=itmMngr[n].itmArr,r=0;r<u.length;r++)e=u[r],i+=e.id.substring(3)+"_";if(i=="")return progressIndicator.hide(500),!1;progressIndicator.display(translate(g_dj_fl_jsLib_1_0_pillsManager.AddToList));switch(n){case"co":t=new RequestContext("factiva.com.ui.services.CompaniesService",null,null,g_dj_fl_jsLib_1_0_pillsManager.addToListSuccess,g_dj_fl_jsLib_1_0_pillsManager.addToListError);break;case"sc":t=new RequestContext("factiva.com.ui.services.SourcesService",null,null,g_dj_fl_jsLib_1_0_pillsManager.addToListSuccessSC,g_dj_fl_jsLib_1_0_pillsManager.addToListError);break;case"au":t=new RequestContext("factiva.com.ui.services.AuthorsService",null,null,g_dj_fl_jsLib_1_0_pillsManager.addToListSuccessAU,g_dj_fl_jsLib_1_0_pillsManager.addToListError);break;case"pe":case"in":case"re":case"ns":i=i.substring(0,i.length-1);t=new RequestContext("factiva.com.ui.services.ListService",n,null,g_dj_fl_jsLib_1_0_pillsManager.addToListSuccessGL,g_dj_fl_jsLib_1_0_pillsManager.addToListError);t.Add("lType",n)}return t&&(t.Add("rType","AddToList"),t.Add("listid",f),t.Add("arraycodes",i),t.Send()),!1},addToListSuccess:function(){for(var t=GetOperator("cop"),n=0;n<tabs.length;n++)$(tabs[n]).text().trim()==translate("companyLabel")&&(tabs[n].className="pnlTabOpen",setPnlDsply(tabs[n].pnl,!1));return progressIndicator.hide(500),!1},addToListSuccessAU:function(){for(var t=GetOperator("aup"),n=0;n<tabs.length;n++)$(tabs[n]).text().trim()==translate("authorLabel")&&(tabs[n].className="pnlTabOpen",setPnlDsply(tabs[n].pnl,!1));return progressIndicator.hide(500),!1},addToListSuccessSC:function(){return tabs[0].className="pnlTabOpen",setPnlDsply(tabs[0].pnl,!1),progressIndicator.hide(500),!1},addToListSuccessGL:function(n){var i=n.ClientContext,t=$("#"+i+"Tab");return t.length>0&&(t[0].className="pnlTabOpen",setPnlDsply(t[0].pnl,!1)),progressIndicator.hide(500),!1},addToListError:function(n){var t=n.Error.Description;progressIndicator.hide();alert(t)},error:function(){progressIndicator.hide();alert(translate(g_dj_fl_jsLib_1_0_pillsManager.PlsTryAgLater))},getMaxZIndex:function(){return Math.max.apply(null,$.map($("body > *"),function(n){return $(n).css("position")=="absolute"?parseInt($(n).css("z-index"))||1:1e3}))}};g_dj_fl_jsLib_1_0_pillsManager=new DJFLjsLibrary.Framework.pillsManager;_MslService="factiva.com.ui.msl.MslService";_ClService="factiva.com.ui.cl.Services.CompanyListLookupService";String.prototype.escapeSingleQuote=function(){return this==null?null:this.replace(/'/g,"'")};MLManager={selectedSources:[],selectedCompanies:[],handleError:function(n){var t=n.Error.Description;progressIndicator.hide();alert(t)},fetchSourceListsService:function(){progressIndicator.display(translate("fetchingSourceLists"),!1,!1,!0);var n=new RequestContext("factiva.com.ui.services.SourcesService",null,null,MLManager.fetchSourceListsSuccess,MLManager.handleError);return n.Send(),!1},fetchSourceListsSuccess:function(n){var f=parseJSON(n.Text),i,r;if(f==null)return!1;var o=f.listItemDTO,e=f.listViewDTO,u=e.personal,t=[];if(u)for(i=0;i<u.item.length;i++)t[t.length]='         <tr class="css_ml_row">',t[t.length]='             <td><div id="ml_sc_item_'+u.item[i].id+'" class="css_ml_cell css_ml_text">'+u.item[i].name+"<\/div><\/td>",t[t.length]='             <td><div class="css_ml_cell css_ml_text">'+translate("listPersonalType")+"<\/div><\/td>",t[t.length]='             <td><div class="css_ml_cell css_ml_cell_last"><span listid="'+u.item[i].id+'" class="css_ml_link edit">'+translate("edit")+'<\/span><span class="css_ml_separator">|<\/span><span listid="'+u.item[i].id+'" class="css_ml_link delete">'+translate("delete")+"<\/span><\/div><\/td>",t[t.length]="         <\/tr>";if(r=e.group,r)for(i=0;i<r.item.length;i++)t[t.length]='         <tr class="css_ml_row">',t[t.length]='             <td><div id="ml_sc_item_'+r.item[i].id+'" class="css_ml_cell css_ml_text">'+r.item[i].name+"<\/div><\/td>",t[t.length]='             <td><div class="css_ml_cell css_ml_text">'+translate("listGroupType")+"<\/div><\/td>",t[t.length]='             <td><div class="css_ml_cell css_ml_cell_last"><span listid="'+r.item[i].id+'" class="css_ml_link edit">'+translate("edit")+'<\/span><span class="css_ml_separator">|<\/span><span listid="'+r.item[i].id+'" class="css_ml_link delete">'+translate("delete")+"<\/span><\/div><\/td>",t[t.length]="         <\/tr>";$("#ml_sc_table2").attr("hasdata","1");$("#ml_sc_table2").find("tr:gt(0)").remove();$("#ml_sc_table2 tbody").append(t.join(""));$(".css_ml_row").hover(function(){$(this).toggleClass("css_ml_row_hover")});$("#ml_sc_table2 .css_ml_link").bind("click",function(){var n=$(this).attr("listid");$(this).hasClass("edit")&&MLManager.editSourceListOverlay(n);$(this).hasClass("delete")&&MLManager.removeSourceList(n)});progressIndicator.hide(500)},searchSourceList:function(){return MLManager.searchSourceListService(),!1},searchSourceListService:function(){var t,i,n;return progressIndicator.display(translate("searchingList"),!1,!1,!0),$("#ml_sc_editoverlay").length&&(t=$("#ml_sc_editoverlay #ml_sc_searchlist").val(),i=$("#ml_sc_editoverlay #ml_sc_searchnameonly").is(":checked")),$("#ml_sc_createoverlay").length&&(t=$("#ml_sc_createoverlay #ml_sc_searchlist").val(),i=$("#ml_sc_createoverlay #ml_sc_searchnameonly").is(":checked")),$("#ml_sc_overlay").length&&(t=$("#ml_sc_overlay #ml_sc_searchlist").val(),i=$("#ml_sc_overlay #ml_sc_searchnameonly").is(":checked")),n=new RequestContext(_MslService,null,null,MLManager.searchSourceListSuccess,MLManager.handleError),n.Add("rtype","Lookup"),n.Add("query",t),n.Add("srcNmOnly",i),n.Add("excDiscSrcs",IsExcludeSourcesCheckboxSelected()),n.Send(),!1},searchSourceListSuccess:function(n){var i=n.Text,r=i.replace(/mnuItm_click/g,"mnuItm_clickEdit"),u=r.replace(/mnuItm_dblClick/g,"mnuItm_dblClickEdit"),t=u.replace(/mnuItm_excludeItem/g,"excludeItemEdit");return t&&($("#ml_sc_editoverlay").length&&($("#ml_sc_editoverlay #ml_sc_list").html(t),$("#ml_sc_editoverlay .rsltHdr").hide()),$("#ml_sc_overlay").length&&($("#ml_sc_overlay #ml_sc_list").html(t),$("#ml_sc_overlay .rsltHdr").hide())),MLManager.setMnuItemDsplyML("#ml_sc_list"),progressIndicator.hide(500),!1},createSourceList:function(){return MLManager.createSourceListService(),!1},createSourceListService:function(){var t,i,n;return(progressIndicator.display(translate("creatingList"),!1,!1,!0),t=$("#ml_sc_createoverlay #ml_sc_createlist").val(),i=$("#ml_sc_createoverlay #ml_sc_createlistgroup").is(":checked"),hasIllegalChar2(t))?(progressIndicator.hide(500),alert(translate("illegalChar-1")+" (<, >, &, #, \\, %, +, |, ~) "+translate("illegalChar-2")),!1):(n=new RequestContext("factiva.com.ui.services.SourcesService",null,null,MLManager.createSourceListSuccess,MLManager.handleError),n.Add("rType","AddNewList"),n.Add("listName",t),n.Add("accountItem",i),n.Send(),!1)},createSourceListSuccess:function(n){var t,i,r;return(MLManager.fetchSourceListsSuccess(n),t=parseJSON(n.Text),t==null||t=="")?(i="",progressIndicator.hide(),i=translate("errorForUser131063"),alert(i),!1):(r=t.newItemId,MLManager.createSourceListAddItemsService(r),!1)},createSourceListAddItemsService:function(n){var r,f,u,o,t,e,i;for(progressIndicator.display(translate("creatingList"),!1,!1,!0),r="",f=jQuery.grep(MLManager.selectedSources,function(n){return n.bool.toLowerCase()=="or"&&!n.removed==!0}),t=0;t<f.length;t++)e=f[t],r+=e.value,r+=t<f.length-1?",":"";for(u="",o=jQuery.grep(MLManager.selectedSources,function(n){return n.bool.toLowerCase()=="not"&&!n.removed==!0}),t=0;t<o.length;t++)e=o[t],u+=e.value,u+=t<o.length-1?",":"";return i=new RequestContext("factiva.com.ui.services.SourcesService",null,null,MLManager.createSourceListAddItemsSuccess,MLManager.handleError),i.Add("rType","AddToList"),i.Add("listid",n),r.length>0&&i.Add("scs","["+r+"]"),u.length>0&&i.Add("xsc","["+u+"]"),i.Send(),!1},createSourceListAddItemsSuccess:function(){return $("#ml_sc_createoverlay #ml_sc_createlist").val(""),$("#ml_sc_createoverlay #ml_sc_createlistgroup").attr("checked",!1),tabs[0].className="pnlTabOpen",setPnlDsply(tabs[0].pnl,!1),progressIndicator.hide(),$().overlay.hide("#ml_sc_createoverlay"),!1},editSourceListOverlay:function(n){var t,i,r;DJOmniture.logSourceList();$("#ml_sc_editoverlay").length==0&&(t=[],t[t.length]='<div id="ml_sc_editoverlay" class="overlaycontainer">',t[t.length]='    <div class="overlayclose" onclick="$().overlay.hide(\'#ml_sc_editoverlay\');"><\/div>',t[t.length]='    <div class="overlayheader">'+translate("srcListEditor")+"<\/div>",t[t.length]='    <div class="overlaybody">',t[t.length]='        <div class="overlaybar">',t[t.length]='             <table border="0">',t[t.length]="                 <tr>",t[t.length]='                     <td class="overlaytitle">'+translate("listName")+"<\/td>",t[t.length]='                     <td><input type="text" maxlength = "25" class="overlaycreatelist" id="ml_sc_createlist" /><\/td>',t[t.length]='                     <td><div class="overlaylink overlaylinkdisable" id="ml_sc_renamelist">'+translate("rename")+"<\/div><\/td>",t[t.length]='                     <td align="center"><div class="overlaylinkdisable">|<\/div><\/td>',t[t.length]='                     <td><div class="overlaylink overlaylinkdisable" id="ml_sc_deletelist">'+translate("delete")+"<\/div><\/td>",t[t.length]="                 <\/tr>",t[t.length]="             <\/table>",t[t.length]="        <\/div>",t[t.length]='        <div class="overlaybar">',t[t.length]='             <table border="0">',t[t.length]="                 <tr>",t[t.length]='                     <td><span class="overlaytextbold">'+translate("listSelectSources")+"<\/span>:&nbsp;"+translate("listSelectSourcesHelper")+"<\/td>",t[t.length]="                 <\/tr>",t[t.length]="             <\/table>",t[t.length]="        <\/div>",t[t.length]='        <div class="overlaylist" id="ml_sc_selected_list"><\/div>',t[t.length]='        <div class="overlaybar">',t[t.length]='             <table border="0">',t[t.length]="                 <tr>",t[t.length]='                     <td><span class="overlaytextbold">'+translate("listSearchSources")+"<\/span><\/td>",t[t.length]="                 <\/tr>",t[t.length]="             <\/table>",t[t.length]="        <\/div>",t[t.length]='        <div class="overlaybar">',t[t.length]='             <table border="0">',t[t.length]="                 <tr>",t[t.length]='                     <td><input type="text" maxlength="25" class="overlaycreatelist" id="ml_sc_searchlist" /><\/td>',t[t.length]='                     <td><div class="overlaysearchbutton" id="ml_sc_searchlistbutton"><\/div><\/td>',t[t.length]='                     <td><input type="checkbox" checked="checked" class="overlaycreatelistgroup" id="ml_sc_searchnameonly" />'+translate("srchSrcNameOnly"),t[t.length]='                     <br/><label class="lkpLblDiscSources"><input id="ml_sc_excDiscSrcs" type="checkbox" checked="checked">'+translate("srchExcDiscSrcs")+"<\/td>",t[t.length]="                 <\/tr>",t[t.length]="                 <tr>",t[t.length]="                     <td>",t[t.length]='                     <div class="mnuHdr" id="scMnuHdrOverlay">',t[t.length]="                     <b>"+translate("selectFactivaCat")+"<\/b>&nbsp;",t[t.length]='                     <select onchange="srcCat_onchangeOverlay(this)" id="scCatOverlay">',t[t.length]='                         <option selected="selected" value="1">'+translate("selectOne")+"<\/option>",t[t.length]='                         <option value="iType=sc&amp;rType=allSources">'+translate("sbCatAllSources")+"<\/option>",t[t.length]='                         <option value="iType=sc&amp;rType=topSources">'+translate("sbCatTopSources")+"<\/option>",t[t.length]='                         <option value="iType=sc&amp;code=root&amp;gType=i">'+translate("sbCatByInd")+"<\/option>",t[t.length]='                         <option value="iType=sc&amp;code=root&amp;gType=l">'+translate("sbCatByLang")+"<\/option>",t[t.length]='                         <option value="iType=sc&code=root&amp;gType=r">'+translate("sbCatByReg")+"<\/option>",t[t.length]='                         <option value="iType=sc&amp;rType=alphaitems&amp;pType=u">'+translate("sbCatByTitle")+"<\/option>",t[t.length]='                         <option value="iType=sc&amp;code=root&&amp;gType=t">'+translate("sbCatByType")+"<\/option>",t[t.length]="                     <\/select>",t[t.length]="                     <\/div>",t[t.length]="                     <\/td>",t[t.length]="                 <\/tr>",t[t.length]="             <\/table>",t[t.length]="        <\/div>",t[t.length]='        <div class="overlaylist" id="ml_sc_list"><\/div>',t[t.length]="    <\/div>",t[t.length]='    <div class="overlayfooter">',t[t.length]='        <UL class=buttons><LI class=btn><DIV class="prettyBtn primaryBtn" id="ml_sc_savelist"><SPAN>'+translate("save")+"<\/SPAN><\/DIV><\/LI>",t[t.length]='        <LI class=btn><DIV class="prettyBtn secondaryBtn" onclick="$().overlay.hide(\'#ml_sc_editoverlay\');"><SPAN>'+translate("cancel")+"<\/SPAN><\/DIV><\/LI><\/UL>",t[t.length]="    <\/div>",t[t.length]="<\/div>",$(document.body).append(t.join("")),$("#ml_sc_editoverlay #ml_sc_savelist").click(function(){$("#ml_sc_editoverlay #ml_sc_createlist").val().length>0?MLManager.updateSourceList():(alert(translate("enterNewName")),$("#ml_sc_editoverlay #ml_sc_createlist").focus())}),$("#ml_sc_editoverlay #ml_sc_createlist").keyup(function(){$("#ml_sc_editoverlay #ml_sc_createlist").val().length==0?$("#ml_sc_editoverlay #ml_sc_renamelist").hasClass("overlaylinkdisable")||$("#ml_sc_editoverlay #ml_sc_renamelist, #ml_sc_deletelist").toggleClass("overlaylinkdisable"):$("#ml_sc_editoverlay #ml_sc_renamelist").hasClass("overlaylinkdisable")&&$("#ml_sc_editoverlay #ml_sc_renamelist, #ml_sc_deletelist").toggleClass("overlaylinkdisable")}),$("#ml_sc_editoverlay #ml_sc_renamelist").click(function(){$("#ml_sc_editoverlay #ml_sc_createlist").val().length>0?MLManager.renameSourceList():(alert(translate("enterNewName")),$("#ml_sc_editoverlay #ml_sc_createlist").focus())}),$("#ml_sc_editoverlay #ml_sc_deletelist").click(function(){if($("#ml_sc_editoverlay #ml_sc_createlist").val().length>0){var n=$("#ml_sc_editoverlay #ml_sc_createlist").attr("listid",n);MLManager.removeSourceList(n)}else alert(translate("enterNewName")),$("#ml_sc_editoverlay #ml_sc_createlist").focus()}),$("#ml_sc_editoverlay #ml_sc_searchlistbutton").click(function(){var n=$("#ml_sc_editoverlay #ml_sc_searchlist").val();n.length==0?(alert(translate("enterSearchCriteria")),$("#ml_sc_editoverlay #ml_sc_searchlist").focus()):MLManager.searchSourceList()}),$("#ml_sc_editoverlay #ml_sc_searchlist").keyup(function(n){n.keyCode=="13"&&$("#ml_sc_editoverlay #ml_sc_searchlistbutton").trigger("click")}),$("#ml_sc_editoverlay .btn").hover(function(){$(this).toggleClass("over")}),$("#ml_sc_editoverlay").draggable({handle:".overlayheader"}));i=$("#scMnu li a[code *='"+n+"']").html();r=translate("prefixForGroupItem");i.indexOf(r)==0&&(i=i.substring(r.length+1));$("#ml_sc_editoverlay #ml_sc_createlist").val(i);$("#ml_sc_editoverlay #ml_sc_createlist").attr("listid",n);$("#ml_sc_editoverlay #ml_sc_renamelist, #ml_sc_deletelist").removeClass("overlaylinkdisable");$("#ml_sc_editoverlay #ml_sc_selected_list").html("");$("#ml_sc_editoverlay #ml_sc_list").html("");$("#ml_sc_editoverlay #ml_sc_searchlist").val("");MLManager.selectedSources=[];$("#scCatOverlay option[value='1']").attr("selected","selected");$("#ml_sc_editoverlay").overlay({background:!0,closeOnEsc:!0});MLManager.fetchSourceListItems()},updateSourceList:function(){return MLManager.updateSourceListDeleteGroupItemsService(),!1},updateSourceListDeleteGroupItemsService:function(){for(var o,i,r,f=$("#ml_sc_overlay #ml_sc_createlist").attr("listid"),t="",e=!1,u=jQuery.grep(MLManager.selectedSources,function(n){return n.bool.toLowerCase()=="or"&&n.removed===!0&&n.sItem=="y"}),n=0;n<u.length;n++)t+="iType=sc&rType=8&listId="+f+"&query="+u[n].id+"&pType="+GetTranslateSourceText(u[n].type),t+=n<u.length-1?",":"",e=!0;for(o="",i=jQuery.grep(MLManager.selectedSources,function(n){return n.bool.toLowerCase()=="not"&&n.removed===!0&&n.sItem=="y"}),n=0;n<i.length;n++)e&&(t+=",",e=!1),t+="iType=sc&rType=8&listId="+f+"&query="+i[n].id+"&pType="+GetTranslateSourceText(i[n].type),t+=n<i.length-1?",":"";return r=new RequestContext("factiva.com.ui.services.SourcesService",null,null,MLManager.uSLDGroupISSuccess,MLManager.handleError),r.Add("rType","DeleteGroupItems"),r.Add("listid",f),r.Add("dIArr",t),r.Send(),!1},uSLDGroupISSuccess:function(){return progressIndicator.display(translate("savingList"),!1,!1,!0),MLManager.updateSourceListDeleteItemsService(),!1},updateSourceListDeleteItemsService:function(){for(var i,f,u,t,o=$("#ml_sc_overlay #ml_sc_createlist").attr("listid"),r="",e=jQuery.grep(MLManager.selectedSources,function(n){return n.bool.toLowerCase()=="or"&&n.removed===!0&&n.sItem!="y"}),n=0;n<e.length;n++)u=e[n],r+=u.value,r+=n<e.length-1?",":"";for(i="",f=jQuery.grep(MLManager.selectedSources,function(n){return n.bool.toLowerCase()=="not"&&n.removed===!0&&n.sItem!="y"}),n=0;n<f.length;n++)u=f[n],i+=u.value,i+=n<f.length-1?",":"";return t=new RequestContext("factiva.com.ui.services.SourcesService",null,null,MLManager.updateSourceListDeleteItemsSuccess,MLManager.handleError),t.Add("rType","DeleteListItems"),t.Add("listid",o),r.length>0&&t.Add("scs","["+r+"]"),i.length>0&&t.Add("xsc","["+i+"]"),t.Send(),!1},deleteGroupItem:function(n){var t=new RequestContext(_MslService,null,null,MLManager.SrcCallBack1,MLManager.handleError);return t=MLManager.AddNvp(t,n),t.Send(),!1},AddNvp:function(n,t){var r,i,u;if(t&&n)for(r=t.split("&"),i=0;i<r.length;i++)u=r[i].split("="),n.Add(u[0],u[1]);return n},SrcCallBack1:function(){return!1},updateSourceListDeleteItemsSuccess:function(){return MLManager.updateSourceListAddItemsService(),!1},updateSourceListAddItemsService:function(){for(var i,f,u,t,o=$("#ml_sc_overlay #ml_sc_createlist").attr("listid"),r="",e=jQuery.grep(MLManager.selectedSources,function(n){return n.bool.toLowerCase()=="or"&&!n.removed==!0}),n=0;n<e.length;n++)u=e[n],r+=u.value,r+=n<e.length-1?",":"";for(i="",f=jQuery.grep(MLManager.selectedSources,function(n){return n.bool.toLowerCase()=="not"&&!n.removed==!0}),n=0;n<f.length;n++)u=f[n],i+=u.value,i+=n<f.length-1?",":"";return t=new RequestContext("factiva.com.ui.services.SourcesService",null,null,MLManager.updateSourceListAddItemsSuccess,MLManager.handleError),t.Add("rType","AddToList"),t.Add("listid",o),r.length>0&&t.Add("scs","["+r+"]"),i.length>0&&t.Add("xsc","["+i+"]"),t.Send(),!1},updateSourceListAddItemsSuccess:function(){return progressIndicator.hide(2e3),tabs[0].className="pnlTabOpen",setPnlDsply(tabs[0].pnl,!1),setTimeout(function(){$().overlay.hide("#ml_sc_overlay")},3e3),!1},fetchSourceListItems:function(){return MLManager.fetchSourceListItemsService(),!1},fetchSourceListItemsService:function(){var t=$("#ml_sc_overlay #ml_sc_createlist").attr("listid"),n;return progressIndicator.display(translate("fetchingSources")),n=new RequestContext("factiva.com.ui.services.SourcesService",null,null,MLManager.fetchSourceListItemsSuccess,MLManager.handleError),n.Add("rType","GetOneList"),n.Add("listid",t),n.Send(),!1},sourceItem:function(){this.id=null;this.bool=null;this.desc=null;this.value=null;this.state=null;this.removed=null;this.type=null;this.sItem=null;this.GetIcon=function(){return this.desc&&this.desc.indexOf("<span")>-1?"":GetTranslateSourceType(this.type)}},addSourceItem:function(n){MLManager.selectedSources.push(n)},removeAllOredCurrentType:function(n){for(var i=jQuery.grep(MLManager.selectedSources,function(t){return t.removed!=!0&&t.type==n&&t.bool!="not"}),t=0,t=0;t<i.length;t++)MLManager.removeSourceItemF(i[t].id.toLowerCase())},isSelectedSourceAllForType:function(n){for(var i=jQuery.grep(MLManager.selectedSources,function(n){return n.removed!=!0}),t=0,t=0;t<i.length;t++)if(i[t].id.toLowerCase()==MLManager.GetSourceAllTypeId(n))return!0;return!1},GetSourceAllTypeId:function(n){var t="";switch(n){case"p":t="p|";break;case"w":t="w|";break;case"i":t="i|";break;case"m":t="m|";break;case"b":t="b|";break;case"o":t="o|";break;case"t":t="t|"}return t.toLowerCase()},isSelectedSourceItem:function(n){for(var i=jQuery.grep(MLManager.selectedSources,function(n){return n.removed!=!0}),t=0,t=0;t<i.length;t++)if(i[t].id.toLowerCase()==n.toLowerCase())return!0;return!1},removeSourceItemF:function(n){for(var t=0,t=0;t<MLManager.selectedSources.length;t++)MLManager.selectedSources[t].id.toLowerCase()==n.toLowerCase()&&(dClick==1?(dClick=0,MLManager.selectedSources[t].state=="old"?MLManager.selectedSources[t].desc==translate("publication")+": "+translate("allPublications")||MLManager.selectedSources[t].desc==translate("multimedia")+": "+translate("allMultimedia")||MLManager.selectedSources[t].desc==translate("webSite")+": "+translate("allWebSites")||MLManager.selectedSources[t].desc==translate("picture")+": "+translate("allPictures")||MLManager.selectedSources[t].desc==translate("blogs")+": "+translate("allBlogs")||MLManager.selectedSources[t].desc==translate("boards")+": "+translate("allBoards")||MLManager.selectedSources[t].desc==translate("internal")+": "+translate("allCustDocs")||(MLManager.selectedSources[t].bool="not",MLManager.selectedSources[t].removed=!MLManager.selectedSources[t].removed):MLManager.selectedSources.splice(t,1)):MLManager.selectedSources[t].state=="old"?MLManager.selectedSources[t].desc==translate("publication")+": "+translate("allPublications")||MLManager.selectedSources[t].desc==translate("multimedia")+": "+translate("allMultimedia")||MLManager.selectedSources[t].desc==translate("webSite")+": "+translate("allWebSites")||MLManager.selectedSources[t].desc==translate("picture")+": "+translate("allPictures")||MLManager.selectedSources[t].desc==translate("blogs")+": "+translate("allBlogs")||MLManager.selectedSources[t].desc==translate("boards")+": "+translate("allBoards")||MLManager.selectedSources[t].desc==translate("internal")+": "+translate("allCustDocs")||(MLManager.selectedSources[t].bool="or",MLManager.selectedSources[t].removed=!0,MLManager.setMnuItemDsplyML("#ml_sc_list")):MLManager.selectedSources[t].desc==translate("publication")+": "+translate("allPublications")||MLManager.selectedSources[t].desc==translate("multimedia")+": "+translate("allMultimedia")||MLManager.selectedSources[t].desc==translate("webSite")+": "+translate("allWebSites")||MLManager.selectedSources[t].desc==translate("picture")+": "+translate("allPictures")||MLManager.selectedSources[t].desc==translate("blogs")+": "+translate("allBlogs")||MLManager.selectedSources[t].desc==translate("boards")+": "+translate("allBoards")||MLManager.selectedSources[t].desc==translate("internal")+": "+translate("allCustDocs")||(MLManager.selectedSources.splice(t,1),MLManager.removeMnuItemDsplyML("#ml_sc_list",n)))},removeSourceItem:function(n){for(var t=0,t=0;t<MLManager.selectedSources.length;t++)MLManager.selectedSources[t].id.toLowerCase()==n.toLowerCase()&&(dClick==1?(dClick=0,MLManager.selectedSources[t].state=="old"?MLManager.selectedSources[t].desc==translate("publication")+": "+translate("allPublications")||MLManager.selectedSources[t].desc==translate("multimedia")+": "+translate("allMultimedia")||MLManager.selectedSources[t].desc==translate("webSite")+": "+translate("allWebSites")||MLManager.selectedSources[t].desc==translate("picture")+": "+translate("allPictures")||MLManager.selectedSources[t].desc==translate("Blogs")+": "+translate("allBlogs")||MLManager.selectedSources[t].desc==translate("boards")+": "+translate("allBoards")||MLManager.selectedSources[t].desc==translate("internal")+": "+translate("allCustDocs")||(MLManager.selectedSources[t].bool="not",MLManager.selectedSources[t].removed=!MLManager.selectedSources[t].removed):(MLManager.selectedSources.splice(t,1),MLManager.removeMnuItemDsplyML("#ml_sc_list",n))):MLManager.selectedSources[t].state=="old"?MLManager.selectedSources[t].desc==translate("publication")+": "+translate("allPublications")||MLManager.selectedSources[t].desc==translate("multimedia")+": "+translate("allMultimedia")||MLManager.selectedSources[t].desc==translate("webSite")+": "+translate("allWebSites")||MLManager.selectedSources[t].desc==translate("picture")+": "+translate("allPictures")||MLManager.selectedSources[t].desc==translate("Blogs")+": "+translate("allBlogs")||MLManager.selectedSources[t].desc==translate("boards")+": "+translate("allBoards")||MLManager.selectedSources[t].desc==translate("internal")+": "+translate("allCustDocs")||(MLManager.selectedSources[t].bool="or",MLManager.selectedSources[t].removed=!MLManager.selectedSources[t].removed,MLManager.setMnuItemDsplyML("#ml_sc_list")):MLManager.selectedSources[t].desc==translate("publication")+": "+translate("allPublications")||MLManager.selectedSources[t].desc==translate("multimedia")+": "+translate("allMultimedia")||MLManager.selectedSources[t].desc==translate("webSite")+": "+translate("allWebSites")||MLManager.selectedSources[t].desc==translate("picture")+": "+translate("allPictures")||MLManager.selectedSources[t].desc==translate("Blogs")+": "+translate("allBlogs")||MLManager.selectedSources[t].desc==translate("boards")+": "+translate("allBoards")||MLManager.selectedSources[t].desc==translate("internal")+": "+translate("allCustDocs")||(MLManager.selectedSources.splice(t,1),MLManager.removeMnuItemDsplyML("#ml_sc_list",n)))},removeSourceItemSouF:function(n){for(var t=0,t=0;t<MLManager.selectedSources.length;t++)MLManager.selectedSources[t].id.toLowerCase()==n.toLowerCase()&&(dClick==1?MLManager.selectedSources[t].state=="old"?MLManager.selectedSources[t].desc==translate("publication")+": "+translate("allPublications")||MLManager.selectedSources[t].desc==translate("multimedia")+": "+translate("allMultimedia")||MLManager.selectedSources[t].desc==translate("webSite")+": "+translate("allWebSites")||MLManager.selectedSources[t].desc==translate("picture")+": "+translate("allPictures")||MLManager.selectedSources[t].desc==translate("Blogs")+": "+translate("allBlogs")||MLManager.selectedSources[t].desc==translate("boards")+": "+translate("allBoards")||MLManager.selectedSources[t].desc==translate("internal")+": "+translate("allCustDocs")||(MLManager.selectedSources[t].bool="not",MLManager.selectedSources[t].removed=!MLManager.selectedSources[t].removed):MLManager.selectedSources.splice(t,1):MLManager.selectedSources[t].state=="old"?(MLManager.selectedSources[t].bool="or",MLManager.selectedSources[t].removed=!0,MLManager.setMnuItemDsplyML("#ml_sc_list")):(MLManager.selectedSources.splice(t,1),MLManager.removeMnuItemDsplyML("#ml_sc_list",n)))},removeSourceItemSou:function(n){for(var t=0,t=0;t<MLManager.selectedSources.length;t++)MLManager.selectedSources[t].id.toLowerCase()==n.toLowerCase()&&(dClick==1?MLManager.selectedSources[t].state=="old"?MLManager.selectedSources[t].desc==translate("publication")+": "+translate("allPublications")||MLManager.selectedSources[t].desc==translate("multimedia")+": "+translate("allMultimedia")||MLManager.selectedSources[t].desc==translate("webSite")+": "+translate("allWebSites")||MLManager.selectedSources[t].desc==translate("picture")+": "+translate("allPictures")||MLManager.selectedSources[t].desc==translate("Blogs")+": "+translate("allBlogs")||MLManager.selectedSources[t].desc==translate("boards")+": "+translate("allBoards")||MLManager.selectedSources[t].desc==translate("internal")+": "+translate("allCustDocs")||(MLManager.selectedSources[t].bool="not",MLManager.selectedSources[t].removed=!MLManager.selectedSources[t].removed):MLManager.selectedSources.splice(t,1):MLManager.selectedSources[t].state=="old"?(MLManager.selectedSources[t].bool="or",MLManager.selectedSources[t].removed=!MLManager.selectedSources[t].removed,MLManager.setMnuItemDsplyML("#ml_sc_list")):(MLManager.selectedSources.splice(t,1),MLManager.removeMnuItemDsplyML("#ml_sc_list",n)))},updateSourceItem:function(n,t){for(var i=0,i=0;i<MLManager.selectedSources.length;i++)MLManager.selectedSources[i].id.toLowerCase()==n.toLowerCase()&&(MLManager.selectedSources[i].bool=t)},checkSourceItems:function(){MLManager.checkSourceItemsByType(null)},checkSourceItemsByType:function(){for(var r=jQuery.grep(MLManager.selectedSources,function(n){return n.removed!=!0&&n.bool!="not"}),t="p|w|i|m|b|o|t|u".split("|"),n=0;n<t.length;n++){var i=t[n],u=jQuery.grep(r,function(n){return n.type==i}),f=jQuery.grep(u,function(n){return n.id.indexOf("|")==-1});f.length>0&&MLManager.RemoveAllPredefineTopSources(i)}!MLManager.IsIncludedSources()&&MLManager.IsExcludedSources()||MLManager.IsUnkownCategorySourceExist()&&MLManager.RemoveAllPredefineTopSources(null)},IsIncludedSources:function(){var n=jQuery.grep(MLManager.selectedSources,function(n){return n.removed!=!0&&n.bool!="not"});return n.length>0},IsExcludedSources:function(){var n=jQuery.grep(MLManager.selectedSources,function(n){return n.removed!=!0&&n.bool=="not"});return n.length>0},IsUnkownCategorySourceExist:function(){var n=jQuery.grep(MLManager.selectedSources,function(n){return n.removed!=!0}),t;if(n&&n.length>0)for(t=0;t<n.length;t++)if(n[t].bool!="not"&&n[t].type=="u"&&n[t].id&&n[t].id.indexOf("|")==-1)return!0;return!1},RemoveAllPredefineTopSources:function(n){return},RemovePredefineTopSourcesByItems:function(n){var i,t;if(n&&n.length>0){for(i=[],t=0;t<n.length;t++)n[t].id.indexOf("|")>-1&&i.push(n[t].id);for(t=0;t<i.length;t++)MLManager.removeSourceItem(i[t])}},fetchSourceListItemsSuccess:function(n){var e=parseJSON(n.Text),u,i;if(e==null)return!1;var f=e.listItemDTO,o=f.sourceList,r=0,t=null;for((f.isAccountItem||f.grop)&&$("#ml_sc_createlist").val(f.name),u=["publication","website","multimedia","picture","blogs","boards","Internal","Unknown"],r=0;r<u.length;r++)if(i=o[u[r]].include,i)for(intCount=0;intCount<i.length;intCount++)t=new MLManager.sourceItem,i[intCount].groupCode!=null?(t.id=i[intCount].groupCode,t.value=i[intCount].sourceName,t.bool="or",t.type=GetSourceTypeX(u[r]),t.desc=i[intCount].groupName,t.sItem="y"):(t.id=i[intCount].sourceCode,t.value=i[intCount].sourceName,t.bool="or",t.type=GetSourceTypeLST(i[intCount].type),t.desc=i[intCount].listName==null?GetTranslateSourceValueType(t.type):i[intCount].listName,t.sItem="n"),t.state="old",MLManager.addSourceItem(t);for(r=0;r<u.length;r++)if(i=o[u[r]].exclude,i)for(intCount=0;intCount<i.length;intCount++)t=new MLManager.sourceItem,i[intCount].groupCode!=null?(t.id=i[intCount].groupCode,t.type=GetSourceTypeX(u[r]),t.desc=i[intCount].groupName,t.bool="not",t.value=i[intCount].sourceName,t.sItem="y"):(t.id=i[intCount].sourceCode,t.bool="not",t.type=GetSourceTypeLST(i[intCount].type),t.value=i[intCount].sourceName,t.desc=i[intCount].listName==null?GetTranslateSourceValueType(t.type):GetTranslateSourceType(t.type)+i[intCount].listName,t.sItem="n"),t.state="old",MLManager.addSourceItem(t);$("#ml_sc_createlist").val(f.name);MLManager.renderSourcePills();progressIndicator.hide(500)},renderSourcePills:function(){var e=!1,f=0,n=[],r,u,t,i;if(MLManager.checkSourceItems(),n[n.length]='<div class="searchBuilderFilters">',n[n.length]='    <ul class="DJIIFilterList">',r=jQuery.grep(MLManager.selectedSources,function(n){return n.bool.toLowerCase()=="or"&&n.removed!==!0}),u=jQuery.grep(MLManager.selectedSources,function(n){return n.bool.toLowerCase()=="not"&&n.removed!==!0}),r!=null&&r.length>0)for(t=0;t<r.length;t++)i=r[t],n[n.length]='        <li class="connectionAndPillWrap">',(t>0||e)&&(n[n.length]='            <span class="filterConnection">',n[n.length]='                <span class="connectionText connectionTextOr">'+translate("orLabel")+"<\/span>",n[n.length]="            <\/span>"),n[n.length]='            <div class="filterPillWrap" sequence="'+f+'" mode="or" id="'+i.id+'">',n[n.length]='                <div class="pill" style="cursor: pointer">',n[n.length]='                    <span class="filterText">'+i.GetIcon()+i.desc+"<\/span>",n[n.length]="                <\/div>",n[n.length]="            <\/div>",n[n.length]="        <\/li>",e=!0,f++;if(u!=null&&u.length>0)for(t=0;t<u.length;t++)i=u[t],n[n.length]='        <li class="connectionAndPillWrap">',n[n.length]='            <span class="filterConnection">',n[n.length]='                <span class="connectionText connectionTextNot">'+translate("notLabel")+"<\/span>",n[n.length]="            <\/span>",n[n.length]='            <div class="filterPillWrap" sequence="'+f+'" mode="not" id="'+i.id+'">',n[n.length]='                <div class="pill" style="cursor: pointer">',n[n.length]='                    <span class="filterText">'+i.GetIcon()+i.desc+"<\/span>",n[n.length]="                <\/div>",n[n.length]="            <\/div>",n[n.length]="        <\/li>",e=!0,f++;n[n.length]="    <\/ul>";n[n.length]="<\/div>";$("#ml_sc_editoverlay").length&&$("#ml_sc_editoverlay #ml_sc_selected_list").html(n.join(""));$("#ml_sc_createoverlay").length&&$("#ml_sc_createoverlay #ml_sc_selected_list").html(n.join(""));$("#ml_sc_overlay").length&&$("#ml_sc_overlay #ml_sc_selected_list").html(n.join(""));MLManager.renderContextMenu("sc");MLManager.setMnuItemDsplyML("#ml_sc_list")},renderContextMenu:function(n){$("#ml_pillscontextmenu").length==0&&$(document.body).append('<div id="ml_pillscontextmenu" class="overlaypillscontextmenu"><\/div>');var t=MLManager.getMaxZIndex();$("#ml_pillscontextmenu").css("z-index",t+1);$("#ml_"+n+"_selected_list .filterPillWrap").mouseout(function(){setTimeout(function(){MLManager.hideContextMnu()},800);MLManager.contextMnuSelected=!1});$("#ml_"+n+"_selected_list .filterPillWrap").mouseover(function(){MLManager.contextMnuSelected=!0});$("#ml_"+n+"_selected_list .filterPillWrap").click(function(){var e=$(this).attr("companyid"),t=[];t[t.length]='<div class="pillOptionsList">';var o=$(this).attr("sequence"),s=$(this).attr("type"),u=$(this).attr("id"),f=$(this).text().trim(),h=GetSourceStr(u.split("|")[0]);if(n=="sc")switch($(this).attr("mode")){case"not":t[t.length]='     <div style="cursor: pointer" pilloption="Or" class="pillOption or" id="'+$(this).attr("id")+'" type="'+n+'"><span>'+translate("orLabel")+"<\/span><\/div>";break;case"or":t[t.length]='     <div style="cursor: pointer" pilloption="Not" class="pillOption not" id="'+$(this).attr("id")+'" type="'+n+'"><span>'+translate("notLabel")+"<\/span><\/div>"}t[t.length]='     <div style="cursor: pointer" pilloption="Remove" class="pillOption remove" Lup="'+f+'"  id="'+$(this).attr("id")+'" type="'+n+'"><span>'+translate("removeLabel")+"<\/span><\/div>";t[t.length]="<\/div>";$("#ml_pillscontextmenu").html(t.join(""));$("#ml_pillscontextmenu .pillOption").hover(function(){$(this).toggleClass("pillOptionOver")},function(){$(this).toggleClass("pillOptionOver")});$("#ml_pillscontextmenu .pillOption").each(function(){var t=$(this).attr("type"),n=$(this).attr("id"),i=$(this).attr("Lup"),r;$(this).click(function(){$("#ml_pillscontextmenu").css("display","none");switch($(this).attr("pilloption")){case"Remove":t=="co"&&MLManager.removeCompanyItem(n);t=="sc"&&(i?IsSourceVariables(i)?MLManager.removeSourceItemSou(n):MLManager.removeSourceItem(n):MLManager.removeSourceItem(n));break;case"Or":t=="sc"&&(MLManager.updateSourceItem(n,"or"),MLManager.isSelectedSourceAllForType(MLManager.getItemType(n))&&!MLManager.nutralSourceTypePresent(MLManager.getItemType(n))&&MLManager.removeSourceItemSouF(MLManager.GetSourceAllTypeId(MLManager.getItemType(n))));break;case"Not":t=="sc"&&MLManager.updateSourceItem(n,"not")}t=="co"&&MLManager.renderCompanyPills();t=="sc"&&MLManager.renderSourcePills()});r=MLManager.getMaxZIndex();$("#ml_pillscontextmenu").css("z-index",r+1)});var i=$("#ml_pillscontextmenu"),r=$(this).offset();i.css({top:r.top+20,left:r.left+$(this).width()-$(i).width(),display:"block"});i.mouseover(function(){MLManager.contextMnuSelected=!0});i.mouseout(function(){setTimeout(function(){MLManager.hideContextMnu()},800);MLManager.contextMnuSelected=!1})})},getItemType:function(n){var t=jQuery.grep(MLManager.selectedSources,function(n){return n.removed!=!0});for(intCount=0;intCount<t.length;intCount++)if(t[intCount].id.toLowerCase()==n.toLowerCase())return t[intCount].type},nutralSourceTypePresent:function(n){var t=jQuery.grep(MLManager.selectedSources,function(n){return n.removed!=!0});for(intCount=0;intCount<t.length;intCount++)if(t[intCount].desc.trim()==GetTranslateSourceValueType(n))return!0},removeMnuItemDsplyML:function(n,t){$.each($(n).find("a[code]"),function(n,i){var r=i.getAttribute("code"),e=r.split("_")[0],o=MLManager.selectedSources,u=r.toLowerCase(),f=u.split("_")[2];f==t.toLowerCase()&&(i.className="mnuItm")})},removeMnuItemDsplyMLCo:function(n,t){$.each($("#ml_co_list #d1cnt").find(".mnuItmInc"),function(n,i){var r=$(i).closest("div").attr("id"),f=MLManager.selectedCompanies,u=r.toLowerCase();u==t.toLowerCase()&&(i.className="lf")})},setMnuItemDsplyML:function(n){$.each($(n).find("a[code]"),function(n,t){for(var r=t.getAttribute("code"),u=r.split("_")[0],f,e,i=u=="sl"||u=="sc"?MLManager.selectedSources:MLManager.selectedCompanies,n=0;n<i.length;n++)f=r.toLowerCase(),e=f.split("_")[2],e==i[n].id.toLowerCase()&&(t.className=i[n].removed==!0?"mnuItm":i[n].bool=="not"?"mnuItmExc":"mnuItmInc")})},setMnuItemDsplyMLCo:function(n){$.each($(n).find(".lf, .mnuItmInc, .mnuItmExc"),function(n,t){for(var r,u=$(t).closest("div").attr("id"),i=MLManager.selectedCompanies,n=0;n<i.length;n++)r=u.toLowerCase(),r==i[n].id.toLowerCase()&&(t.className=i[n].removed==!0?"lf":i[n].bool=="not"?"mnuItmExc":"mnuItmInc")})},renameSourceList:function(){return MLManager.renameSourceListService(),!1},renameSourceListService:function(){progressIndicator.display(translate("renamingList"),!1,!1,!0);var t=$("#ml_sc_overlay #ml_sc_createlist").val(),i=$("#ml_sc_overlay #ml_sc_createlist").attr("listid"),n=new RequestContext("factiva.com.ui.services.SourcesService",null,null,$.proxy(MLManager.renameSourceListSuccess,this,i,t),MLManager.handleError);return hasIllegalChar2(t)?(progressIndicator.hide(500),alert(translate("illegalChar-1")+" (<, >, &, #, \\, %, +, |, ~) "+translate("illegalChar-2")),!1):(n.Add("rType","RenameList"),n.Add("listid",i),n.Add("listName",t),n.Send(),!1)},renameSourceListSuccess:function(n,t,i){return MLManager.fetchSourceListsSuccess(i),listItm_update("sl","sl_"+n,t),tabs[0].className="pnlTabOpen",setPnlDsply(tabs[0].pnl,!1),progressIndicator.hide(500),!1},removeSourceList:function(){$().confirmDialog({msg:translate("confirmDeleteItem"),yesClickHandler:MLManager.removeSourceListService,yesClickParams:arguments})},removeSourceListService:function(n){progressIndicator.display(translate("deletingList"),!1,!1,!0);var t=new RequestContext("factiva.com.ui.services.SourcesService",null,null,$.proxy(MLManager.removeSourceListSuccess,this,n),MLManager.handleError);return t.Add("rType","DeleteList"),t.Add("listid",n),t.Send(),!1},removeSourceListSuccess:function(n,t){return MLManager.fetchSourceListsSuccess(t),progressIndicator.hide(500),tabs[0].className="pnlTabOpen",lstItm_click("sl","sl_"+n),setPnlDsply(tabs[0].pnl,!1),setTimeout(function(){$().overlay.hide("#ml_sc_overlay")},800),!1},fetchCompanyListsService:function(){progressIndicator.display(translate("fetchingCompanyLists"),!1,!1,!0);var n=new RequestContext("factiva.com.ui.services.CompaniesService",null,null,MLManager.fetchCompanyListsSuccess,MLManager.handleError);return n.Send(),!1},fetchCompanyListsSuccess:function(n){var f=parseJSON(n.Text),i,r;if(f==null)return!1;var o=f.savedCompanyListItemDTO,e=f.savedCompanyListViewDTO,u=e.personal,t=[];if(u)for(i=0;i<u.item.length;i++)t[t.length]='         <tr class="css_ml_row">',t[t.length]='             <td><div id="ml_co_item_'+u.item[i].id+'" class="css_ml_cell css_ml_text">'+u.item[i].name+"<\/div><\/td>",t[t.length]='             <td><div id="" class="css_ml_cell css_ml_text">'+translate("listPersonalType")+"<\/div><\/td>",t[t.length]='             <td><div id="" class="css_ml_cell css_ml_cell_last"><span listid="'+u.item[i].id+'" class="css_ml_link edit">Edit<\/span><span class="css_ml_separator">|<\/span><span listid="'+u.item[i].id+'" class="css_ml_link delete">Delete<\/span><\/div><\/td>',t[t.length]="         <\/tr>";if(r=e.group,r)for(i=0;i<r.item.length;i++)t[t.length]='         <tr class="css_ml_row">',t[t.length]='             <td><div id="ml_co_item_'+r.item[i].id+'" class="css_ml_cell css_ml_text">'+r.item[i].name+"<\/div><\/td>",t[t.length]='             <td><div class="css_ml_cell css_ml_text">'+translate("listGroupType")+"<\/div><\/td>",t[t.length]='             <td><div class="css_ml_cell css_ml_cell_last"><span listid="'+r.item[i].id+'" class="css_ml_link edit">Edit<\/span><span class="css_ml_separator">|<\/span><span listid="'+r.item[i].id+'" class="css_ml_link delete">Delete<\/span><\/div><\/td>',t[t.length]="         <\/tr>";$("#ml_co_table2").attr("hasdata","1");$("#ml_co_table2").find("tr:gt(0)").remove();$("#ml_co_table2 tbody").append(t.join(""));$(".css_ml_row").hover(function(){$(this).toggleClass("css_ml_row_hover")});$("#ml_co_table2 .css_ml_link").bind("click",function(){var n=$(this).attr("listid");$(this).hasClass("edit")&&MLManager.editCompanyListOverlay(n);$(this).hasClass("delete")&&MLManager.removeCompanyList(n)});progressIndicator.hide(500)},searchCompanyList:function(){return ajxlookupLs("c"),!1},searchCompanyListService:function(){var t,i,n;return progressIndicator.display(translate("searchingList"),!1,!1,!0),$("#ml_co_editoverlay").length&&(t=$("#ml_co_editoverlay #ml_co_searchlist").val(),i=$('#ml_co_editoverlay #ml_co_searchnameonly option[selected="selected"]').attr("Value")),n=new RequestContext(_ClService,null,null,MLManager.searchCompanyListSuccess,MLManager.handleError),n.Add("rtype","Lookup"),n.Add("query",t),n.Add("scheme",i),n.Add("iit",""),n.Send(),!1},searchCompanyListSuccess:function(n){var t=n.Text;return t&&$("#ml_co_editoverlay").length&&($("#ml_co_editoverlay #ml_co_list").html(t),$("#ml_co_editoverlay .lookupdyn").hide()),MLManager.setMnuItemDsplyML("#ml_co_list"),progressIndicator.hide(500),!1},createCompanyList:function(){return MLManager.createCompanyListService(),!1},createCompanyListService:function(){var u=$("#ml_co_createlist").val(),e=$("#ml_co_createlistgroup").is(":checked"),i,r,t,f,n;if(progressIndicator.display(translate("creatingList"),!1,!1,!0),hasIllegalChar2(u))return progressIndicator.hide(500),alert(translate("illegalChar-1")+" (<, >, &, #, \\, %, +, |, ~) "+translate("illegalChar-2")),!1;for(i="",r=jQuery.grep(MLManager.selectedCompanies,function(n){return n.removed!==!0}),t=0;t<r.length;t++)f=r[t],i+=f.id+"_";return n=new RequestContext("factiva.com.ui.services.CompaniesService",null,null,MLManager.createCompanyListSuccess,MLManager.handleError),n.Add("rType","AddNewList"),n.Add("listName",u),n.Add("accountItem",e),n.Add("arraycodes",i),n.Send(),!1},createCompanyListSuccess:function(n){var i,t;for(MLManager.fetchCompanyListsSuccess(n),$("#ml_co_createlist").val(""),$("#ml_co_createlistgroup").attr("checked",!1),i=GetOperator("cop"),t=0;t<tabs.length;t++)$(tabs[t]).text().trim()==translate("companyLabel")&&(tabs[t].className="pnlTabOpen",setPnlDsply(tabs[t].pnl,!1));return progressIndicator.hide(500),!1},fetchAuthorListsService:function(){progressIndicator.display(translate("fetchingAuthorLists"),!1,!1,!0);var n=new RequestContext("factiva.com.ui.services.AuthorsService",null,null,MLManager.fetchAuthorListsSuccess,MLManager.handleError);return n.Send(),!1},fetchAuthorListsSuccess:function(n){var f=parseJSON(n.Text),i,r;if(f==null)return!1;var o=f.savedAuthorListItemDTO,e=f.savedAuthorListViewDTO,u=e.personal,t=[];if(u)for(i=0;i<u.item.length;i++)t[t.length]='         <tr class="css_ml_row">',t[t.length]='             <td><div id="ml_au_item_'+u.item[i].id+'" class="css_ml_cell css_ml_text">'+u.item[i].name+"<\/div><\/td>",t[t.length]='             <td><div id="" class="css_ml_cell css_ml_text">'+translate("listPersonalType")+"<\/div><\/td>",t[t.length]='             <td><div id="" class="css_ml_cell css_ml_cell_last"><span listid="'+u.item[i].id+'" class="css_ml_link edit">Edit<\/span><span class="css_ml_separator">|<\/span><span listid="'+u.item[i].id+'" class="css_ml_link delete">Delete<\/span><\/div><\/td>',t[t.length]="         <\/tr>";if(r=e.group,r)for(i=0;i<r.item.length;i++)t[t.length]='         <tr class="css_ml_row">',t[t.length]='             <td><div id="ml_au_item_'+r.item[i].id+'" class="css_ml_cell css_ml_text">'+r.item[i].name+"<\/div><\/td>",t[t.length]='             <td><div class="css_ml_cell css_ml_text">'+translate("listGroupType")+"<\/div><\/td>",t[t.length]='             <td><div class="css_ml_cell css_ml_cell_last"><span listid="'+r.item[i].id+'" class="css_ml_link edit">Edit<\/span><span class="css_ml_separator">|<\/span><span listid="'+r.item[i].id+'" class="css_ml_link delete">Delete<\/span><\/div><\/td>',t[t.length]="         <\/tr>";$("#ml_au_table2").attr("hasdata","1");$("#ml_au_table2").find("tr:gt(0)").remove();$("#ml_au_table2 tbody").append(t.join(""));$(".css_ml_row").hover(function(){$(this).toggleClass("css_ml_row_hover")});$("#ml_au_table2 .css_ml_link").bind("click",function(){var n=$(this).attr("listid");$(this).hasClass("edit")&&MLManager.editAuthorListOverlay(n);$(this).hasClass("delete")&&MLManager.removeAuthorList(n)});progressIndicator.hide(500)},removeAuthorList:function(){$().confirmDialog({msg:translate("confirmDeleteItem"),yesClickHandler:MLManager.removeAuthorListService,yesClickParams:arguments})},removeAuthorListService:function(n){progressIndicator.display(translate("deletingList"),!1,!1,!0);var t=new RequestContext("factiva.com.ui.services.AuthorsService",null,null,$.proxy(MLManager.removeAuthorListSuccess,this,n),MLManager.handleError);return t.Add("rType","DeleteList"),t.Add("listid",n),t.Send(),!1},removeAuthorListSuccess:function(n,t){var r,i;for(MLManager.fetchAuthorListsSuccess(t),r=GetOperator("aup"),i=0;i<tabs.length;i++)$(tabs[i]).text().trim()==translate("authorLabel")&&(tabs[i].className="pnlTabOpen",setPnlDsply(tabs[i].pnl,!1));return progressIndicator.hide(0),lstItm_click("al","al_"+n),$().overlay.hide("#ml_au_editoverlay"),!1},editAuthorListOverlay:function(n){var t,i;DJOmniture.logAuthorList("SB_SaveList_Author","Fact_RT_List_CreateEditauthorlist");$("#ml_au_editoverlay").length==0&&(t=[],t[t.length]='<div id="ml_au_editoverlay" class="overlaycontainer">',t[t.length]='    <div class="overlayclose" onclick="$().overlay.hide(\'#ml_au_editoverlay\');"><\/div>',t[t.length]='    <div class="overlayheader">'+translate("authorListEditor")+"<\/div>",t[t.length]='    <div class="overlaybody">',t[t.length]='        <div class="overlaybar">',t[t.length]='             <table border="0">',t[t.length]="                 <tr>",t[t.length]='                     <td class="overlaytitle">'+translate("listName")+"<\/td>",t[t.length]='                     <td><input type="text" maxlength = "25" class="overlaycreatelist" id="ml_au_createlist" /><\/td>',t[t.length]='                     <td><div class="overlaylink overlaylinkdisable" id="ml_au_renamelist">'+translate("rename")+"<\/div><\/td>",t[t.length]='                     <td align="center"><div class="overlaylinkdisable">|<\/div><\/td>',t[t.length]='                     <td><div class="overlaylink overlaylinkdisable" id="ml_au_deletelist">'+translate("delete")+"<\/div><\/td>",t[t.length]="                 <\/tr>",t[t.length]="             <\/table>",t[t.length]="        <\/div>",t[t.length]='        <div class="overlaybar">',t[t.length]='             <table border="0">',t[t.length]="                 <tr>",t[t.length]='                     <td><span class="overlaytextbold">'+translate("listSelectAuthors")+"<\/span>:&nbsp;"+translate("listSelectAuthorsHelper")+"<\/td>",t[t.length]="                 <\/tr>",t[t.length]="             <\/table>",t[t.length]="        <\/div>",t[t.length]='        <div class="overlaylist" id="ml_au_selected_list"><\/div>',t[t.length]='        <div class="overlaybar">',t[t.length]='             <table border="0">',t[t.length]="                 <tr>",t[t.length]='                     <td><span class="overlaytextbold">'+translate("listSearchAuthors")+"<\/span><\/td>",t[t.length]="                 <\/tr>",t[t.length]="             <\/table>",t[t.length]="        <\/div>",t[t.length]='        <div class="overlaybar">',t[t.length]='             <table border="0">',t[t.length]="                 <tr>",t[t.length]='                     <td><input type="text" maxlength="25" class="overlaycreatelist" id="ml_au_searchlist" /><\/td>',t[t.length]='                     <td><div class="overlaysearchbutton" id="ml_au_searchlistbutton"><\/div><\/td>',t[t.length]="                 <\/tr>",t[t.length]='                 <tr style="display: none;">',t[t.length]='                     <td><input type="checkbox" id="ml_au_edit_exclude_inactive_authors" />'+translate("excludeInactiveAuthors")+"<\/td>",t[t.length]="                 <\/tr>",t[t.length]="             <\/table>",t[t.length]="        <\/div>",t[t.length]='        <div class="overlaylist" id="ml_au_list"><\/div>',t[t.length]="    <\/div>",t[t.length]='    <div class="overlayfooter">',t[t.length]='        <UL class=buttons><LI class=btn><DIV class="prettyBtn primaryBtn" id="ml_au_savelist"><SPAN>'+translate("save")+"<\/SPAN><\/DIV><\/LI>",t[t.length]='        <LI class=btn><DIV class="prettyBtn secondaryBtn" onclick="$().overlay.hide(\'#ml_au_editoverlay\');"><SPAN>'+translate("cancel")+"<\/SPAN><\/DIV><\/LI><\/UL>",t[t.length]="    <\/div>",t[t.length]="<\/div>",$(document.body).append(t.join("")),$("#ml_au_editoverlay #ml_au_savelist").click(function(){$("#ml_au_editoverlay #ml_au_createlist").val().length>0?MLManager.updateAuthorList():(alert(translate("enterNewName")),$("#ml_au_editoverlay #ml_au_createlist").focus())}),$("#ml_au_editoverlay #ml_au_createlist").keyup(function(){$("#ml_au_editoverlay #ml_au_createlist").val().length==0?$("#ml_au_editoverlay #ml_au_renamelist").hasClass("overlaylinkdisable")||$("#ml_au_editoverlay #ml_au_renamelist, #ml_au_deletelist").toggleClass("overlaylinkdisable"):$("#ml_au_editoverlay #ml_au_renamelist").hasClass("overlaylinkdisable")&&$("#ml_au_editoverlay #ml_au_renamelist, #ml_au_deletelist").toggleClass("overlaylinkdisable")}),$("#ml_au_editoverlay #ml_au_renamelist").click(function(){$("#ml_au_editoverlay #ml_au_createlist").val().length>0?MLManager.renameAuthorList():(alert(translate("enterNewName")),$("#ml_au_editoverlay #ml_au_createlist").focus())}),$("#ml_au_editoverlay #ml_au_deletelist").click(function(){if($("#ml_au_editoverlay #ml_au_createlist").val().length>0){var n=$("#ml_au_editoverlay #ml_au_createlist").attr("listid",n);MLManager.removeAuthorList(n)}else alert(translate("enterNewName")),$("#ml_au_editoverlay #ml_au_createlist").focus()}),$("#ml_au_editoverlay #ml_au_searchlistbutton").click(function(){var n=$("#ml_au_editoverlay #ml_au_searchlist").val();n.length==0?(alert(translate("enterSearchCriteria")),$("#ml_au_editoverlay #ml_au_searchlist").focus()):MLManager.searchAuthorList()}),$("#ml_au_editoverlay #ml_au_searchlist").keyup(function(n){n.keyCode=="13"&&$("#ml_au_editoverlay #ml_au_searchlistbutton").trigger("click")}),$("#ml_au_editoverlay .btn").hover(function(){$(this).toggleClass("over")}),$("#ml_au_editoverlay").draggable({handle:".overlayheader"}));i=$("#auMnu li a[code *='"+n+"']").html();$("#ml_au_editoverlay #ml_au_createlist").val(i);$("#ml_au_editoverlay #ml_au_createlist").attr("listid",n);$("#ml_au_editoverlay #ml_au_renamelist, #ml_au_deletelist").removeClass("overlaylinkdisable");$("#ml_au_editoverlay #ml_au_selected_list").html("");$("#ml_au_editoverlay #ml_au_list").html("");$("#ml_au_editoverlay #ml_au_searchlist").val("");MLManager.selectedAuthors=[];$("#ml_au_editoverlay").overlay({background:!0,closeOnEsc:!0});MLManager.fetchAuthorListItems()},fetchAuthorListItems:function(){return MLManager.fetchAuthorListItemsService(),!1},fetchAuthorListItemsService:function(){var t=$("#ml_au_editoverlay #ml_au_createlist").attr("listid"),n;return progressIndicator.display(translate("fetchingAuthors")),n=new RequestContext("factiva.com.ui.services.AuthorsService",null,null,MLManager.fetchAuthorListItemsSuccess,MLManager.handleError),n.Add("rType","GetOneList"),n.Add("listid",t),n.Send(),!1},fetchAuthorListItemsSuccess:function(n){var r=parseJSON(n.Text);if(r==null)return!1;var u=r.savedAuthorListItemDTO,f=r.savedAuthorListViewDTO,i=u.author,t=null;if(i)for(intCount=0;intCount<i.length;intCount++)t=new MLManager.authorItem,t.id=i[intCount].authorCode,t.pamId=i[intCount].consolidatedId,t.name=i[intCount].name.fullName,t.state="old",MLManager.addAuthorItem(t);MLManager.renderAuthorPills();progressIndicator.hide(500)},renameAuthorList:function(){return MLManager.renameAuthorListService(),!1},renameAuthorListService:function(){var t,i,n;return(progressIndicator.display(translate("renamingList"),!1,!1,!0),t=$("#ml_au_editoverlay #ml_au_createlist").val(),i=$("#ml_au_editoverlay #ml_au_createlist").attr("listid"),hasIllegalChar2(t))?(progressIndicator.hide(500),alert(translate("illegalChar-1")+" (<, >, &, #, \\, %, +, |, ~) "+translate("illegalChar-2")),!1):(n=new RequestContext("factiva.com.ui.services.AuthorsService",null,null,$.proxy(MLManager.renameAuthorListSuccess,this,i,t),MLManager.handleError),n.Add("rType","RenameList"),n.Add("listid",i),n.Add("listName",t),n.Send(),!1)},renameAuthorListSuccess:function(n,t,i){var u,r;for(MLManager.fetchAuthorListsSuccess(i),u=GetOperator("aup"),r=0;r<tabs.length;r++)$(tabs[r]).text().trim()==translate("authorLabel")&&(tabs[r].className="pnlTabOpen",setPnlDsply(tabs[r].pnl,!1));return listItm_update("al","al_"+n,t),progressIndicator.message(translate("lstRenamedSuccess")),progressIndicator.hide(500),!1},updateAuthorList:function(){return MLManager.updateAuthorListDeleteItemsService(),!1},updateAuthorListDeleteItemsService:function(){var t,u,n;progressIndicator.display(translate("savingList"),!1,!1,!0);var f=$("#ml_au_editoverlay #ml_au_createlist").attr("listid"),i="",r=jQuery.grep(MLManager.selectedAuthors,function(n){return n.removed===!0});for(t=0;t<r.length;t++)u=r[t],i+=u.pamId+"_";return n=new RequestContext("factiva.com.ui.services.AuthorsService",null,null,MLManager.updateAuthorListDeleteItemsSuccess,MLManager.handleError),n.Add("rType","DeleteListItems"),n.Add("listid",f),n.Add("arraycodes",i),n.Send(),!1},updateAuthorListDeleteItemsSuccess:function(){return MLManager.updateAuthorListAddItemsService(),!1},updateAuthorListAddItemsService:function(){var t,r,n;progressIndicator.display(translate("savingList"),!1,!1,!0);var f=$("#ml_au_editoverlay #ml_au_createlist").attr("listid"),i="",u=jQuery.grep(MLManager.selectedAuthors,function(n){return n.removed!==!0});for(t=0;t<u.length;t++)r=u[t],r.pamId||(i+=r.id+"_");return i==""?(progressIndicator.hide(10),MLManager.updateAuthorListAddItemsSuccess(),!1):(n=new RequestContext("factiva.com.ui.services.AuthorsService",null,null,MLManager.updateAuthorListAddItemsSuccess,MLManager.handleError),n.Add("rType","AddToList"),n.Add("listid",f),n.Add("arraycodes",i),n.Send(),!1)},updateAuthorListAddItemsSuccess:function(){var t,n;for(progressIndicator.message(translate("lstSavedSuccess")),progressIndicator.hide(10),t=GetOperator("aup"),n=0;n<tabs.length;n++)$(tabs[n]).text().trim()==translate("authorLabel")&&(tabs[n].className="pnlTabOpen",setPnlDsply(tabs[n].pnl,!1));return setTimeout(function(){$().overlay.hide("#ml_au_editoverlay")},100),!1},authorItem:function(){this.id=null;this.pamId=null;this.name=null;this.state=null;this.removed=null},addAuthorItem:function(n){MLManager.selectedAuthors.push(n)},isSelectedAuthorItem:function(n){for(var t=0,t=0;t<MLManager.selectedAuthors.length;t++)if(MLManager.selectedAuthors[t].id.toLowerCase()==n.toLowerCase())return!0;return!1},updateAuthorItem:function(n,t){for(var i=0,i=0;i<MLManager.selectedAuthors.length;i++)MLManager.selectedAuthors[i].id.toLowerCase()==n.toLowerCase()&&(MLManager.selectedAuthors[i].bool=t)},addAuthorItemFromSearch:function(n){var t=$(n).attr("code"),i;MLManager.isSelectedAuthorItem(t)?MLManager.removeAuthorItem(t):(i=$(n).html(),objItem=new MLManager.authorItem,objItem.id=t,objItem.name=i,objItem.state="old",MLManager.addAuthorItem(objItem));MLManager.renderAuthorPills();MLManager.setMnuItemDsplyMLAu("#ml_au_list",t)},setMnuItemDsplyMLAu:function(n){$.each($(n).find(".lf, .mnuItmInc, .mnuItmExc, .mnuItm"),function(n,t){for(var r,u=$(t).attr("code"),i=MLManager.selectedAuthors,n=0;n<i.length;n++)r=u.toLowerCase(),r==i[n].id.toLowerCase()&&(t.className=i[n].removed==!0?"mnuItm":i[n].bool=="not"?"mnuItmExc":"mnuItmInc")})},removeMnuItemDsplyMLAu:function(n,t){$.each($("#ml_au_list #d1cnt").find(".mnuItmInc"),function(n,i){var r=$(i).closest("div").attr("id"),f=MLManager.selectedAuthors,u=r.toLowerCase();u==t.toLowerCase()&&(i.className="lf")})},removeAuthorItem:function(n){for(var t=0,t=0;t<MLManager.selectedAuthors.length;t++)MLManager.selectedAuthors[t].id.toLowerCase()==n.toLowerCase()&&(MLManager.selectedAuthors[t].state=="old"?(MLManager.selectedAuthors[t].removed=!MLManager.selectedAuthors[t].removed,MLManager.setMnuItemDsplyMLAu("#ml_au_list","T")):(MLManager.selectedAuthors.splice(t,1),MLManager.removeMnuItemDsplyMLAu("#ml_au_list",n)))},renderAuthorPills:function(){var f=!1,u=0,n=[],t,r,i;if(n[n.length]='<div class="searchBuilderFilters">',n[n.length]='    <ul class="DJIIFilterList">',t=jQuery.grep(MLManager.selectedAuthors,function(n){return n.removed!==!0}),t!=null&&t.length>0)for(r=0;r<t.length;r++)i=t[r],n[n.length]='        <li class="connectionAndPillWrap">',n[n.length]='            <div class="filterPillWrap" sequence="'+u+'" mode="or" id="'+i.id+'"  pamId="'+i.pamId+'"  onclick="MLManager.removeAuthorItem(\''+i.id+"');MLManager.renderAuthorPills();\" >",n[n.length]='                <div class="pillNoMenu" style="cursor: pointer">',n[n.length]='                    <span class="filterText">'+i.name+"<\/span>",n[n.length]="                <\/div>",n[n.length]="            <\/div>",n[n.length]="        <\/li>",f=!0,u++;n[n.length]="    <\/ul>";n[n.length]="<\/div>";$("#ml_au_editoverlay").length&&$("#ml_au_editoverlay #ml_au_selected_list").html(n.join(""));$("#ml_au_createoverlay").length&&$("#ml_au_createoverlay #ml_au_selected_list").html(n.join(""));MLManager.renderContextMenu("au");MLManager.setMnuItemDsplyML("#ml_au_list")},searchAuthorList:function(){return MLManager.searchAuthorListService(),!1},searchAuthorListService:function(){var t,i,r,n;return progressIndicator.display(translate("searchingList"),!1,!1,!0),t="",i="",$("#ml_au_editoverlay").length&&(i=$("#ml_au_editoverlay #ml_au_searchlist").val()),$("#ml_au_editoverlay").is(":visible")&&(t=$("#ml_au_edit_exclude_inactive_authors").is(":checked")),$("#ml_au_createoverlay").is(":visible")&&(t=$("#ml_au_create_exclude_inactive_authors").is(":checked")),r=navigator.appVersion.indexOf("MSIE 7.")!=-1,n=new RequestContext("factiva.com.ui.services.AuthorsService",null,null,MLManager.searchAuthorListSuccess,MLManager.handleError),n.Add("rtype","Lookup"),n.Add("query",i),n.Add("excInactiveAuthrs",t),n.Add("fromSB",!0),n.Add("isIE7",r),n.Add("scheme","Name"),n.Add("iit",""),n.Send(),!1},searchAuthorListSuccess:function(n){var f=navigator.appVersion.indexOf("MSIE 7.")!=-1,t=null,r="",i,u;return(t=f?eval("("+n.Text+")"):$.extend(!0,{},JSON.parse(n.Text)),t&&t.status&&t.status.error&&t.status.error.code=="210746")?(progressIndicator.hide(),r=t.status.error.Value,alert(r),MLManager.fetchingRSSList=!1,!1):(i=t.Text.Html,i&&$("#ml_au_editoverlay").length&&(u=$("#ml_au_editoverlay #ml_au_list").get(0),u.innerHTML=i,$("#ml_au_editoverlay .lookupdyn").hide()),MLManager.setMnuItemDsplyMLAu("#ml_au_list"),progressIndicator.hide(500),!1)},editCompanyListOverlay:function(n){var t,i;DJOmniture.logCompanyList();$("#ml_co_editoverlay").length==0&&(t=[],t[t.length]='<div id="ml_co_editoverlay" class="overlaycontainer">',t[t.length]='    <div class="overlayclose" onclick="$().overlay.hide(\'#ml_co_editoverlay\');"><\/div>',t[t.length]='    <div class="overlayheader">'+translate("companyListEditor")+"<\/div>",t[t.length]='    <div class="overlaybody">',t[t.length]='        <div class="overlaybar">',t[t.length]='             <table border="0">',t[t.length]="                 <tr>",t[t.length]='                     <td class="overlaytitle">'+translate("listName")+"<\/td>",t[t.length]='                     <td><input type="text" maxlength = "25" class="overlaycreatelist" id="ml_co_createlist" /><\/td>',t[t.length]='                     <td><div class="overlaylink overlaylinkdisable" id="ml_co_renamelist">'+translate("rename")+"<\/div><\/td>",t[t.length]='                     <td align="center"><div class="overlaylinkdisable">|<\/div><\/td>',t[t.length]='                     <td><div class="overlaylink overlaylinkdisable" id="ml_co_deletelist">'+translate("delete")+"<\/div><\/td>",t[t.length]="                 <\/tr>",t[t.length]="             <\/table>",t[t.length]="        <\/div>",t[t.length]='        <div class="overlaybar">',t[t.length]='             <table border="0">',t[t.length]="                 <tr>",t[t.length]='                     <td><span class="overlaytextbold">'+translate("listSelectCompanies")+"<\/span>:&nbsp;"+translate("listSelectCompaniesHelper")+"<\/td>",t[t.length]="                 <\/tr>",t[t.length]="             <\/table>",t[t.length]="        <\/div>",t[t.length]='        <div class="overlaylist" id="ml_co_selected_list"><\/div>',t[t.length]='        <div class="overlaybar">',t[t.length]='             <table border="0">',t[t.length]="                 <tr>",t[t.length]='                     <td><span class="overlaytextbold">'+translate("listSearchCompanies")+"<\/span><\/td>",t[t.length]="                 <\/tr>",t[t.length]="             <\/table>",t[t.length]="        <\/div>",t[t.length]='        <div class="overlaybar">',t[t.length]='             <table border="0">',t[t.length]="                 <tr>",t[t.length]='                     <td><select id="ml_co_searchnameonly" name="cs"><option selected="selected" value="Name">'+translate("companyName")+"<\/option>",t[t.length]='                          <option value="Ticker">'+translate("Ticker")+'<\/option><option value="Duns">'+translate("DUNS")+'<\/option><option value="Fcode">'+translate("Fcode")+"<\/option><\/select><\/td>",t[t.length]='                     <td><input type="text" maxlength="25" class="overlaycreatelist" id="ml_co_searchlist" /><\/td>',t[t.length]='                     <td><div class="overlaysearchbutton" id="ml_co_searchlistbutton"><\/div><\/td>',t[t.length]="                 <\/tr>",t[t.length]="             <\/table>",t[t.length]="        <\/div>",t[t.length]='        <div class="overlaylist" id="ml_co_list"><\/div>',t[t.length]="    <\/div>",t[t.length]='    <div class="overlayfooter">',t[t.length]='        <UL class=buttons><LI class=btn><DIV class="prettyBtn primaryBtn" id="ml_co_savelist"><SPAN>'+translate("save")+"<\/SPAN><\/DIV><\/LI>",t[t.length]='        <LI class=btn><DIV class="prettyBtn secondaryBtn" onclick="$().overlay.hide(\'#ml_co_editoverlay\');"><SPAN>'+translate("cancel")+"<\/SPAN><\/DIV><\/LI><\/UL>",t[t.length]="    <\/div>",t[t.length]="<\/div>",$(document.body).append(t.join("")),$("#ml_co_editoverlay #ml_co_savelist").click(function(){$("#ml_co_editoverlay #ml_co_createlist").val().length>0?MLManager.updateCompanyList():(alert(translate("enterNewName")),$("#ml_co_editoverlay #ml_co_createlist").focus())}),$("#ml_co_editoverlay #ml_co_createlist").keyup(function(){$("#ml_co_editoverlay #ml_co_createlist").val().length==0?$("#ml_co_editoverlay #ml_co_renamelist").hasClass("overlaylinkdisable")||$("#ml_co_editoverlay #ml_co_renamelist, #ml_co_deletelist").toggleClass("overlaylinkdisable"):$("#ml_co_editoverlay #ml_co_renamelist").hasClass("overlaylinkdisable")&&$("#ml_co_editoverlay #ml_co_renamelist, #ml_co_deletelist").toggleClass("overlaylinkdisable")}),$("#ml_co_editoverlay #ml_co_renamelist").click(function(){$("#ml_co_editoverlay #ml_co_createlist").val().length>0?MLManager.renameCompanyList():(alert(translate("enterNewName")),$("#ml_co_editoverlay #ml_co_createlist").focus())}),$("#ml_co_editoverlay #ml_co_deletelist").click(function(){if($("#ml_co_editoverlay #ml_co_createlist").val().length>0){var n=$("#ml_co_editoverlay #ml_co_createlist").attr("listid",n);MLManager.removeCompanyList(n)}else alert(translate("enterNewName")),$("#ml_co_editoverlay #ml_co_createlist").focus()}),$("#ml_co_editoverlay #ml_co_searchlistbutton").click(function(){var n=$("#ml_co_editoverlay #ml_co_searchlist").val();n.length==0?(alert(translate("enterSearchCriteria")),$("#ml_co_editoverlay #ml_co_searchlist").focus()):MLManager.searchCompanyList()}),$("#ml_co_editoverlay #ml_co_searchlist").keyup(function(n){n.keyCode=="13"&&$("#ml_co_editoverlay #ml_co_searchlistbutton").trigger("click")}),$("#ml_co_editoverlay .btn").hover(function(){$(this).toggleClass("over")}),$("#ml_co_editoverlay").draggable({handle:".overlayheader"}));i=$("#coMnu li a[code *='"+n+"']").html();$("#ml_co_editoverlay #ml_co_createlist").val(i);$("#ml_co_editoverlay #ml_co_createlist").attr("listid",n);$("#ml_co_editoverlay #ml_co_renamelist, #ml_co_deletelist").removeClass("overlaylinkdisable");$("#ml_co_editoverlay #ml_co_selected_list").html("");$("#ml_co_editoverlay #ml_co_list").html("");$("#ml_co_editoverlay #ml_co_searchlist").val("");MLManager.selectedCompanies=[];$("#ml_co_editoverlay").overlay({background:!0,closeOnEsc:!0});MLManager.fetchCompanyListItems()},updateCompanyList:function(){return MLManager.updateCompanyListDeleteItemsService(),!1},updateCompanyListDeleteItemsService:function(){var r,i,t,u,n;for(progressIndicator.display(translate("savingList"),!1,!1,!0),r=$("#ml_co_overlay #ml_co_createlist").attr("listid"),i="",t=0;t<CompanyListManager.unselectedItems.length;t++)u=CompanyListManager.unselectedItems[t],i+=u.id+"_";return n=new RequestContext("factiva.com.ui.services.CompaniesService",null,null,MLManager.updateCompanyListDeleteItemsSuccess,MLManager.handleError),n.Add("rType","DeleteListItems"),n.Add("listid",r),n.Add("arraycodes",i),n.Send(),CompanyListManager.unselectedItems=[],!1},updateCompanyListDeleteItemsSuccess:function(){return MLManager.updateCompanyListAddItemsService(),!1},updateCompanyListAddItemsService:function(){var n;progressIndicator.display(translate("savingList"),!1,!1,!0);var r=$("#ml_co_overlay #ml_co_createlist").attr("listid"),t="",i=[];return($.each(CompanyListManager.selectedItems,function(n,t){i.push(t.id)}),i.length>0&&(t=i.join("_")),t=="")?($().overlay.hide("#ml_co_overlay"),progressIndicator.hide(10),!1):(n=new RequestContext("factiva.com.ui.services.CompaniesService",null,null,MLManager.updateCompanyListAddItemsSuccess,MLManager.handleError),n.Add("rType","AddToList"),n.Add("listid",r),n.Add("arraycodes",t),n.Send(),!1)},updateCompanyListAddItemsSuccess:function(){var t,n;for(progressIndicator.message(translate("lstSavedSuccess")),progressIndicator.hide(10),t=GetOperator("cop"),n=0;n<tabs.length;n++)$(tabs[n]).text().trim()==translate("companyLabel")&&(tabs[n].className="pnlTabOpen",setPnlDsply(tabs[n].pnl,!1));return setTimeout(function(){$().overlay.hide("#ml_co_overlay")},100),!1},fetchCompanyListItems:function(){return MLManager.fetchCompanyListItemsService(),!1},fetchCompanyListItemsService:function(){var t=$("#ml_co_overlay #ml_co_createlist").attr("listid"),n;return progressIndicator.display(translate("fetchingCompanies")),n=new RequestContext("factiva.com.ui.services.CompaniesService",null,null,MLManager.fetchCompanyListItemsSuccess,MLManager.handleError),n.Add("rType","GetOneList"),n.Add("listid",t),n.Send(),!1},fetchCompanyListItemsSuccess:function(n){var r=parseJSON(n.Text);if(r==null)return!1;var u=r.savedCompanyListItemDTO,f=r.savedCompanyListViewDTO,i=u.companyList.company,t=null;if(i)for(intCount=0;intCount<i.length;intCount++)t=new MLManager.companyItem,t.id=i[intCount].code,t.name=i[intCount].name,t.state="old",MLManager.addCompanyItem(t);MLManager.renderCompanyPills();progressIndicator.hide(500)},companyItem:function(){this.id=null;this.name=null;this.state=null;this.removed=null},addCompanyItem:function(n){MLManager.selectedCompanies.push(n)},isSelectedCompanyItem:function(n){for(var t=0,t=0;t<MLManager.selectedCompanies.length;t++)if(MLManager.selectedCompanies[t].id.toLowerCase()==n.toLowerCase())return!0;return!1},updateCompanyItem:function(n,t){for(var i=0,i=0;i<MLManager.selectedCompanies.length;i++)MLManager.selectedCompanies[i].id.toLowerCase()==n.toLowerCase()&&(MLManager.selectedCompanies[i].bool=t)},removeCompanyItem:function(n){for(var t=0,t=0;t<MLManager.selectedCompanies.length;t++)MLManager.selectedCompanies[t].id.toLowerCase()==n.toLowerCase()&&(MLManager.selectedCompanies[t].state=="old"?(MLManager.selectedCompanies[t].removed=!MLManager.selectedCompanies[t].removed,MLManager.setMnuItemDsplyMLCo("#ml_co_list","T")):(MLManager.selectedCompanies.splice(t,1),MLManager.removeMnuItemDsplyMLCo("#ml_co_list",n)))},renderCompanyPills:function(){var f=!1,u=0,n=[],t,i,r;if(n[n.length]='<div class="searchBuilderFilters">',n[n.length]='    <ul class="DJIIFilterList">',t=jQuery.grep(MLManager.selectedCompanies,function(n){return n.removed!==!0}),t!=null&&t.length>0)for(i=0;i<t.length;i++)r=t[i],n[n.length]='        <li class="connectionAndPillWrap">',n[n.length]='            <div class="filterPillWrap" sequence="'+u+'" mode="or" id="'+r.id+'"  onclick="MLManager.removeCompanyItem(\''+r.id+"');MLManager.renderCompanyPills();\" >",n[n.length]='                <div class="pillNoMenu" style="cursor: pointer">',n[n.length]='                    <span class="filterText">'+r.name+"<\/span>",n[n.length]="                <\/div>",n[n.length]="            <\/div>",n[n.length]="        <\/li>",f=!0,u++;n[n.length]="    <\/ul>";n[n.length]="<\/div>";$("#ml_co_editoverlay").length&&$("#ml_co_editoverlay #ml_co_selected_list").html(n.join(""));$("#ml_co_createoverlay").length&&$("#ml_co_createoverlay #ml_co_selected_list").html(n.join(""));$("#ml_co_overlay").length&&$("#ml_co_overlay #ml_co_selected_list").html(n.join(""));MLManager.renderContextMenu("co");MLManager.setMnuItemDsplyML("#ml_co_list")},renameCompanyList:function(){return MLManager.renameCompanyListService(),!1},renameCompanyListService:function(){var t,i,n;return(progressIndicator.display(translate("renamingList"),!1,!1,!0),t=$("#ml_co_overlay #ml_co_createlist").val(),i=$("#ml_co_overlay #ml_co_createlist").attr("listid"),hasIllegalChar2(t))?(progressIndicator.hide(500),alert(translate("illegalChar-1")+" (<, >, &, #, \\, %, +, |, ~) "+translate("illegalChar-2")),!1):(n=new RequestContext("factiva.com.ui.services.CompaniesService",null,null,$.proxy(MLManager.renameCompanyListSuccess,this,i,t),MLManager.handleError),n.Add("rType","RenameList"),n.Add("listid",i),n.Add("listName",t),n.Send(),!1)},renameCompanyListSuccess:function(n,t,i){var u,r;for(MLManager.fetchCompanyListsSuccess(i),u=GetOperator("cop"),r=0;r<tabs.length;r++)$(tabs[r]).text().trim()==translate("companyLabel")&&(tabs[r].className="pnlTabOpen",setPnlDsply(tabs[r].pnl,!1));return listItm_update("cl","cl_"+n,t),progressIndicator.message(translate("lstRenamedSuccess")),progressIndicator.hide(500),!1},removeCompanyList:function(){$().confirmDialog({msg:translate("confirmDeleteItem"),yesClickHandler:MLManager.removeCompanyListService,yesClickParams:arguments})},removeCompanyListService:function(n){progressIndicator.display(translate("deletingList"),!1,!1,!0);var t=new RequestContext("factiva.com.ui.services.CompaniesService",null,null,$.proxy(MLManager.removeCompanyListSuccess,this,n),MLManager.handleError);return t.Add("rType","DeleteList"),t.Add("listid",n),t.Send(),!1},removeCompanyListSuccess:function(n,t){var r,i;for(MLManager.fetchCompanyListsSuccess(t),r=GetOperator("cop"),i=0;i<tabs.length;i++)$(tabs[i]).text().trim()==translate("companyLabel")&&(tabs[i].className="pnlTabOpen",setPnlDsply(tabs[i].pnl,!1));return progressIndicator.hide(0),lstItm_click("cl","cl_"+n),$().overlay.hide("#ml_co_overlay"),!1},hideContextMnu:function(){MLManager.contextMnuSelected||$("#ml_pillscontextmenu").length>0&&setTimeout(function(){$("#ml_pillscontextmenu").css("display","none")},800)},getMaxZIndex:function(){return Math.max.apply(null,$.map($("body > *"),function(n){return $(n).css("position")=="absolute"?parseInt($(n).css("z-index"))||1:1e3}))}};dClick=0;
