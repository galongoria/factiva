window.DowJones=window.DowJones||{},DowJones.FancyInput=function(){function a(a){var j=$(a);j.find(".fancy-text-input > input").blur(b),j.find(".fancy-text-input > input").focus(c),j.find(".fancy-text-input > input").keydown(d),j.find(".fancy-text-input > label").click(e),j.find(".input-error").click(f),j.find(".fancy-select .trigger").click(g),j.find(".fancy-select .options li").click(h),j.find(".fancy-select .options li").hover(i)}function b(a){$(a.target).val()?$(a.target).siblings("label").addClass("small").removeClass("overlay"):$(a.target).siblings("label, .forgot").addClass("overlay").removeClass("small")}function c(a){$(this).removeClass("error"),$(this).siblings(".input-error").hide(),b(a)}function d(a){$(a.target).siblings("label, .forgot").addClass("small").removeClass("overlay")}function e(a){$(a.target).siblings("input").focus()}function f(a){$(this).hide(),$(this).siblings("input").removeClass("error").focus()}function g(){$(this).hasClass("open")?$(this).removeClass("open").next(".options").removeClass("open"):$(this).addClass("open").next(".options").addClass("open")}function h(){var a=$(this),b=a.data("raw-value");a.addClass("selected").siblings().removeClass("selected"),a.parents(".fancy-select").find(".trigger").text(b).removeClass("open").next(".options").removeClass("open")}function i(){$(this).addClass("hover").siblings().removeClass("hover")}return{init:a}}();var defaultConfig={domain:"sso.dev.accounts.dowjones.com",clientID:"KXsHbKPkIYfKhVmamO52fKl1NZjb1KCf",callbackURL:"https://dev-accounts-dowjones-com.ezproxy.lib.utexas.edu/callback",popup:!1,callbackOnLocationHash:!1};!function(){window.DowJones=window.DowJones||{},DowJones.OneIdentity=function(){function a(a){u=a,FastClick.attach(document.body),DowJones.FancyInput.init("#main"),e(),d();var b={profile:DowJones.Config.productName,siteprefix:DowJones.Config.Settings.omniture.SitePrefix,reportsuiteids:"production"===environment?DowJones.Config.Settings.omniture.ReportSuiteProd:DowJones.Config.Settings.omniture.ReportSuiteDev,pagechannel:DowJones.Config.Settings.omniture.PageChannel,page:DowJones.Config.Settings.omniture.Page,section:DowJones.Config.Settings.omniture.Section,pagesubsection:DowJones.Config.Settings.omniture.PageSubSection,channel:DowJones.Config.Settings.omniture.SiteChannel,module:c(window.location),loc:window.location,env:"production"===environment?environment:"development"},f=DowJones.OneIdentity.getQueryVariable("ui_locales"),g=!1;if(f){var h=f.split("-");h[5]&&"1"==h[5]&&(g=!0)}g||(w=new DowJones.Analytics(b)),$("#main").addClass("loaded"),$(".page").on("animationend",p)}function b(a,b){w.trackEvent(a,b)}function c(a){return a&&a.hash&&"[object String]"===Object.prototype.toString.call(a.hash)?a.hash.replace(/^[^\w]+/,""):""}function d(){var a=n("message");a&&$("#global-info").html(a).show()}function e(){v.forgotPasswordComponent=new DowJones.ForgotPasswordForm,v.forgotPasswordConfirmComponent=new DowJones.ForgotPasswordConfirmation,v.loginComponent=new DowJones.LoginForm,v.smsPhoneComponent=new DowJones.SMSPhoneForm,v.smsCodeComponent=new DowJones.SMSCodeForm,v.emailLinkComponent=new DowJones.EmailLinkForm,v.emailLinkConfirmComponent=new DowJones.EmailLinkConfirmation,page("/forgot",function(){o("forgot-password"),v.forgotPasswordComponent.run()}),page("/forgot-confirm",function(){o("forgot-password-confirmation")}),page("/signin",function(){o("basic-login"),v.loginComponent.run(u)}),page("/sms-phone",function(){o("sms-login-phone"),v.smsPhoneComponent.run()}),page("/email-link",function(){o("email-link-login"),v.emailLinkComponent.run()}),page("/email-link-confirmation",function(){o("email-link-confirmation")}),page("/sms-code/:phoneNumber",function(a){o("sms-login-code"),v.smsCodeComponent.run(a.params.phoneNumber)}),page.start({hashbang:!0,dispatch:!1,decodeURLComponents:!1});var a="/signin";window.location.hash&&"#_=_"!==window.location.hash&&(a="/"+window.location.hash.split("#").join("").split("!").join("").split("/").join("")),page.show(a)}function f(){switch(g()){case"mw":return"MARKETWATCH-EN_US";case"barrons":return"BARRONS-EN_US";case"factiva":return"FACTIVA-EN_US";default:return"WSJ-EN_US"}}function g(){var a=n("state"),b=decodeURIComponent(a),c=n("brand",b);return c||DowJones.Config.productName}function h(){return config=u||defaultConfig,config.auth0Domain&&(config.domain=config.auth0Domain),config.extraParams&&config.extraParams.state&&!$.isEmptyObject(config.extraParams.state)?this.authZeroState=config.extraParams.state:n("state")?this.authZeroState=n("state"):this.authZeroState="brand%3Dmw",new Auth0(config)}function j(){var a=n("state"),b=decodeURIComponent(a),c=n("opts",b);return parseInt(c)}function l(){var a=j();return{google:(1&a)>0,facebook:(2&a)>0,sms:(4&a)>0,email:(8&a)>0,oneTimeLink:(32&a)>0}}function m(){var a=g();$("body").addClass(a),$("a.client-aware").each(function(a){this.href=this.href+"?state="+n("state")})}function n(a,b){for(var c=b||window.location.search.substring(1),d=c.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(decodeURIComponent(f[0].toLowerCase())==a.toLowerCase())return decodeURIComponent(f[1])}}function o(a,b){var c=t?q(t):-1,d=q(a);$(".page").removeClass("to-right to-left from-right from-left").hide(),-1===c?$(".page-"+d).show():d>c?($(".page-"+c).addClass("to-left").show(),$(".page-"+d).addClass("from-right").show()):($(".page-"+c).addClass("to-right").show(),$(".page-"+d).addClass("from-left").show()),t=a}function p(){var a=$(this);(a.hasClass("to-right")||a.hasClass("to-left"))&&a.hide()}function q(a){var b=$("#"+a).attr("class");if(b)for(var c=b.split(" "),d=0;d<c.length;d++)if(0===c[d].indexOf("page-"))return parseInt(c[d].substr(5,c[d].length));return-1}function r(){var a;for(a in v)v[a].destroy&&"function"==typeof v[a].destroy&&v[a].destroy();v=null}function s(a){var b=a.split("&");for(""===b[0]&&1===b.length&&(b=[]),result={},i=0;i<b.length;i++)k=b[i].split("="),result[k[0]]=k[1]||"";return result}var t="",u={},v={},w=null;return window.addEventListener("unload",r),{run:a,applyBrand:m,getBrand:g,getEdition:f,initializeAuthZero:h,getQueryVariable:n,getLoginOptions:l,QueryStringToJSON:s,getFormInstances:v,trackEvent:b}}()}(),function(){window.DowJones=window.DowJones||{},DowJones.ForgotPasswordForm=function(){this.conf={usernameServiceForgotPW:"/consumeraccess/svc/forgotcredential/request.json",usernameServiceRoles:"/auth/roles/forgotpassword",usernameServiceServiceRoles:"/auth/roles/forgotpasswordWithUsername"},DowJones.OneIdentity.applyBrand(),this.$container=$("#forgot-password"),this.$fpwForm=this.$container.find("form"),this.loginAttempts=0,this.chatLoginCount=0,this.invalidEntitlements=0,this.$email=this.$container.find("#fpw-email"),this.$emailError=this.$container.find(".fpw-email-error"),this.$errors=this.$container.find(".errors"),this.$fpwSubmit=this.$container.find(".fpw-submit"),this.$fpwSubmit.on("click",this.onEmailSubmit.bind(this)),this.$emailNotFound=!1,this.$back=this.$container.find(".navigate-back"),this.$back.on("click",this.onBackToSignInClick.bind(this))},DowJones.ForgotPasswordForm.prototype={run:function(){setTimeout(function(){this.$email.focus()}.bind(this),100)},onEmailSubmit:function(a){if(a.preventDefault(),this.clearErrors(),this.validateForm()){var b=this,c=this.$email.val();this.toggleLoadingStatus(!0);var d={emailAddress:c,editionId:DowJones.OneIdentity.getEdition()};this.postToUserNameService(d,this.conf.usernameServiceForgotPW).done(function(a){page.show("/forgot-confirm"),b.toggleLoadingStatus(!1),console.log(arguments)}).fail(function(a){b.handleErrorFromUserNameService(a),b.$emailNotFound?(console.log("emailNotFound"),d.username=d.emailAddress,d.emailAddress=void 0,b.postToUserNameService(d,b.conf.usernameServiceForgotPW).done(function(a){page.show("/forgot-confirm"),b.toggleLoadingStatus(!1),console.log(arguments)}).fail(function(a){b.handleErrorFromUserNameService(a),b.showErrors()})):b.showErrors()})}},postToUserNameService:function(a,b){var c={type:"POST",url:b,data:JSON.stringify(a),dataType:"json",headers:{"X-HTTP-Method-Override":"POST","X-REQUEST-SCHEME":"HTTPS","Content-Type":"application/json",Accept:"application/json"}};return $.ajax(c)},handleErrorFromUserNameService:function(a){if(a){var b=a.responseJSON?a.responseJSON:a.responseText?JSON.parse(a.responseText):void 0;b?b.errorReasonCodes&&$.inArray("username-format",b.errorReasonCodes)>=0?(this.chatLoginCount++,this.loginAttempts++,this.loginAttempts>=3&&this.loginAttempts,this.$errors.text("Invalid Username Format"),pageName="Error_password_forgot_UsernameDoesNotExists"):b.errorReasonCodes&&$.inArray("emailAddress-duplicate",b.errorReasonCodes)>=0?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text("Duplicate Email Address Found"),pageName="Error_password_forgot_MultipleAccounts"):b.errorReasonCodes&&$.inArray("authorization-failed",b.errorReasonCodes)>=0?(this.invalidEntitlements++,this.invalidEntitlements,this.$errors.text("Authorization Failed"),pageName="Error_no_email_associated"):b.errorReasonCodes&&$.inArray("emailAddress-notfound",b.errorReasonCodes)>=0?(this.chatLoginCount++,this.loginAttempts++,this.$emailNotFound=!0,this.$errors.text("Email Address Not Found"),pageName="Error_password_forgot_EmailAddressDoesNotExists"):b.errorReasonCodes&&$.inArray("emailAddress-notassociated",b.errorReasonCodes)>=0?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text("Email Address Not Associated"),pageName="Error_password_forgot_EmailAddressNotAssociated"):b.errorReasonCodes&&$.inArray("username-notfound",b.errorReasonCodes)>=0?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text("Username Not Found"),pageName="Error_no_email_associated"):b.errorReasonCodes&&$.inArray("account-locked",b.errorReasonCodes)>=0?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text("Account Locked"),pageName="Error_account-locked"):b.errorReasonCodes&&$.inArray("emailAddress-format",b.errorReasonCodes)>=0?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text("Invalid Email Address Format"),this.$emailNotFound=!0,pageName="Error_password_forgot_EmailAddressDoesNotExists"):b.errorReasonCodes&&$.inArray("validationfailure",b.errorReasonCodes)>=0?pageName="Forgot Password Scrim ValidationFailure Error":this.clearErrors():this.clearErrors()}},passwordMismatch:function(){this.toggleLoadingStatus(!1),this.$password.addClass("error"),this.$confirmPassword.addClass("error"),this.$errors.show()},showErrors:function(){this.toggleLoadingStatus(!1),this.$errors.addClass("error"),this.$errors.show()},clearErrors:function(){this.$email.removeClass("error"),this.$emailError.hide(),this.$errors.removeClass("error"),this.$errors.hide()},toggleLoadingStatus:function(a){a?(this.$email.prop("disabled",!0),this.$back.prop("disabled",!0),this.$fpwSubmit.prop("disabled",!0),this.$fpwForm.addClass("loading")):(this.$email.prop("disabled",!1),this.$back.prop("disabled",!1),this.$fpwSubmit.prop("disabled",!1),this.$fpwForm.removeClass("loading"))},validateForm:function(){return!(this.$email.val().length<5)||(this.$email.addClass("error"),this.$emailError.show(),this.$emailError.text("Must be at least 5 characters long"),!1)},onBackToSignInClick:function(a){a.preventDefault(),page.show("/signin")},destroy:function(){this.$container=null,this.$fpwForm=null,this.$email=null,this.$emailError=null,this.$errors=null,this.$fpwSubmit.off("click"),this.$fpwSubmit=null,this.$back.off("click"),this.$back=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.ForgotPasswordConfirmation=function(){DowJones.OneIdentity.applyBrand(),this.$container=$("#forgot-password-confirmation"),this.$backToSend=this.$container.find(".navigate-back"),this.$backToSend.on("click",this.onBackToResend.bind(this)),this.$backToSend=this.$container.find(".navigate-sign-in"),this.$backToSend.on("click",this.onBackToResend.bind(this))},DowJones.ForgotPasswordConfirmation.prototype={onBackToResend:function(a){a.preventDefault(),page.show("/forgot")},onBackToSignOn:function(a){a.preventDefault(),page.show("/sign-in")},destroy:function(){this.$container=null,this.$backToSend.off("click"),this.$backToSend=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.LoginForm=function(){this.socailComponent=new DowJones.SocialLogins,DowJones.OneIdentity.applyBrand(),this.authZeroClient=DowJones.OneIdentity.initializeAuthZero();var a=DowJones.OneIdentity.getLoginOptions(),b=a.email,c=a.sms,d=a.google||a.facebook,e="",f="",g="",h="",i="",j="",k="",l="",m="";e="#basic-login",f="#username",g=".username-error",h="#password",i=".password-error",j="#productId",k=".namespace-error",l=".basic-login-submit",e="#card-sign-in",f="#email",g=".js-email-error-note",h="#password",i=".password-error",j="#namespace",k=".js-namespace-error-note",l=".basic-login-submit",m="#rememberme",nRecaptchaCont="#grecaptcha_container",nRecaptchaErr=".js-recaptcha-error-note",this.$container=$(e),this.$oneTimeLink=this.$container.find(".one-time-link-card"),this.$oneTimeLink.toggle(a.oneTimeLink),this.$email=this.$container.find(f),this.$emailError=this.$container.find(g),this.$password=this.$container.find(h),this.$passwordError=this.$container.find(i),this.$namespace=this.$container.find(j),this.$namespaceError=this.$container.find(k),this.$rememberMe=this.$container.find(m),this.$errors=this.$container.find(".errors"),this.$errorContainer=this.$container.find(".error-container"),this.$emailLoginSubmit=this.$container.find(l),this.$loginForm=this.$container.find("form"),this.$recapthcaContainer=this.$container.find(".recaptha-container"),this.$recapthcaCnt=this.$container.find(nRecaptchaCont),this.$recaptchaError=this.$container.find(nRecaptchaErr),this.$emailLoginSubmit.on("click",this.login.bind(this)),this.$forgotLink=this.$container.find(".forgot-link"),this.$forgotLink.on("click",this.jumpToForget.bind(this)),this.$socialLogin=this.$container.find(".login-social"),this.$socialLogin.toggle(d),this.$socialLogin.on("click",this.onSocialLogin.bind(this)),this.$smsLogin=this.$container.find(".login-sms"),this.$smsLogin.toggle(c),this.$smsLogin.on("click",this.onSMSLogin.bind(this)),this.$emailLink=this.$container.find(".login-email"),this.$emailLink.toggle(b),this.$emailLink.on("click",this.onEmailLinkClick.bind(this)),this.$rememberMe.on("click",this.onRememberMeClick.bind(this)),this.$email.on("blur",this.disableOrEnableNamespace.bind(this)),$("body").on("changed-language",this.invokeRecaptchaOnLangChange.bind(this)),this.showLoginOptions(d,c,b),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||setTimeout(function(){this.$email.focus()}.bind(this),100)},DowJones.LoginForm.prototype={run:function(a){this.auth0Config=a,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||setTimeout(function(){this.$email.focus()}.bind(this),100)},jumpToForget:function(a){a.preventDefault(),page.show("/forgot")},login:function(a){if(a.preventDefault(),this.clearErrors(),this.validateForm()){var b=this.$email.val(),c=this.$password.val(),d=$.trim(this.$namespace.val()),e=this.isVisibleNameSpace()&&d?d:null;this.toggleLoadingStatus(!0),this.postToAuthEndpoint(b,c,e,!1)}},validateForm:function(){return 0===this.$email.val().length?(this.$emailError.show(),this.$email.addClass("error"),!1):0===this.$password.val().length?(this.$passwordError.show(),this.$password.addClass("error"),!1):!(this.$recapthcaCnt.length>0&&""===$("#g-recaptcha-response").val())||(this.$recapthcaContainer.show(),this.$recaptchaError.show(),this.$emailLoginSubmit.prop("disabled",!0),!1)},showNameSpace:function(a){a?this.$namespace.parents(".form__full").show():this.$namespace.parents(".form__full").hide()},isVisibleNameSpace:function(){return this.$namespace.parents(".form__full").is(":visible")},checkRememberMe:function(a){$.cookie("kmli",a?1:0),this.$rememberMe.find("[type=checkbox]").prop("checked",a)},clearErrors:function(){this.$errors.hide(),this.$errorContainer.hide(),this.$email.removeClass("error"),this.$password.removeClass("error"),this.$emailError.hide(),this.$passwordError.hide(),this.$namespaceError.hide(),this.$recapthcaContainer.hide(),this.$recaptchaError.hide()},showError:function(a,b){this.$errors.html(b).show(),this.$errorContainer.show()},toggleLoadingStatus:function(a){a?(this.$email.prop("disabled",!0),this.$password.prop("disabled",!0),this.$emailLoginSubmit.prop("disabled",!0),this.$loginForm.addClass("loading")):(this.$email.prop("disabled",!1),this.$password.prop("disabled",!1),this.$emailLoginSubmit.prop("disabled",!1),this.$loginForm.removeClass("loading"))},onRememberMeClick:function(){var a=$("#remember"),b=!a.is(":checked");return a.prop("checked",b),$.cookie("kmli",b?1:0),!1},onLoginError:function(a){if("210907"===a.details.code?DowJones.OneIdentity.trackEvent({module:"login-error-invalid-state"},"view"):window.lcpasswed||DowJones.OneIdentity.trackEvent({module:"login-error"},"view"),this.toggleLoadingStatus(!1),a.details&&a.details.show_namespace){this.$errors.html(a.message),this.isVisibleNameSpace()||this.showNameSpace(!0);var b=$.cookie("LPLogin")||"",c=DowJones.OneIdentity.QueryStringToJSON(b);c.SNS="1",$.cookie("LPLogin",$.param(c)),this.$namespace.focus(),this.$namespace.addClass("error"),this.$password.val(""),this.$password.focus()}else this.$errors.html(a.message),this.$email.addClass("error"),this.$password.addClass("error"),this.$password.val("");if(a.details.loginFailure){var d=0;if($.cookie("LF")&&(d=parseInt($.cookie("LF"))),(d+=1)>=5){a.message+='<hr /><span id="recptAdditionalErrorMsg">'+DowJones.Translate.translateToken("errorForUser210988")+"</span>",this.$errors.html(a.message);var e=this.recaptchaLanguageCode(DowJones.Translate.currLang);this.$recapthcaContainer.show(),this.InvokeRecaptcha(DowJones.Config.Settings.recaptchaUrl,DowJones.Config.Settings.recaptchaSiteKey,e,"grecaptcha_container")}$.cookie("LF",d)}else $("#g-recaptcha-response").val()&&$("#g-recaptcha-response").remove();this.$errorContainer.show(),this.$errors.show(),this.$password.val("")},onEmailLinkClick:function(a){a.preventDefault(),page.show("/email-link")},disableOrEnableNamespace:function(a){a.preventDefault(),a.stopPropagation();var b=$.trim(this.$email.val());return this.validateEmail(b)?(this.$namespace.prop("disabled",!0),this.$namespace.parents(".fancy-text-input").addClass("disabled")):(this.$namespace.prop("disabled",!1),this.$namespace.parents(".fancy-text-input").removeClass("disabled")),!1},invokeRecaptchaOnLangChange:function(){var a=0;$.cookie("LF")&&(a=parseInt($.cookie("LF")));var b=$(".recaptha-container iFrame").is(":visible");if(a>=5&&b){var c=this.recaptchaLanguageCode(DowJones.Translate.currLang);this.InvokeRecaptcha(DowJones.Config.Settings.recaptchaUrl,DowJones.Config.Settings.recaptchaSiteKey,c,"grecaptcha_container",!0)}},onSMSLogin:function(a){a.preventDefault(),page.show("/sms-phone")},onSocialLogin:function(a){a.preventDefault(),this.socailComponent.toggleSocialLogins()},showLoginOptions:function(a,b,c){var d=[];a&&d.push("social"),b&&d.push("sms"),c&&d.push("email");var e="#login-options-"+d.join("-");this.$container.find(e).show()},postToAuthEndpoint:function(a,b,c,d){var e=this.$rememberMe.find("[type=checkbox]").prop("checked"),f=DowJones.OneIdentity.getQueryVariable("state"),g=DowJones.OneIdentity.getQueryVariable("login_hint");f&&!g&&(g=f),this.auth0Config||(this.auth0Config=config);var h={user_id:a,state:g,lang:DowJones.Translate.currLang,kmli:$.cookie("kmli"),productname:DowJones.Config.productName};this.$recapthcaCnt.length>0&&$("#g-recaptcha-response").val()&&""!==$("#g-recaptcha-response").val()&&(h.recaptchaToken=$("#g-recaptcha-response").val(),h.recaptchaLoc=window.location.hostname),c&&(h.namespace=c),this.isVisibleNameSpace()||(h.nsConflict="Y"),DowJones.OneIdentity.getQueryVariable("ip_address")&&(h.ip_address=DowJones.OneIdentity.getQueryVariable("ip_address"));var i={username:JSON.stringify(h),password:b,connection:DowJones.OneIdentity.getQueryVariable("connection")||"DJldap",scope:DowJones.OneIdentity.getQueryVariable("scope")||"openid",state:f};e&&(i.callbackURL=this.auth0Config.callbackURL+(-1===this.auth0Config.callbackURL.indexOf("?")?"?":"&")+$.param({cookie:"on"})),DowJones.Translate.currLang&&(void 0===i.callbackURL?i.callbackURL=this.auth0Config.callbackURL+(-1===this.auth0Config.callbackURL.indexOf("?")?"?":"&")+$.param({interfacelanguage:DowJones.Translate.currLang}):i.callbackURL=i.callbackURL+(-1===i.callbackURL.indexOf("?")?"?":"&")+$.param({interfacelanguage:DowJones.Translate.currLang}));var j=DowJones.OneIdentity.getQueryVariable("nonce");j&&(i.nonce=j);var k=DowJones.OneIdentity.getQueryVariable("code_challenge");k&&(i.code_challenge=k);var l=DowJones.OneIdentity.getQueryVariable("code_challenge_method");l&&(i.code_challenge_method=l),this.auth0Config&&this.auth0Config.extraParams&&this.auth0Config.extraParams._csrf&&(i._csrf=this.auth0Config.extraParams._csrf);var m=this;this.authZeroClient.login(i,function(a){if(a)if(a.details=$.extend(a.details,"object"==typeof a.details.description?a.details.description:{}),a.message=a.details.message||a.message,a.details&&a.details.authFailureRedirect){var b=void 0!==a.details.authFailurePayLoad&&void 0!==a.details.authFailurePayLoad.landingPage&&""!==a.details.authFailurePayLoad.landingPage?"landingPage="+a.details.authFailurePayLoad.landingPage:"",c=""===b?"":a.details.authFailureRedirect.indexOf("?")>-1?"&"+b:"?"+b,e=["landingPage","accountid"],f=a.details.authFailureRedirect+c,g=m.omit(a.details.authFailurePayLoad,e);m.submitForm(f,g)}else a.details&&a.details.description&&a.details.description.action_url?m.submitForm(a.details.description.action_url,a.details.description):(a.status&&void 0===a.details.code?(a.details.code=a.status>=400&&a.status<500?"210904":a.status>=500?a.details.code="210905":"210905",$(".error-container .note--error").attr("data-token","errorForDev"+a.details.code),a.message="("+a.details.code+") "+DowJones.Translate.translateToken("errorForDev"+a.details.code),a.details.message="("+a.details.code+") "+DowJones.Translate.translateToken("errorForDev"+a.details.code)):403===a.status&&"Invalid state"===a.message&&"access_denied"===a.code&&(a.details.code="210907",a.message=DowJones.Translate.translateToken("errorForDev"+a.details.code)+' <a href="https://www-dowjones-com.ezproxy.lib.utexas.edu/products/">'+DowJones.Translate.translateToken("here")+".</a>"),d&&$("body").trigger("hideloading"),m.onLoginError(a))})},omit:function(a,b){for(var c=0;c<b.length;c++)delete a[b[c]];return a},submitForm:function(a,b,c){c=c||"post";var d=document.createElement("form");d.setAttribute("method",c),d.setAttribute("action",a);for(var e in b)if(b.hasOwnProperty(e)){var f=document.createElement("input");f.setAttribute("type","hidden"),f.setAttribute("name",e),f.setAttribute("value",b[e]),d.appendChild(f)}document.body.appendChild(d),d.submit()},destroy:function(){this.authZeroClient=null,this.$container=null,this.$oneTimeLink=null,this.$email=null,this.$emailError=null,this.$password=null,this.$passwordError=null,this.$errors=null,this.$errorContainer=null,this.$emailLoginSubmit=null,this.$loginForm.off("submit"),this.$loginForm=null,this.$recapthcaContainer=null,this.$forgotLink.off("click"),this.$forgotLink=null,this.$socialLogin.off("click"),this.$socialLogin=null,this.$smsLogin.off("click"),this.$smsLogin=null,this.$emailLink.off("click"),this.$emailLink=null,this.$rememberMe.off("click"),$(".tab-wrapper").off("click"),$(document).off("click")},validateEmail:function(a){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.$email.val())},InvokeRecaptcha:function(a,b,c,d,e){"use strict";e=e||!1;var f=/(onload=)(.*?)(&|$)/gi.exec(a)[2];"string"==typeof c&&(a+="&hl="+c),window[f]=function(){grecaptcha.render(d,{sitekey:b,lang:c,callback:function(){$(".basic-login-submit").prop("disabled",!1)}})},this.$emailLoginSubmit.prop("disabled",!0);var g=!1;if($("script").each(function(){var a=$(this),b=a.attr("src");void 0!==b&&b.indexOf("recaptcha")>-1&&(g=!0,e&&($(".grecapthaCnt div").remove(),a.remove(),$("#recptAdditionalErrorMsg").text(DowJones.Translate.translateToken("errorForUser210988"))))}),!g||e){var h=document.createElement("script");h.type="text/javascript",h.async=!0,h.defer=!0,h.src=a;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(h,i)}else grecaptcha.reset()},recaptchaLanguageCode:function(a){return"zhcn"===a?a="zh-CN":"zhtw"===a&&(a="zh-TW"),a}}}(),function(){window.DowJones=window.DowJones||{},DowJones.Analytics=function(a){var b=baseUrl+"js/global/login/utag-min.js?v="+DowJones.Config.Settings.appVersion,c=a.loc.pathname,d=a.loc.search;this.previousModule="",this.analyticsData={brand:a.profile,site_prefix:a.siteprefix,report_suite_ids:a.reportsuiteids,page_channel:a.pagechannel,channel:a.channel,page:a.page,section:a.section,page_subsection:a.pagesubsection,module:a.module,pageUrl:a.loc.href,urlPath:c,urlQuery:d,landingPage:"0",previousModule:""},"signin"!==this.analyticsData.module||this.cookiesEnabled()||(this.analyticsData.module+="-nocookies"),window.utag_data={};for(var e in this.analyticsData)this.analyticsData.hasOwnProperty(e)&&(window.utag_data[e]=this.analyticsData[e]);window.utag_data.landingPage="1",this.previousModule=a.module;var f=document.createElement("script");f.setAttribute("async","true"),f.setAttribute("type","text/javascript"),f.setAttribute("src",b),document.getElementsByTagName("body")[0].appendChild(f)},DowJones.Analytics.prototype={trackEvent:function(a,b){var c=b||"link",d={};for(var e in this.analyticsData)d[e]=a[e]?a[e]:this.analyticsData[e];d.previousModule=this.previousModule,this.previousModule=a.module,"signin"!==d.module||this.cookiesEnabled()||(d.module+="-nocookies"),window.utag[c](d)},cookiesEnabled:function(){if(navigator.cookieEnabled)return navigator.cookieEnabled;document.cookie="test_cookie=some-value";var a=document.cookie.indexOf("test_cookie")>-1;return a&&(document.cookie="test_cookie=; expires=Thu, 01 Jan 1970 00:00:00 GMT"),a}}}(),function(){window.DowJones=window.DowJones||{},DowJones.SocialLogins=function(){var a=DowJones.OneIdentity.getLoginOptions(),b=a.google,c=a.facebook;this.authZeroClient=DowJones.OneIdentity.initializeAuthZero(),this.$container=$("#social-card"),this.$googleLogin=this.$container.find(".login-google"),this.$googleLogin.toggle(b),this.$googleLogin.on("click",this.onGoogleLogin.bind(this)),this.$facebookLogin=this.$container.find(".login-facebook"),this.$facebookLogin.toggle(c),this.$facebookLogin.on("click",this.onFacebookLogin.bind(this))},DowJones.SocialLogins.prototype={onGoogleLogin:function(){this.authZeroClient.login({connection:"google-oauth2",state:DowJones.OneIdentity.authZeroState})},onFacebookLogin:function(){this.authZeroClient.login({connection:"facebook",state:DowJones.OneIdentity.authZeroState})},toggleSocialLogins:function(){this.$container.toggleClass("show")},destroy:function(){this.authZeroClient=null,this.$container=null,this.$googleLogin.off("click"),this.$googleLogin=null,this.$facebookLogin.off("click"),this.$facebookLogin=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.SMSPhoneForm=function(){DowJones.OneIdentity.applyBrand(),this.authZeroClient=DowJones.OneIdentity.initializeAuthZero(),this.$container=$("#sms-login-phone"),this.$smsPhoneForm=this.$container.find("form"),this.$countryCode=this.$container.find("#smscountry"),this.$phone=this.$container.find("#smsphone"),this.$phoneError=this.$container.find(".smsphone-error"),this.$phoneSubmit=this.$container.find(".sms-phone-submit"),this.$phoneSubmit.on("click",this.onPhoneSubmit.bind(this)),this.$back=this.$container.find(".navigate-back"),this.$back.on("click",this.onBackToSignInClick.bind(this))},DowJones.SMSPhoneForm.prototype={run:function(){setTimeout(function(){this.$phone.focus()}.bind(this),100)},onPhoneSubmit:function(a){if(a.preventDefault(),this.clearErrors(),this.validatePhone()){var b=this.$countryCode.text()+this.$phone.val(),c=this;this.toggleLoadingStatus(!0),this.authZeroClient.requestSMSCode({phoneNumber:b,state:DowJones.OneIdentity.authZeroState},function(a){a?(c.$phone.addClass("error"),c.$phoneError.html(a.error_description),c.$phoneError.show()):page.show("/sms-code/"+b),c.toggleLoadingStatus(!1)})}},validatePhone:function(){return 0!==this.$phone.val().length||(this.$phone.addClass("error"),this.$phoneError.show(),!1)},toggleLoadingStatus:function(a){a?(this.$phone.prop("disabled",!0),this.$back.prop("disabled",!0),this.$phoneSubmit.prop("disabled",!0),this.$smsPhoneForm.addClass("loading")):(this.$phone.prop("disabled",!1),this.$back.prop("disabled",!1),this.$phoneSubmit.prop("disabled",!1),this.$smsPhoneForm.removeClass("loading"))},onBackToSignInClick:function(a){a.preventDefault(),page.show("/signin")},clearErrors:function(){this.$phone.removeClass("error"),this.$phoneError.hide()},destroy:function(){this.authZeroClient=null,this.$container=null,this.$smsPhoneForm=null,this.$countryCode=null,this.$phone=null,this.$phoneError=null,this.$phoneSubmit.off("click"),this.$phoneSubmit=null,this.$back.off("click"),this.$back=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.SMSCodeForm=function(){DowJones.OneIdentity.applyBrand(),this.authZeroClient=DowJones.OneIdentity.initializeAuthZero(),this.$container=$("#sms-login-code"),this.$smsCodeForm=this.$container.find("form"),this.$code=this.$container.find("#smscode"),this.$codeError=this.$container.find(".smscode-error"),this.$codeSubmit=this.$container.find(".sms-code-submit"),this.$codeSubmit.on("click",this.onCodeSubmit.bind(this)),this.$back=this.$container.find(".navigate-back"),this.$back.on("click",this.onBackToSignInClick.bind(this))},DowJones.SMSCodeForm.prototype={run:function(a){this.phoneNumber=a,setTimeout(function(){this.$code.focus()}.bind(this),100)},onCodeSubmit:function(a){if(a.preventDefault(),this.clearErrors(),this.validateCode()){var b=this.$code.val(),c=this;this.toggleLoadingStatus(!0),this.authZeroClient.verifySMSCode({phoneNumber:this.phoneNumber,code:b,state:DowJones.OneIdentity.authZeroState},function(a){c.$code.addClass("error"),c.$codeError.html(a.error),c.$codeError.show(),c.toggleLoadingStatus(!1)})}},validateCode:function(){return 0!==this.$code.val().length||(this.$code.addClass("error"),this.$codeError.show(),!1)},toggleLoadingStatus:function(a){a?(this.$code.prop("disabled",!0),this.$back.prop("disabled",!0),this.$codeSubmit.prop("disabled",!0),this.$smsCodeForm.addClass("loading")):(this.$code.prop("disabled",!1),this.$back.prop("disabled",!1),this.$codeSubmit.prop("disabled",!1),this.$smsCodeForm.removeClass("loading"))},onBackToSignInClick:function(a){a.preventDefault(),page.show("/sms-phone")},clearErrors:function(){this.$code.removeClass("error"),this.$codeError.hide()},destroy:function(){this.authZeroClient=null,this.$container=null,this.$smsCodeForm=null,this.$code=null,this.$codeError=null,this.$codeSubmit.off("click"),this.$codeSubmit=null,this.$back.off("click"),this.$back=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.EmailLinkForm=function(){DowJones.OneIdentity.applyBrand(),this.authZeroClient=DowJones.OneIdentity.initializeAuthZero(),this.$container=$("#email-link-login"),this.$emailLinkForm=this.$container.find("form"),this.$email=this.$container.find("#email-for-link"),this.$emailError=this.$container.find(".email-for-link-error"),this.$fpwSubmit=this.$container.find(".email-link-submit"),this.$fpwSubmit.on("click",this.onEmailSubmit.bind(this)),this.$back=this.$container.find(".navigate-back"),this.$back.on("click",this.onBackToSignInClick.bind(this))},DowJones.EmailLinkForm.prototype={run:function(){setTimeout(function(){this.$email.focus()}.bind(this),100)},onEmailSubmit:function(a){if(a.preventDefault(),this.clearErrors(),this.validateForm()){var b=this.$email.val(),c=this
;this.toggleLoadingStatus(!0),this.authZeroClient.requestMagicLink({email:b,state:DowJones.OneIdentity.authZeroState},function(a){a?(c.$email.addClass("error"),c.$emailError.html(a.error_description),c.$emailError.show()):page.show("/email-link-confirmation"),c.toggleLoadingStatus(!1)})}},validateForm:function(){return 0!==this.$email.val().length||(this.$email.addClass("error"),this.$emailError.show(),!1)},toggleLoadingStatus:function(a){a?(this.$email.prop("disabled",!0),this.$back.prop("disabled",!0),this.$fpwSubmit.prop("disabled",!0),this.$emailLinkForm.addClass("loading")):(this.$email.prop("disabled",!1),this.$back.prop("disabled",!1),this.$fpwSubmit.prop("disabled",!1),this.$emailLinkForm.removeClass("loading"))},onBackToSignInClick:function(a){a.preventDefault(),page.show("/signin")},clearErrors:function(){this.$email.removeClass("error"),this.$emailError.hide()},destroy:function(){this.authZeroClient=null,this.$container=null,this.$emailLinkForm=null,this.$email=null,this.$emailError=null,this.$fpwSubmit.off("click"),this.$fpwSubmit=null,this.$back.off("click"),this.$back=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.EmailLinkConfirmation=function(){DowJones.OneIdentity.applyBrand(),this.$container=$("#email-link-confirmation"),this.$backToSend=this.$container.find(".navigate-back"),this.$backToSend.on("click",this.onBackToResend.bind(this))},DowJones.EmailLinkConfirmation.prototype={onBackToResend:function(a){a.preventDefault(),page.show("/email-link")},destroy:function(){this.$container=null,this.$backToSend.off("click"),this.$backToSend=null}}}(),$("body").on("docready",function(a,b){DowJones.OneIdentity.run(config);var c=$.cookie("LPLogin"),d=DowJones.OneIdentity.getQueryVariable("showNS"),e=DowJones.OneIdentity.getQueryVariable("ui_locales"),f="0",g=!1;if(e){var h=e.split("-");h[4]&&(f=h[4]),h[5]&&"1"==h[5]&&(g=!0,window.lcpasswed=!0)}if(d&&"true"==d.toLowerCase()||"1"===f)DowJones.OneIdentity.getFormInstances.loginComponent.showNameSpace(!0);else if(c){var i=DowJones.OneIdentity.QueryStringToJSON(c);DowJones.OneIdentity.getFormInstances.loginComponent.showNameSpace("1"===i.SNS)}var j=DowJones.OneIdentity.getQueryVariable("cookie"),k=j&&"on"==j.toLowerCase();DowJones.OneIdentity.getFormInstances.loginComponent.checkRememberMe(k);var l=DowJones.OneIdentity.getQueryVariable("userid"),m=DowJones.OneIdentity.getQueryVariable("userpassword"),n=DowJones.OneIdentity.getQueryVariable("productid")||DowJones.OneIdentity.getQueryVariable("namespace"),o=DowJones.OneIdentity.getQueryVariable("errorcode"),p=DowJones.OneIdentity.getQueryVariable("errordesc");o&&($.ajax({url:baseUrl+"tokens?errorcode="+o+"|-1",success:function(a){var b="";if(a){b=JSON.parse(a);var c=void 0!==b[DowJones.Translate.currLang]["errorForUser"+o]?"errorForUser":"errorForDev",d=c+o;b[DowJones.Translate.currLang][d]===d&&(p=b[DowJones.Translate.currLang][c+"Minus1"]+" (Error: "+o+")",d=c+"Minus1");for(var e in b)b.hasOwnProperty(e)&&(b[e][d]=b[e][d]+" (Error: "+o+")");DowJones.Translate&&DowJones.Translate.DynamicTokens?DowJones.Translate.DynamicTokens=$.extend(!0,{},b,DowJones.Translate.DynamicTokens):DowJones.Translate.DynamicTokens=b,$(".error-container .note--error").attr("data-token",d),DowJones.Translate.init()}},error:function(a){}}),DowJones.OneIdentity.getFormInstances.loginComponent.showError(o,p)),n&&$("#namespace").val(n).focus(),m&&$("#password").val(m).focus(),l&&$("#email").val(l).focus(),l&&m&&$(".basic-login-submit").submit();var q=function(a){return DowJones.Config.Settings.mappings[a].value+"productname="+DowJones.Config.productName+"&interfacelanguage="+DowJones.Translate.currLang},r=q("newUserSignup");$("#newUserSignup").attr("href",r);var s=q("passwdResetUrl");if(("opis"===DowJones.Config.productName||"pcw"===DowJones.Config.productName||"mccloskey"===DowJones.Config.productName||"axxis"===DowJones.Config.productName)&&config&&config.internalOptions){var t=[];for(var u in config.internalOptions)"client_id"!==u&&"redirect_uri"!==u&&"response_type"!==u&&"scope"!==u&&"ui_locales"!==u&&"op"!==u&&"state"!==u||config.internalOptions.hasOwnProperty(u)&&t.push(u+"="+encodeURIComponent(config.internalOptions[u]));s=s+"&"+t.join("&")}if($("#passwdReset").attr("href",s),$("body").on("changed-language",function(a,b){$("a").map(function(a,c){var d=$(c).attr("href");d&&(d=d.replace(/(\?|\&)(fcpil|interfacelanguage)\=([^&]+)/g,"$1$2="+b),$(c).attr("href",d))})}),o||DowJones.Translate.init(),$("body").trigger("changed-language",[DowJones.Translate.currLang]),g){DowJones.OneIdentity.getFormInstances.loginComponent.postToAuthEndpoint("","G1maRed1rectTe$tLT","",!0)}else $("body").trigger("hideloading")});