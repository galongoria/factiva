function addItmsFromHidden(){var n,t,i,r,u;try{RecallSources();RecallSourceLists();n=GetOperator("aup");RecallAuthors(n);RecallAuthorLists(n);t=GetOperator("cop");RecallCompanies(t);RecallCompanyLists(t);i=GetOperator("sop");RecallNewsSubjects(i);RecallSubjectLists(i);r=GetOperator("iop");RecallIndustries(r);RecallIndustryLists(r);u=GetOperator("rop");RecallRegions(u);RecallRegionLists(u);RecallLanguages();RecallExpertSearches();RecallExecutives(GetOperator("pop"));RecallExecutiveLists()}catch(f){}}function ExpandCollapseFES(n){var t=$(n).parents("li:eq(0)").find(".fesChildren");$(t).is(":visible")?($(n).parents("li:eq(0)").find(".mnuBtn").show(),$(t).hide(),$(n).parents("li:eq(0)").find(".sbNoChildren").hide()):($(t).show(),$(n).hide(),$(n).parents("li:eq(0)").find(".sbNoChildren").show())}function GetObject(n){var t=$("#"+n).val();return isMeaningful(t)?eval(t):null}function GetOperator(n){var t=$("input:radio[name="+n+"]:checked").val();return isMeaningful(t)?t.toLowerCase():"or"}function RecallSources(){function n(n,t){var u=GetObject(t),i,f,e,o,r;if(u!=null)for(r=0;r<u.length;r++)i=u[r],f=MapSourceType(i[sc_json.type]),e=GetUiSourceCode(f,i[sc_json.groupCode],i[sc_json.sourceCode]),o=GetSourceName(i[sc_json.sourceCode],i[sc_json.sourceName],i[sc_json.groupName],i[sc_json.listName]),f!=null&&e!=null&&o!=null&&addLstItm("sc",e,o,JSON.stringify(i),n)}sc_json!=null&&isMeaningful(sc_json.type)&&isMeaningful(sc_json.groupCode)&&isMeaningful(sc_json.sourceCode)&&isMeaningful(sc_json.sourceName)&&isMeaningful(sc_json.groupName)&&isMeaningful(sc_json.listName)&&(n("or",itmMngr.sc.incName),n("not",itmMngr.sc.excName))}function RecallSourceLists(){if(sl_json!=null){var n=function(n,t){var u=GetObject(n),i,r,f;if(u!=null)for(r=0;r<u.length;r++)i=u[r],f=GetListName(i,"sls"),addLstItm("sl","sl_"+i[sl_json.id],f,JSON.stringify(i),t)};n(itmMngr.sl.incName,"or");n(itmMngr.sl.excName,"not")}}function RecallAuthors(n){function t(n,t){var u=GetObject(t),i,r;if(u!=null)for(r=0;r<u.length;r++)i=u[r],addLstItm("au","au_"+i[au_json.code],i[au_json.name][1],JSON.stringify(i),n)}au_json!=null&&(t(n,itmMngr.au.incName),t("not",itmMngr.au.excName))}function RecallCompanies(n){function t(n,t){var u=GetObject(t),i,r;if(u!=null)for(r=0;r<u.length;r++)i=u[r],addLstItm("co","co_"+i[co_json.code],i[co_json.name],JSON.stringify(i),n)}co_json!=null&&(t(n,itmMngr.co.incName),t("not",itmMngr.co.excName))}function RecallCompanyLists(n){function t(n,t){var u=GetObject(t),i,f,r;if(u!=null)for(r=0;r<u.length;r++)i=u[r],f=GetListName(i,"cls"),addLstItm("cl","cl_"+i[cl_json.id],f,JSON.stringify(i),n)}cl_json!=null&&(t(n,itmMngr.cl.incName),t("not",itmMngr.cl.excName))}function RecallAuthorLists(n){function t(n,t){var u=GetObject(t),i,f,r;if(u!=null)for(r=0;r<u.length;r++)i=u[r],f=GetListName(i,"als"),addLstItm("al","al_"+i[al_json.id],f,JSON.stringify(i),n)}al_json!=null&&(t(n,itmMngr.al.incName),t("not",itmMngr.al.excName))}function RecallIndustryLists(n){function t(n,t){var u=GetObject(t),i,f,r;if(u!=null)for(r=0;r<u.length;r++)i=u[r],f=GetListName(i,"ils"),addLstItm("il","il_"+i[il_json.id],f,JSON.stringify(i),n)}il_json!=null&&(t(n,itmMngr.il.incName),t("not",itmMngr.il.excName))}function RecallRegionLists(n){function t(n,t){var u=GetObject(t),i,f,r;if(u!=null)for(r=0;r<u.length;r++)i=u[r],f=GetListName(i,"rls"),addLstItm("rl","rl_"+i[rl_json.id],f,JSON.stringify(i),n)}rl_json!=null&&(t(n,itmMngr.rl.incName),t("not",itmMngr.rl.excName))}function RecallExecutiveLists(n){function t(n,t){var u=GetObject(t),i,f,r;if(u!=null)for(r=0;r<exedListsObj.length;r++)i=u[r],f=GetListName(i,"pls"),addLstItm("pl","pl_"+i[rl_json.id],f,JSON.stringify(i),n)}pl_json!=null&&(t(n,itmMngr.pl.incName),t("not",itmMngr.pl.excName))}function RecallSubjectLists(n){function t(n,t){var u=GetObject(t),i,f,r;if(u!=null)for(r=0;r<u.length;r++)i=u[r],f=GetListName(i,"nls"),addLstItm("nl","nl_"+i[nl_json.id],f,JSON.stringify(i),n)}nl_json!=null&&(t(n,itmMngr.nl.incName),t("not",itmMngr.nl.excName))}function RecallNewsSubjects(n){function t(n,t){var u=GetObject(t),i,r;if(u!=null)for(r=0;r<u.length;r++)i=u[r],addLstItm("ns","ns_"+i[ns_json.code],i[ns_json.name],JSON.stringify(i),n)}if(ns_json!=null){if(!isMeaningful(ns_json.code)||!isMeaningful(ns_json.name))return null;t(n,itmMngr.ns.incName);t("not",itmMngr.ns.excName)}}function RecallIndustries(n){function t(n,t){var u=GetObject(t),i,r;if(u!=null)for(r=0;r<u.length;r++)i=u[r],addLstItm("in","in_"+i[in_json.code],i[in_json.name],JSON.stringify(i),n)}if(in_json!=null){if(!isMeaningful(in_json.code)||!isMeaningful(in_json.name))return null;t(n,itmMngr["in"].incName);t("not",itmMngr["in"].excName)}}function RecallRegions(n){function t(n,t){var u=GetObject(t),i,r;if(u!=null)for(r=0;r<u.length;r++)i=u[r],addLstItm("re","re_"+i[re_json.code],i[re_json.name],JSON.stringify(i),n)}re_json!=null&&(t(n,itmMngr.re.incName),t("not",itmMngr.re.excName))}function RecallLanguages(){var n,t,f,i,u,r;if(la_json==null)return null;if((n=$("#ipcl").val(),isMeaningful(n))&&(t=n.substring(n.indexOf("[",0)+1,n.indexOf("]",0)).split(","),t!=null))for(r=0;r<t.length;r++)f=t[r],i=f.toString().valueOf(),u=la_json[i],isMeaningful(u)&&addLstItm("la","la_"+i,u,i,"or")}function RecallExpertSearches(){var n,t,i;if(fes_json!=null&&(n=GetObject(itmMngr.fes.incName),n!=null))for(i=0;i<n.length;i++)t=n[i],addLstItm("fes","fes_"+t[fes_json.id],t[fes_json.name],JSON.stringify(t),"and")}function RecallExecutives(n){function t(n,t){var u=GetObject(t),i,f,r;if(u!=null)for(r=0;r<u.length;r++)i=u[r],f=i[pe_json.name][1],i[pe_json.company]&&i[pe_json.company][29].length>0&&(f+="("+i[pe_json.company][29]+")"),addLstItm("pe","pe_"+i[pe_json.execCode],f,JSON.stringify(i),n)}pe_json!=null&&(t(n,itmMngr.pe.incName),t("not",itmMngr.pe.excName))}function sbOnLoad(n){LOADING_HTML='<div class="mnuMsg">'+translate("loading")+"...<\/div>";$.each($("tr.pnl"),function(t,i){i.style.display="none";var r="#"+i.id;i.mnu=$(r+"Mnu")[0];i.txt=$(r+"Txt").keypress(lkp_keypress)[0];i.lkp=$(r+"Lkp").click(lkp_click)[0];i.brws=$(r+"Brws").click(brws_click).hide()[0];i.id!="lk"&&setLstDsply(i.id);tabs[t]=$(r+"Tab").click(pnlTab_click)[0];tabs[t].pnl=i;trTabs[t]=$(r+"TrTab").click(pnlTrTab_click)[0];trTabs[t].pnl=i;i.id==n&&(tabs[t].className="pnlTabOpen",trTabs[t].className="pnlTrTabOpen",setPnlDsply(i,!1))});tglDtRng(document.getElementById("dr"));gMoreOptsBtn=$("#moreOptsBtn").click(moreOptsBtn_click)[0];gMoreOptsBtnTr=$("#moreOptsBtnTr").click(moreOptsBtnTr_click)[0];gMoreOptsBtn.moreOptsPnl=$("#moreOptsPnl")[0];"moreOptsBtn"==n&&(gMoreOptsBtn.className="pnlTabOpen",gMoreOptsBtn.moreOptsPnl.style.display="");"moreOptsBtnTr"==n&&(gMoreOptsBtnTr.className="pnlTrTabOpen");$("#flagBox").val("lo");DiscoveryFilterManager.Instance().RenderFilters();$("#ftx").val()&&$("#ftx").trigger("keydown");CopyPasteTracker.bindPasteEvent($("textarea#ftx"));$("#srcNmOnlylk, #excDiscSrcslk").click(function(){this.value=this.checked?"on":"off"})}function pnlTab_click(){var n,t;if(CloseMoreSrchOptions(),this.pnl.style.display==""){this.className="pnlTab";setPnlDsply(this.pnl,!0);return}for(n=0;n<tabs.length;n++)t=tabs[n]==this,tabs[n].className=t?"pnlTabOpen":"pnlTab",setPnlDsply(tabs[n].pnl,!t)}function pnlTrTab_click(){var n,t;if(CloseMoreSrchOptionsTr(),this.pnl.style.display=="none"){this.className="pnlTrTab";return}for(n=0;n<trTabs.length;n++)t=trTabs[n]==this,trTabs[n].className=t?"pnlTrTabOpen":"pnlTrTab"}function CloseMoreSrchOptions(){gMoreOptsBtn.className="pnlTab";gMoreOptsBtn.moreOptsPnl.style.display="none"}function CloseMoreSrchOptionsTr(){gMoreOptsBtnTr.className="pnlTrTab"}function CloseAllChannel(){for(var n=0;n<tabs.length;n++)tabs[n].className="pnlTab",setPnlDsply(tabs[n].pnl,!0)}function CloseAllChannelTr(){for(var n=0;n<trTabs.length;n++)trTabs[n].className="pnlTrTab"}function moreOptsBtn_click(){this.className=="pnlTab"?(CloseAllChannel(),this.className="pnlTabOpen",this.moreOptsPnl.style.display=""):CloseMoreSrchOptions()}function moreOptsBtnTr_click(){this.className=="pnlTrTab"?(CloseAllChannelTr(),this.className="pnlTrTabOpen"):CloseMoreSrchOptionsTr()}function editListsCallBack(n){var t=$("#"+n+"Tab");t.length>0&&(t[0].className="pnlTabOpen",setPnlDsply(t[0].pnl,!1))}function setPnlDsply(n,t){var o,u,f,s,e,i,r;if(t){n.mnu.innerHTML="";n.style.display="none";return}bHideInfo=!1;switch(n.id){case"au":n.style.display="";n.txt&&(n.txt.value="");bAuHasListsUserAccess?(n.mnu.innerHTML=LOADING_HTML,n.brws&&(n.brws.style.display="none"),doXmlHttp("iType="+(n.id=="au"?"al":n.id)+"&code=root",n.mnu)):(o="enterAuthorLookUpTerm",n.mnu.innerHTML="<div>"+translate(o)+"<\/div>");break;case"lk":u=$("#sc").length;f=$("#au").length;s=u&&f?"enterMRMLookUpTerm":f?"enterMRMLookUpTerm2":u?"enterLookUpTerm":"enterLookUpTerm2";n.mnu.innerHTML="<div>"+translate(s)+"<\/div>";n.style.display="";break;case"sc":n.style.display="";e=document.getElementById("scCat");n.mnu.innerHTML=LOADING_HTML;n.txt.value="";document.getElementById("scMnuHdr").style.display="";doXmlHttp(e.options[e.selectedIndex].value,n.mnu);break;case"in":case"re":case"ns":n.style.display="";n.mnu.innerHTML=LOADING_HTML;n.txt&&(n.txt.value="");i=$("#"+n.id+"Cat");r="iType="+n.id+"&code=root";i.length>0&&(i[0].style.display="",r=i.val());$("#"+n.id+"MnuHdr").length>0&&$("#"+n.id+"MnuHdr").show();doXmlHttp(r,n.mnu);break;case"pe":bHideInfo=!0;n.style.display="";n.mnu.innerHTML=LOADING_HTML;n.txt&&(n.txt.value="");i=$("#"+n.id+"Cat");r="iType=pl";i.length>0&&(i[0].style.display="",r=i.val());doXmlHttp(r,n.mnu);break;default:n.style.display="";n.mnu.innerHTML=LOADING_HTML;n.txt&&(n.txt.value="");n.brws&&(n.brws.style.display="none");doXmlHttp("iType="+(n.id=="co"?"cl":n.id)+"&code=root",n.mnu)}}function brws_click(){var n=getMyPnl(this),t;switch(n.id){case"sc":case"in":case"ns":case"pe":case"re":t=$("#"+n.id+"MnuHdr");t.length>0&&(t[0].style.display="")}setPnlDsply(n,!1)}function lkp_click(){var t="",n=getMyPnl(this),r,i;if(trim(n.txt.value)=="")return alert(translate("enterSearchCriteria")),!1;switch(n.id){case"sc":document.getElementById("scMnuHdr").style.display="none";document.getElementById("srcNmOnly").checked&&(t="&srcNmOnly=1");t=t+"&excDiscSrcs="+($("#excDiscSrcs").is(":checked")?"1":"0");break;case"lk":$("#srcNmOnlylk").is(":checked")&&(t="&srcNmOnly=1");t=t+"&excDiscSrcs="+($("#excDiscSrcslk").is(":checked")?"1":"0");break;case"au":t=t+"&excInactiveAuthrs="+($("#auExInactive").is(":checked")?"1":"0");break;case"in":case"ns":case"pe":case"re":r=$("#"+n.id+"MnuHdr");r.length>0&&(r[0].style.display="none")}return n.id=="lk"?(queue=[],i=document.getElementById("lk").txt.value.replace("&","%26"),$("#sc").length&&queue.push("iType=sc&query="+i+t),showAuthor&&queue.push("iType=au&query="+i),queue.push("iType=co&query="+i),$("#pe").length&&queue.push("iType=pe&query="+i),queue.push("iType=ns&query="+i),queue.push("iType=in&query="+i),queue.push("iType=re&query="+i),queue.push("iType=pe&query="+i),n.mnu.innerHTML="",doLookupXmlHttp()):(n.mnu.innerHTML='<div class="mnuMsg">'+translate("runningQueryPhrase")+"...<\/div>",doXmlHttp("iType="+n.id+"&query="+n.txt.value.replace("&","%26")+t,n.mnu),n.brws&&(n.brws.style.display="")),!1}function lkp_keypress(n){var i,t;return(window.event&&(n=window.event),i=n.keyCode?n.keyCode:n.which,i==13)?(t=getMyPnl(this),t.lkp.click?itemselectedflag==1?itemselectedflag=0:t.lkp.click():itemselectedflag==1?itemselectedflag=0:$(t.lkp).trigger("click"),!1):!0}function lstItm(n,t,i,r,u){this.id=n;this.value=i;this.desc=t;this.bool=r;this.metadata=u}function lstItmFes(n,t,i,r){var u=eval("("+i.replace(/(\r\n|\n|\r)/gm," ")+")");this.id=n;this.value=i;this.desc=t;this.bool=r;this.pItmId=u["4"]}function addLstItm(n,t,i,r,u,f){var e,o,h,s;switch(n){case"la":t.indexOf("|")>-1&&clearLst("la");break;case"sl":e=itmMngr.sl.itmArr;itmMngr.sl.itmArr=e.deleteIndex(e.findObjIndexCaseInSensitive("id",t));break;case"sc":if(u!="not")for(e=itmMngr.sc.itmArr,o=0;o<e.length;o++)h=e[o].id.substring(3,4),e[o].bool!="not"&&(h==t.substring(3,4)||h.toLowerCase()=="u")&&(t.indexOf("|")>-1||e[o].id.indexOf("|")>-1);break;case"fes":clearLst("fes");itmMngr[n].itmArr[itmMngr[n].itmArr.length]=new lstItmFes(t,i,r,u);return}s=itmMngr[n].itmArr;isItemAlreadyInList(t,s)||(s[s.length]=new lstItm(t,i,r,u,f))}function isItemAlreadyInList(n,t){var r,i;if(!t)return!0;for(i=0;i<t.length;i++)if(r=t[i],r&&r.id===n)return!0;return!1}function IsOnlyExcludedSources(){var i=0,r=0,n=itmMngr.sc.itmArr,t;if(n&&n.length>0)for(t=0;t<n.length;t++){if(n[t].id.indexOf("sc_u_")>-1&&n[t].bool!="not")return!1;n[t].bool=="not"?r++:i++}return i==0&&r>0}function IsIncludedSources(){var n=jQuery.grep(itmMngr.sc.itmArr,function(n){return n.bool.toLowerCase()!="not"});return n.length>0}function IsUnkownCategorySourceExist(){var n=itmMngr.sc.itmArr,t;if(n&&n.length>0)for(t=0;t<n.length;t++)if(n[t].bool!="not"&&n[t].id.substring(3,4)=="u")return!0;return!1}function RemoveAllPredefineTopSources(){var i=[],t=itmMngr.sc.itmArr,n;if(t&&t.length>0)for(n=0;n<t.length;n++)t[n].id.indexOf("|")>-1&&i.push(t[n].id);for(n=0;n<i.length;n++)rmvLstItm("sc",i[n])}function rmvLstItm(n,t){var u=itmMngr[n].itmArr,r=xGetElementsByAttribute("A","code",t),i;if(itmMngr[n].itmArr=u.deleteIndex(u.findObjIndexCaseInSensitive("id",t)),r)for(i=0;i<r.length;i++)r[i].className="mnuItm"}function clearLst(n,t){while(itmMngr[n].itmArr.length>0)rmvLstItm(n,itmMngr[n].itmArr[0].id);t&&setLstDsplay(itmMngr[n].pnlId)}function updtLstItms(n,t){for(itmType in itmMngr)if(itmMngr[itmType].pnlId==n){tArr=itmMngr[itmType].itmArr;for(var i=0;i<tArr.length;i++)tArr[i].bool!="not"&&(tArr[i].bool=t)}}function setLstDsply(n,t){var u=getBoolLst(n,!1),i=getBoolLst(n,!0),r=document.getElementById(n+"Lst");t||(t=n);itmMngr[n]&&(r.innerHTML=translate(itmMngr[n].defTxt));u!=""?r.innerHTML=u+i:i!=""&&(r.innerHTML=i);g_dj_fl_jsLib_1_0_pillsManager.renderItemsIntoNewPanel(i,n);setMnuItmDsply(document.getElementById(t+"Mnu"))}function edtLst_click(n,t){var i;switch(t){case"sl":i="../msl/default.aspx?pa=1&listid="+n;doLinkSubmit(i);break;case"cl":i="../cl/default.aspx?ipmn=3&ipid="+n;doLinkSubmit(i)}}function getBoolLst(n,t){var i="",u,r,f,o,e;for(itmType in itmMngr)if(u=itmMngr[itmType],o=t?u.excName:u.incName,u.pnlId==n){for(f=[],e=0;e<u.itmArr.length;e++)r=u.itmArr[e],u.excName&&t&&r.bool=="not"?(f[f.length]=r.value,i+=' <span class="lstLbl">'+translate(r.bool.toLowerCase()+"Label")+"<\/span> ",i+='<a href="javascript:void(0)" class="lstItm" ',i+="onclick=\"lstItm_click('"+itmType+"','"+r.id+"');return false;\" ",i+='class="lstItem" title="'+translate("removeSelection")+'">'+r.desc+"<\/a>"):u.incName&&!t&&r.bool!="not"&&(f[f.length]=r.value,i!=""&&(n=="sc"||n=="au")?i+=' <span class="lstLbl"> '+translate(r.bool.toLowerCase()+"Label")+" <\/span>":i!=""&&(i+=' <a href="javascript:void(0)" onclick="lstLbl_click(\''+n+'\');return false;" class="lstLbl">'+translate(r.bool.toLowerCase()+"Label")+"<\/a> "),i+='<a href="javascript:void(0)" class="lstItm" ',i+="onclick=\"lstItm_click('"+itmType+"','"+r.id+"');return false;\" ",i+='class="lstItem" title="'+translate("removeSelection")+'">'+r.desc+"<\/a>");o&&(GetBForm().elements[o].value=f.length==0?"[]":"["+f.join()+"]")}return i}function saveList_click(n){switch(n){case"sc":case"co":case"au":case"in":case"ns":case"re":case"pe":return g_dj_fl_jsLib_1_0_pillsManager.displayMain(n),!1;default:return!1}}function lstItm_click(n,t){rmvLstItm(n,t);setLstDsply(itmMngr[n].pnlId)}function listItm_update(n,t,i){var r=itmMngr[n].itmArr,u=r[r.findObjIndexCaseInSensitive("id",t)];u&&(u.desc=i,setLstDsply(itmMngr[n].pnlId))}function lstLbl_click(n){var t=document.getElementById(n+"Or"),i=document.getElementById(n+"And");t&&i&&(t.checked?(i.checked=!0,updtLstItms(n,"and")):(t.checked=!0,updtLstItms(n,"or")),setLstDsply(n))}function srchOp_click(n,t){updtLstItms(n,t);setLstDsply(n)}function setMnuItmDsply(n){$.each($(n).find("a[code]"),function(n,t){var r=t.getAttribute("code"),u=r.split("_")[0],i=itmMngr[u].itmArr,e,f,n;if(u=="la"&&r.toLowerCase().indexOf("la_a|")>-1)t.className=i.length==0?"mnuItmInc":"mnuItm";else if(u=="sc"&&r.toLowerCase().indexOf("sc_a|")>-1)t.className=i.length==0&&itmMngr.sl.itmArr.length==0?"mnuItmInc":"mnuItm";else if(u=="fes"&&r.toLowerCase().indexOf("fes_")>-1)e=$(t).data("itmid"),t.className=i.length>0?e!=i[0].pItmId?"mnuItm":"mnuItmInc":"mnuItm";else{for(f=!1,n=0;n<i.length;n++)if(r.toLowerCase()==i[n].id.toLowerCase()){t.className=i[n].bool=="not"?"mnuItmExc":"mnuItmInc";f=!0;break}f||(t.className="mnuItm")}})}function mnuBtn_click(n,t){var r=$(n),i=r.siblings("div"),u=r.find("span");n.className=="mnuBtn"?(u.html("-"),n.className="mnuBtnOpen",i.show(),i.find("ul").length===0&&(i.html(LOADING_HTML),t+="&excDiscSrcs="+($("#excDiscSrcs").is(":checked")?"1":"0"),doXmlHttp(t,i[0]))):(u.html("+"),n.className="mnuBtn",i.hide())}function mnuItm_click(n,t){var i,c,f,l,e;dClick=0;i=n.getAttribute("code");i=i.toLowerCase();var r=i.split("_")[0],a=itmMngr[r].pnlId,v=xGetElementsByAttribute("A","code",i),o=itemSelected(r,i);if(o!="empty"||o=="not"){lstItm_click(r,i);return}var s=xGetParentByClassName(n,"pnlMnu"),h=s&&s.getAttribute("id")=="lkMnu"?"lk":"",u=xFirstChild(n,"#text").nodeValue;r=="au"&&(c=eval("("+t.replace(/(\r\n|\n|\r)/gm," ")+")"),f=c["18"]["1"],f!=null&&(u=f));r=="fes"&&(t=t.replace(/(\r\n|\n|\r)/gm," "),l=eval("("+t+")"),e=l["8"],e!=null&&(u=e));u=encodeURIComponent(u).replace("'","%27");r=="la"?itemClickHandler(i,t.replace(/\'/g,"\\'"),h,u):timeout=setTimeout("itemClickHandler('"+i+"','"+t.replace(/\'/g,"\\'")+"','"+h+"',\""+u+'"  );',250);return}function mnuItm_dblClick(){dClick=1;(xUA.indexOf("msie 9")>0||xUA.indexOf("msie")==-1)&&clearTimeout(timeout);return}function itemClickHandler(n,t,i,r){var f,o,e,u,s;if(r=decodeURIComponent(r),t=t.replace(/\&quot;/g,'\\"'),f=n.split("_")[0],pnlId=itmMngr[f].pnlId,o=function(){var t=$("#"+pnlId+"Mnu").find("a[code='"+n+"']:first").attr("data-mdata");return t?$.parseJSON(t):null},dClick==1){dClick=0;e=o();addLstItm(f,n,r,t,"not",e);setLstDsply(pnlId,i);return}switch(pnlId){case"sc":e=o();u="or";break;case"au":case"la":u="or";break;case"fes":u="and";break;default:s=document.getElementById(pnlId+"Or");u=s.checked?"or":"and"}switch(n.toLowerCase()){case"la_a|":clearLst("la");setLstDsply(pnlId);break;case"sc_a|":clearLst("sc");clearLst("sl");setLstDsply(pnlId);break;default:addLstItm(f,n,r,t,u,e);setLstDsply(pnlId,i)}}function GetDesc(n,t,i){var u="",r,f;return n&&n=="sc"&&(r="",t&&t!=""&&(f=t.substring(3,4),r=GetTranslateSourceType(f)),r&&r!=""&&(u=r+i)),u==""&&(u=i),u}function GetTranslateSourceType(n){var t;switch(n){case"p":t=translate("publication");break;case"w":t=translate("webSite");break;case"i":t=translate("picture");break;case"m":t=translate("multimedia");break;case"b":t=translate("blog");break;case"o":t=translate("board");break;case"t":t=translate("internal")}return t}function dltLst_click(n,t,i){if(confirm(translate("confirmDeleteItem"))){var u=xParent(n,!0),f=xParent(u,!0),r=xParent(f,!0);doXmlHttp("rType=d&iType="+t+"&listId="+i,r);rmvLstItm(t,t+"_"+i);setLstDsply(getMyPnl(r).id)}}function dltItm_click(n,t){if(confirm(translate("confirmDeleteItem"))){var i=xParent(n,!0),r=xParent(i,!0),u=xParent(r,!0);doXmlHttp(t,u)}}function alpha_click(n,t){var u,r,i,f;if(n.className!="alphaItmOn"){for(u=xParent(n,!0),r=xGetElementsByTagName("A",u),i=0;i<r.length;i++)r[i].className=r[i]==n?"alphaItmOn":"";f=xNextSib(u,"DIV");f.innerHTML=LOADING_HTML;t+="&excDiscSrcs="+($("#excDiscSrcs").is(":checked")?"1":"0");doXmlHttp(t,f)}}function doXmlHttp(n,t){var u=GetBForm(),r="_XFORMSESSSTATE="+u.elements._XFORMSESSSTATE.value.replace(/\+/g,"%2b").replace(/\=/g,"%3d"),i;$("[name=xsrftoken]",u).length>0&&(r+="&xsrftoken="+$("[name=xsrftoken]",u).val().replace(/\+/g,"%2b").replace(/\=/g,"%3d"));r+="&hideInfo="+bHideInfo;r+="&grpOnly="+bGroupOnly;r+="&isAlertBld="+bIsTrackBuilder;r+="&showFii="+bShowFii+"&"+n+"&";r+="&requestFrom="+($("#searchBuilderContainer").attr("data-search-builder-referrer")||"sb");i=getXmlHttp();i.open("POST","../sb/sbservice.aspx",!0);i.setRequestHeader("Content-Type","application/x-www-form-urlencoded;");i.onreadystatechange=function(){i.readyState==4&&i.responseText&&(i.responseText.charAt(0)!="<"?eval(i.responseText):(t.id=="scMnu"&&xUA.indexOf("msie")!=-1&&setTimeout("ForceToRerender('"+t.id+"');",200),t.innerHTML=i.responseText.replace(/(\r\n|\n|\r)/gm,""),setMnuItmDsply(t)))};i.send(r)}function ForceToRerender(n){var t=document.getElementById(n),i=document.createElement("DIV");return t&&t.appendChild(i),!1}function doLookupXmlHttp(){var i,r,t,n;queue!=null&&queue.length!=0&&(i=document.createElement("DIV"),i.innerHTML='<div class="mnuMsg">'+translate("runningQueryPhrase")+"...<\/div>",document.getElementById("lk").mnu.appendChild(i),r=GetBForm(),t="_XFORMSESSSTATE="+r.elements._XFORMSESSSTATE.value.replace(/\+/g,"%2b").replace(/\=/g,"%3d"),$("[name=xsrftoken]",r).length>0&&(t+="&xsrftoken="+$("[name=xsrftoken]",r).val().replace(/\+/g,"%2b").replace(/\=/g,"%3d")),t+="&hideInfo="+bHideInfo,t+="&grpOnly="+bGroupOnly,t+="&showFii="+bShowFii+"&"+queue[0]+"&",n=getXmlHttp(),n.open("POST","../sb/sbservice.aspx",!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),n.onreadystatechange=function(){n.readyState==4&&n.responseText&&(n.responseText.charAt(0)!="<"?eval(n.responseText):(i.innerHTML=n.responseText,setMnuItmDsply(i),queue.splice(0,1),queue.length>0&&doLookupXmlHttp()))},n.send(t))}function srcCat_onchange(n){var t=document.getElementById("sc");t.mnu.innerHTML=LOADING_HTML;doXmlHttp(n.options[n.selectedIndex].value,t.mnu)}function ChangeCategory(n,t){var i=$("#"+t)[0],r=$(n).val();i.mnu.innerHTML=LOADING_HTML;doXmlHttp(r,i.mnu)}function apndFreeTxt(n){var t=document.getElementsByTagName("textarea")[1];t.value===t.title&&(t.value="");t.value=trim(t.value);t.value!=""&&(t.value+=" ");t.value+=n;window._searchAssistant&&window._searchAssistant.editor&&window._searchAssistant.editor.appendValue(n)}function tglDtRng(n){n&&($(n).val()==="Custom"?$("#datePnl").show().find("input:first").focus():$("#datePnl").hide())}function IsNoFIISelected(){return itmMngr.au.itmArr.length==0&&itmMngr.al.itmArr.length==0&&itmMngr.co.itmArr.length==0&&itmMngr.cl.itmArr.length==0&&itmMngr.ns.itmArr.length==0&&itmMngr.nl.itmArr.length==0&&itmMngr["in"].itmArr.length==0&&itmMngr.il.itmArr.length==0&&itmMngr.re.itmArr.length==0&&itmMngr.rl.itmArr.length==0&&itmMngr.fes.itmArr.length==0&&itmMngr.pe.itmArr.length==0&&itmMngr.pl.itmArr.length==0&&!DiscoveryFilterManager.Instance().HasFilter()}function validateSb(){var u="",n=[],t,r,i;if(bSearchForm?trim(document.getElementById("atx").value)==""&&trim(document.getElementById("otx").value)==""&&trim(document.getElementById("htx").value)==""&&IsNoFIISelected()&&(n[n.length]=translate("useIntIdxOrEnterWords")):(t=$("#sbFTQSize").val(),t<=0&&(t=2048),document.getElementById("ftx").value.length>t&&(n[n.length]=translate("errorForUser210101")),trim(document.getElementById("ftx").value)==""&&IsNoFIISelected()&&(n[n.length]=translate("useIntIdxOrEnterWords"))),r=document.getElementById("dr"),r.options[r.options.selectedIndex].value==="Custom"&&(IsDateRangeEmpty()?n[n.length]=translate("customDateSelected"):IsDateRangeValid()||(n[n.length]=translate("errorForUser110141"))),n.length==0)return ManageInputPrefItemMetadata(!1),!0;for(i=0;i<n.length;i++)u+="\n- "+n[i];return alert(u),!1}function validateExpertSb(){var r="",n=[],i=$("#sbFTQSize").val(),t;if(i<=0&&(i=2048),document.getElementById("ftx").value.length>i&&(n[n.length]=translate("errorForUser210101")),trim(document.getElementById("ftx").value)==""&&(n[n.length]=translate("useIntIdxOrEnterWords")),n.length==0)return!0;for(t=0;t<n.length;t++)r+="\n- "+n[t];return alert(r),!1}function IsDateRangeValid(){var n,t,i,r,u,f,e,o,s=$("#frdt[type=text]");return s.length?(n=trim(s.val()),t=trim($("#todt").val()),n.length==8&&t.length==8&&(i=n.substring(0,4),r=n.substring(4,6),u=n.substring(6,8),f=t.substring(0,4),e=t.substring(4,6),o=t.substring(6,8))):(i=document.getElementById("fry").value,r=document.getElementById("frm").value,u=document.getElementById("frd").value,f=document.getElementById("toy").value,e=document.getElementById("tom").value,o=document.getElementById("tod").value),IsValidDate(i,r,u)&&IsValidDate(f,e,o)}function populateFromDate(){var t=$("#frdt[type=text]"),n=document.getElementById("dateFrom_txb");t.length?t.val(n.value):(document.getElementById("fry").value=n.value.substring(0,4),document.getElementById("frm").value=n.value.substring(4,6),document.getElementById("frd").value=n.value.substring(6,8))}function populateToDate(){var t=$("#todt[type=text]"),n=document.getElementById("dateTo_txb");t.length?t.val(n.value):(document.getElementById("toy").value=n.value.substring(0,4),document.getElementById("tom").value=n.value.substring(4,6),document.getElementById("tod").value=n.value.substring(6,8))}function dateRangeOnKeyPress(n){var t=document.getElementById(n);t&&(document.getElementById(n).value="")}function IsDateRangeEmpty(){var n=!1,t=$("#frdt[type=text]");return t.length?sEmpty=trim(t.val())==""&&trim($("#todt").val())=="":n=trim(document.getElementById("fry").value)==""&&trim(document.getElementById("frm").value)==""&&trim(document.getElementById("frd").value)==""&&trim(document.getElementById("toy").value)==""&&trim(document.getElementById("tom").value)==""&&trim(document.getElementById("tod").value)=="",n}function getMyPnl(n){return $(n).closest(".pnl")[0]}function compareByATTR(n,t){function r(n,r){return n[t]<r[t]?i?-1:1:n[t]>r[t]?i?1:-1:0}var i=n;return r}function IsValidDate(n,t,i){var u=!1,r;return IsNumeric(n)&&IsNumeric(t)&&IsNumeric(i)&&(r=new Date(n,t-1,i),u=i==r.getDate()&&t-1==r.getMonth()&&n==r.getFullYear()),u}function IsNumeric(n){var i,t;if(n!=null){for(t=0;t<n.length&&!1;t++)if(i=n.charAt(t),"0123456789".indexOf(i)==-1)return!1;return!0}return!1}function deleteIndex(n){return n==-1?this:n==0?this.slice(1):n==this.length-1?this.slice(0,this.length-1):(tempArr1=this.slice(0,n),tempArr2=this.slice(n+1),returnArr=tempArr1.concat(tempArr2),returnArr)}function findIndex(n){for(i=0;i<this.length;i++)if(this[i]==n)return i;return-1}function findObjIndex(n,t){for(i=0;i<this.length;i++)if(this[i][n]==t)return i;return-1}function findObjIndexCaseInSensitive(n,t){for(i=0;i<this.length;i++)if(this[i][n].toLowerCase()==t.toLowerCase())return i;return-1}function isMeaningful(n){return n!=null&&n.toString().length>0&&n.toString().toLowerCase()!="undefined"?!0:!1}function MapSourceType(n){return sc_SourceType_json!=null&&isMeaningful(sc_SourceType_json[n])?sc_SourceType_json[n]:null}function GetUiSourceCode(n,t,i){var r=null,u=n,f;u!=null&&(u=u.toString().toLowerCase());switch(u){case"publications":r="p";break;case"websites":r="w";break;case"pictures":r="i";break;case"multimedia":r="m";break;case"blogs":r="b";break;case"boards":r="o";break;case"internal":r="t";break;case"unspecified":r="u"}return f=t!=null?t:i,"sc_"+r+"_"+f}function GetSourceName(n,t,i,r){if(n!=null)switch(n.toUpperCase()){case"P|":return translate("allPublications");case"W|":return translate("allWebSites");case"I|":return translate("allPictures");case"M|":return translate("allMultimedia");case"B|":return translate("allBlogs");case"O|":return translate("allBoards");case"T|":return translate("allCustDocs")}return isMeaningful(i)?i:isMeaningful(r)?r:t}function GetListName(n,t){var i="";switch(t){case"cls":i=n[cl_json.name];n[cl_json.isAccountItem]=="1"&&(i=translate("group")+":"+i);break;case"als":i=n[al_json.name];n[al_json.isAccountItem]=="1"&&(i=translate("group")+":"+i);break;case"nls":i=n[nl_json.name];n[nl_json.isAccountItem]=="1"&&(i=translate("group")+":"+i);break;case"ils":i=n[il_json.name];n[il_json.isAccountItem]=="1"&&(i=translate("group")+":"+i);break;case"rls":i=n[rl_json.name];n[rl_json.isAccountItem]=="1"&&(i=translate("group")+":"+i);break;case"sls":i=n[sl_json.name];n[sl_json.isAccountItem]=="1"&&(i=translate("group")+":"+i)}return i}function isBrowserBack(){var n=document.getElementById("flagBox");return n&&n.value!="un"?!0:!1}function ToggleSearchTabs(n,t){var o=xGetElementById("advLi"),s=xGetElementById("sfLi"),h=xGetElementById("btnFesSave"),c=document.body,k=document.getElementById("aod"),l,i=window._unifiedSearch,w=function(){i&&(i.selectUnifiedSearch(),i.preferences.isEditorOn||$("#unifiedSearch").click())},b=function(){i&&(i.unSelectUnifiedSearch(),i.preferences.isEditorOn&&$("#unifiedSearch").click())},a=GetBForm(),p,e;n?(t&&t.toLowerCase()==="unified"?(a.ist.value="Unified",w()):(a.ist.value="Advanced",b()),o&&(o.className="selected"),s&&(s.className=""),bSearchForm=!1,c&&$(c).addClass("clsAdvFrm"),l=xGetElementById("ftx"),h&&(h.style.display="")):(a.ist.value=bShowAdvAndLegacyTxtbox?"SearchFormWithFreeText":"SearchForm",s&&(s.className="selected"),o&&(o.className=""),bSearchForm=!0,c&&$(c).addClass("clsScrFrm"),l=xGetElementById("atx"),h&&(h.style.display="none"));var u=xGetElementById("freeTextDiv"),f=xGetElementById("searchFormDiv"),r=xGetElementById("unifiedSearchEditorControl"),v=xGetElementById("fts"),y=xGetElementById("sfs");bShowAdvAndLegacyTxtbox&&u&&f?(u.style.display="",f.style.display="",r&&(r.style.display="")):(u&&(n?(v.className="freeTextSwitch selected",y.className="searchFormSwitch",u.style.display="",r&&(r.style.display="")):(v.className="freeTextSwitch",u.style.display="none",r&&(r.style.display="none"))),f&&(n?(y.className="searchFormSwitch",f.style.display="none"):(y.className="searchFormSwitch selected",v.className="freeTextSwitch",f.style.display="")));p=xGetElementById("moreRow");p&&(p.style.display=n?"":"none");xSafeFocus(l);$("#fts").hasClass("selected")?($("#divExpampleLink").show(),window._searchAssistant&&(e=window._searchAssistant,e.ensure(),e.focus(),e.hasAssistedSearch&&e.isVisible()&&$(".sbControls").addClass("padded"))):($("#divExpampleLink").hide(),$(".sbControls").removeClass("padded"));$("#dateAndDupRow").find("ul.buttons").show()}function commonValidateSB(n,t){var e=document.getElementById("fdn"),h="tdct",u=document.getElementById("ftx"),f,r,o,s,i;if(trim(e.value)=="")return alert(translate("enterFldrNameUpto25Chars")),e.focus(),!1;if(hasIllegalChar2(e.value))return alert(translate("illegalChar-1")+" (<, >, &, #, \\, %, +, |, ~) "+translate("illegalChar-2")),!1;if(f=$("#sbFTQSize").val(),f<=0&&(f=2048),u.value.length>f)return alert(translate("errorForUser210101")),!1;if(t=="author"){if(itmMngr.au.itmArr.length==0)return alert(translate("selectAnAuthor")),xSafeFocus(r),!1;t="personal"}if(itmMngr.au.itmArr.length==0&&itmMngr.co.itmArr.length==0&&itmMngr.cl.itmArr.length==0&&itmMngr.ns.itmArr.length==0&&itmMngr["in"].itmArr.length==0&&itmMngr.re.itmArr.length==0)if(bSearchForm){if(r=document.getElementById("atx"),trim(r.value)==""&&trim(document.getElementById("otx").value)==""&&trim(document.getElementById("htx").value)==""&&IsNoFIISelected())if(bShowAdvAndLegacyTxtbox){if(trim(u.value)=="")return alert(translate("enterSearchOrFII")),xSafeFocus(r),!1}else return alert(translate("enterSearchOrFII")),xSafeFocus(r),!1}else if(trim(u.value)==""&&IsNoFIISelected())return alert(translate("enterSearchOrFII")),xSafeFocus(u),!1;if(o=document.getElementsByName(h),s=document.getElementById("incet"),s&&s.value!="Online"&&o&&o.length>0&&!ValidateMultipleCheckBoxes(h))return alert(translate("noContentTypeChecked")),!1;if(t=="personal"){if(!isValidPersFldr())return!1}else if(t=="group"){if(!isValidGrpFldr())return!1}else t=="select";return i=GetBForm(),i.action=n,i&&i.tdct&&CreateHiddenField(i,"itdct",$("[name='tdct']:checked").length>0),i.submit(),!1}function isValidPersFldr(){var i=document.getElementById("incet"),f=i&&i.value!="Online",e=f&&i.value=="Batch",n=document.getElementById("incea"),r,u,t;if(f){if(n!=null&&trim(n.value)=="")return alert(translate("enterEmailAddrForDelivery")),n.focus(),!1;if(n!=null&&!validateEmail(n.value))return alert(translate("invalidEmail")+" "+translate("profValidEmail")),n.select(),!1;if(e&&!ValidateMultipleCheckBoxes("insdtl"))return alert(translate("schedEmailSelected")+" "+translate("selectTime")),!1;if($("#indelf_1").is(":checked")){for(r=$(".week-days-chbx input"),u=!1,t=0;t<r.length;t++)if($(r[t]).is(":checked")){u=!0;break}if(!u)return alert(translate("selectDaysToDlvr")),!1}}return!0}function isValidGrpFldr(){var n=document.getElementById("iec");return trim(n.value)==""||!validateEmail(n.value)?(alert(translate("invalidEmail")+" "+translate("profValidEmail")),n.select(),!1):!0}function xSafeFocus(n){try{n.focus()}catch(t){}}function infoClick(n){var r=n.code,t="",i="",u=!1;switch(n.controlType.toLowerCase()){case"author":case"journalist":i="au";t=n.formalName;break;case"company":i=n.category=="ticker"?"ticker":"co";t=n.value;break;case"executive":i="pe";t=n.completeName;break;case"region":i="re";t=n.descriptor;break;case"newssubject":i="ns";t=n.descriptor;break;case"industry":i="in";t=n.descriptor;break;case"source":i="sc";t=n.formalName;u=GetSourceType(n.type)=="u"?!0:n.isGroup}switch(i){case"au":showAuthorInfo(n.nnid||n.nnId,"",n.formalName);break;case"pe":showExecutiveInfo(r,n.coFcode,"",t);break;default:RIND.getEntityDetails(t,r,i,u,onPopupClose)}return!1}function onPopupClose(n,t){t&&setPnlDsply(document.getElementById(n),!1)}function promoteClick(n){var i="",t="",r;switch(n.controlType.toLowerCase()){case"company":t="fds";apndFreeTxtODS(t);i=t+"="+n.code.toLowerCase();break;case"region":t="re";apndFreeTxtODS(t);i=t+"="+n.code.toLowerCase();break;case"newssubject":t="ns";apndFreeTxtODS(t);i=t+"="+n.code.toLowerCase();break;case"industry":t="in";apndFreeTxtODS(t);i=t+"="+n.code.toLowerCase();break;case"source":t="rst";apndFreeTxtODS(t);i=t+"="+n.code.toLowerCase();break;case"author":case"journalist":t="au";apndFreeTxtODS(t);r=n.nnid||n.nnId;i=t+"="+r.toLowerCase();break;case"executive":t="pe";apndFreeTxtODS(t);i=t+"="+n.code.toLowerCase()}return apndFreeTxt(i),!1}function apndFreeTxtClick(n,t){apndFreeTxtODS(n);var i=n+"="+t;return apndFreeTxt(i),!1}function apndFreeTxtODS(n){switch(n.toLowerCase()){case"au":xGetElementById("aicr").value=parseInt(xGetElementById("aicr").value)+1;break;case"fds":xGetElementById("cicr").value=parseInt(xGetElementById("cicr").value)+1;break;case"re":xGetElementById("ricr").value=parseInt(xGetElementById("ricr").value)+1;break;case"ns":xGetElementById("nsicr").value=parseInt(xGetElementById("nsicr").value)+1;break;case"in":xGetElementById("iicr").value=parseInt(xGetElementById("iicr").value)+1;break;case"rst":xGetElementById("sicr").value=parseInt(xGetElementById("sicr").value)+1;break;case"pe":xGetElementById("pecr").value=parseInt(xGetElementById("pecr").value)+1}}function excludeItem(n,t,i){var u=t.split("_")[0],r;if(t=t,r=itemSelected(u,t),r!="not"){dClick=1;r.length>0&&removeIncluded(u,t);itemClickHandler(t,n.replace(/\'/g,"\\'"),"",i);$("a[code]").filter(function(){var n=$(this).attr("code");n==t&&$(this).attr("class","mnuItmExc")});return}return}function notClick(n){var t="",i="",r,u;switch(n.controlType.toLowerCase()){case"company":t="co";i=n.value;category=0;break;case"region":t="re";i=n.descriptor;category=3;break;case"newssubject":t="ns";i=n.descriptor;category=4;break;case"industry":t="in";i=n.descriptor;category=1;break;case"source":t="sc";i=n.formalName;category=2;break;case"author":case"journalist":t="au";i=n.formalName;category=5;break;case"executive":t="pe";i=n.completeName;category=5}recordSuggestODS();r=t+"_"+(n.code||n.nnid).toLowerCase();n.controlType.toLowerCase()=="source"&&(u=GetSourceType(n.type),r=t+"_"+u+"_"+n.code.toLowerCase());var o=itmMngr[t].pnlId,e=getJSONObject(n),f=itemSelected(t,r);return f!="not"?(dClick=1,f.length>0&&removeIncluded(t,r),i=encodeURIComponent(i).replace("'","%27"),itemClickHandler(r,e.replace(/\'/g,"\\'"),"",i),!1):!1}function itemSelect(n){var t="",i="",u,r,e,o;itemselectedflag=1;dClick=0;u=n.controlType.toLowerCase();switch(u){case"company":t="co";i=n.value;category=0;$("#coTxt").val("");break;case"region":t="re";i=n.descriptor;category=3;$("#reTxt").val("");break;case"newssubject":t="ns";i=n.descriptor;category=4;$("#nsTxt").val("");break;case"industry":t="in";i=n.descriptor;category=1;$("#inTxt").val("");break;case"source":t="sc";i=n.formalName;category=2;$("#scTxt").val("");break;case"author":case"journalist":t="au";i=n.formalName;category=5;$("#auTxt").val("");break;case"executive":t="pe";i=n.completeName;category=5;$("#peTxt").val("")}recordSuggestODS();r="";u==="source"?(e=GetSourceType(n.type),r=t+"_"+e+"_"+n.code.toLowerCase()):u==="author"||u==="journalist"?(o=n.nnid||n.nnId,r=t+"_"+o.toLowerCase()):r=t+"_"+n.code.toLowerCase();var s=getJSONObject(n),f=itemSelected(t,r);return f=="empty"||f=="not"?(f=="not"&&removeExcluded(t,r),i=encodeURIComponent(i).replace("'","%27"),timeout=itemClickHandler(r,s.replace(/\'/g,"\\'"),"",i),!1):!1}function itemSelected(n,t){var r=itmMngr[n].itmArr,u=r.findObjIndexCaseInSensitive("id",t),i;return u>-1?(i=r[u].bool,i==""&&(i="or"),i):"empty"}function removeExcluded(n,t){var i=itmMngr[n].itmArr;return index=i.findObjIndexCaseInSensitive("id",t),index>-1?(i[index].bool=="not"&&rmvLstItm(n,t),!0):!1}function removeIncluded(n,t){var i=itmMngr[n].itmArr;return index=i.findObjIndexCaseInSensitive("id",t),index>-1?(i[index].bool!="not"&&rmvLstItm(n,t),!0):!1}function getJSONObject(n){var i="",r="",t,u;switch(n.controlType.toLowerCase()){case"company":i={code:n.code,name:n.value.replace(/\"/g,'\\"')};r="co";break;case"region":i={code:n.code,name:n.descriptor.replace(/\"/g,'\\"')};r="re";break;case"newssubject":i={code:n.code,name:n.descriptor.replace(/\"/g,'\\"')};r="ns";break;case"industry":i={code:n.code,name:n.descriptor.replace(/\"/g,'\\"')};r="in";break;case"source":t="";switch(n.type.toLowerCase()){case"publication":t=1;break;case"picture":t=2;break;case"webpage":t=3;break;case"multimedia":t=5;break;case"blog":t=6;break;case"board":t=7;break;case"internal":t=8;break;case"sourcefamily":t=0}i={sourceCode:n.code,listName:n.formalName.replace(/\"/g,'\\"'),type:t};r="sc";break;case"author":case"journalist":i={authorCode:n.nnid||n.nnId,outletName:n.outletName,name:{fullName:n.formalName.replace(/\"/g,'\\"')}};r="au";break;case"executive":i={execCode:n.code,name:{fullName:n.completeName.replace(/\"/g,'\\"')}};r="pe"}return u=UIFormStateMapper.MappDTO(r,i),processObject(u)}function processObject(n){var t="",i,r;t="{";for(i in n)r=n[i],t=typeof r!="object"?t+i+':"'+r+'",':t+i+":"+processObject(r)+",";return t.substr(0,t.length-1)+"}"}function GetSourceType(n){var t;switch(n.toLowerCase()){case"publication":t="p";break;case"webpage":t="w";break;case"picture":t="i";break;case"multimedia":t="m";break;case"blog":t="b";break;case"board":t="o";break;case"internal":t="i";break;case"sourcefamily":t="u"}return t}function recordSuggestODS(){var n=new RequestContext("factiva.com.ui.sb.ODSCaptureOnAutoCompleteService","RecordODS",null,recordSuggestODSCB,recordSuggestODSFailure);n.Add("category",category);n.Send()}function recordSuggestODSCB(){}function recordSuggestODSFailure(){}function setStatuses(){var n="";$("#excDiscSrcs").is(":checked")?($("#excDiscSrcs").val("on"),n="active"):($("#excDiscSrcs").val("off"),n="active|discont");typeof SourceSuggest!="undefined"&&SourceSuggest!=null&&$(SourceSuggest.options).length>0&&(SourceSuggest.options.statuses=n,np.web.widgets.autocomplete(SourceSuggest))}function setInactiveAuthorStatus(){var n=!1;$("#auExInactive").is(":checked")?($("#auExInactive").val("on"),n=!1):(n=!0,$("#auExInactive").val("off"));typeof AuthorSuggest!="undefined"&&AuthorSuggest!=null&&$(AuthorSuggest.options).length>0&&(AuthorSuggest.options.activeOnly=!n,np.web.widgets.autocomplete(AuthorSuggest))}function SetCaretAtEnd(n){var i=n.value.length,t;document.selection?(n.focus(),t=document.selection.createRange(),t.moveStart("character",-i),t.moveStart("character",i),t.moveEnd("character",0),t.select()):(n.selectionStart||n.selectionStart=="0")&&(n.selectionStart=i,n.selectionEnd=i,n.focus())}function CsrfKey(){var t=null,i=document.getElementById("csrf-key-container"),n;return i&&(n=i.getElementsByTagName("input"),n&&n.xsrftoken&&(t=n.xsrftoken.value)),t}function submitSBFormToModal(n,t,i,r){validateSb()&&(loadModalPopup({title:n,height:i,width:r,resizeOnLoad:!0,closeOnEsc:!0}),setTimeout(function(){var n=$("<form />").attr({action:t,method:"post",target:modalEnabled?modalPopupIframeName:"_self"}).appendTo(document.body),i;n.append(CreateHiddenField(n[0],"_XFORMSESSSTATE",GetBForm()._XFORMSESSSTATE.value));i=CsrfKey();i&&!n[0].xsrftoken&&n.append(CreateHiddenField(n[0],"xsrftoken",i));modalEnabled&&n.append(CreateHiddenField(n[0],"RequestFromModal","1"));$("#searchBuilderContainer").find("input,select,textarea").each(function(){if(this.name){var t=(this.type||"").toLowerCase(),i="";t=="radio"||t=="checkbox"?i=this.checked?"checked=checked":"":t="hidden";n.append($('<input type="'+t+'" '+i+" />").attr("name",this.name).val(this.value))}});n.submit().remove()},200))}var LOADING_HTML,tabs=[],gMoreOptsBtn=null,trTabs=[],gMoreOptsBtnTr=null,CopyPasteTracker={copiedText:"",linkNameForCopiedFrom:"",pastedText:"",bindCopyEvent:function(n,t){n.bind("copy",function(){CopyPasteTracker.linkNameForCopiedFrom=t;CopyPasteTracker.copiedText=n.html()})},bindPasteEvent:function(n){n.bind("paste",function(){CopyPasteTracker.pastedText=getSelected();CopyPasteTracker.copiedText.indexOf(CopyPasteTracker.pastedText)!==-1&&DJOmniture.logFesCutPaste({pageName:CopyPasteTracker.linkNameForCopiedFrom,numOfChars:CopyPasteTracker.pastedText.length});j})}},itmMngr={sl:{itmArr:[],pnlId:"sc",incName:"sls",excName:"xsls"},sc:{itmArr:[],pnlId:"sc",incName:"scs",excName:"xsc",defTxt:"allSources"},al:{itmArr:[],pnlId:"au",incName:"als",excName:"xaul"},au:{itmArr:[],pnlId:"au",incName:"aus",excName:"xau",defTxt:"allAuthors"},cl:{itmArr:[],pnlId:"co",incName:"cls",excName:"xcl"},co:{itmArr:[],pnlId:"co",incName:"cos",excName:"xco",defTxt:"allCompanies"},ns:{itmArr:[],pnlId:"ns",incName:"nss",excName:"xns",defTxt:"allSubjects"},nl:{itmArr:[],pnlId:"ns",incName:"nls",excName:"xnl"},"in":{itmArr:[],pnlId:"in",incName:"ins",excName:"xin",defTxt:"allIndustries"},il:{itmArr:[],pnlId:"in",incName:"ils",excName:"xil"},re:{itmArr:[],pnlId:"re",incName:"res",excName:"xre",defTxt:"allRegions"},rl:{itmArr:[],pnlId:"re",incName:"rls",excName:"xrl"},la:{itmArr:[],pnlId:"la",incName:"ipcl",defTxt:"allLanguages"},fes:{itmArr:[],pnlId:"fes",incName:"fess",defTxt:" "},pe:{itmArr:[],pnlId:"pe",incName:"pes",excName:"xpe",defTxt:"allExecutives"},pl:{itmArr:[],pnlId:"pe",incName:"pls",excName:"xpl"}},timeout,dClick=0,queue,category,itemselectedflag;Array.prototype.deleteIndex=deleteIndex;Array.prototype.findIndex=findIndex;Array.prototype.findObjIndex=findObjIndex;Array.prototype.findObjIndexCaseInSensitive=findObjIndexCaseInSensitive;category="",function(n){n.fn.autoResize=function(t){var i=n.extend(t);return this.filter("textarea").each(function(){var t=n(this).css({resize:"none",overflow:"hidden"}),f=t.height(),i=function(){var i={};return n.each(["height","width","lineHeight","textDecoration","letterSpacing"],function(n,r){i[r]=t.css(r)}),t.clone().removeAttr("id").removeAttr("name").css({position:"absolute",top:0,left:-9999}).css(i).attr("tabIndex","-1").insertBefore(t)}(),u=null,r=function(){i.height(0).val(n(this).val()).scrollTop(1e4);var t=Math.max(i.scrollTop(),f),r=n(this).add(i);u!==t&&(u=t,r.height(t))};t.off(".dynSiz").on("keyup.dynSiz",r).on("keydown.dynSiz",r).on("change.dynSiz",r)}),this}}(jQuery),function(n){n.fn.hint=function(n){return n||(n="blur"),this.each(function(){function r(){t.val()===i&&t.hasClass(n)&&t.val("").removeClass(n)}var t=jQuery(this),i=t.attr("title");i&&t.blur(function(){this.value===""&&t.val(i).addClass(n)}).focus(r).blur()})}}(jQuery);$(document).ready(function(){window.integratedSearchBuilder||$("#ftx").autoResize();$("#ftx").keypress(function(n){return(n.keyCode||n.which)==13?(validateSb()&&$(GetBForm()).trigger("submit",{searchBuilder:!0}),!1):!0});$("li.btn","ul.buttons").hover(function(){$(this).addClass("over")},function(){$(this).removeClass("over")})});
